(this.webpackJsonpsmc=this.webpackJsonpsmc||[]).push([[0],{528:function(e,t,n){},830:function(e,t,n){"use strict";n.r(t);var i=n(84),r=n.n(i),a=(n(528),n(40)),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,867)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))},c=n(0),s=n.n(c),l=n(225),d=n(6),u=n(33),h=n(29),b=n(15),p=n(13),j=n(62),f=n(23),v=n(24),g=n(11),O=n.n(g),x=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PLATFORM,"native"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PLATFORM?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SERVER:""),y=n(20),m=n(1),I=n(74),w=n.n(I),k=Object(p.a)((function e(){var t=this;Object(b.a)(this,e),this.NIL_ENTITY="",this.SEM_MODEL_IDENTS=new Set,this.SEM_MODEL_STATEMENTS=new Set,this.instanceofMapping={},this.instanceofProps=new Set,this.instanceofIndex=new S(0,0),this.instanceof=function(e){return t.instanceofIndex.get(e)},this.setInstanceOf=function(e){t.instanceofMapping=e,t.instanceofProps=new Set(Object.values(e)),t.instanceofIndex=S.fromMapping(t.instanceofMapping)}})),S=function(){function e(t,n){var i=this;Object(b.a)(this,e),this.index={},this.start=0,this.end=0,this.get=function(e){var t=e.substring(i.start,i.end),n=i.index[t];return void 0!==n?n.internalNode?n.value.get(e):n.value:void 0!==i.index[""]?i.index[""].value:void 0},this.start=t,this.end=n}return Object(p.a)(e,null,[{key:"fromMapping",value:function(t){var n=Object.keys(t).sort((function(e,t){return t.length-e.length}));if(0===n.length)throw new Error("Empty mapping");return function n(i,r){var a=i[i.length-1],o=new e(r,a.length);if(o.start===o.end){o.index[""]={internalNode:!1,value:t[a]};for(var c=n(i.slice(0,-1),o.end),s=0,l=Object.entries(c.index);s<l.length;s++){var u=Object(d.a)(l[s],2),b=u[0],p=u[1];o.index[b]=p}return o}var j,f={},v=Object(h.a)(i);try{for(v.s();!(j=v.n()).done;){var g=j.value,O=g.substring(o.start,a.length);void 0===f[O]&&(f[O]=[]),f[O].push(g)}}catch(k){v.e(k)}finally{v.f()}for(var x=0,y=Object.entries(f);x<y.length;x++){var m=Object(d.a)(y[x],2),I=m[0],w=m[1];1===w.length?o.index[I]={internalNode:!1,value:t[w[0]]}:o.index[I]={internalNode:!0,value:n(w,o.end)}}return o}(n,0)}}]),e}(),C=function(){function e(){var t=this;Object(b.a)(this,e),this._showedPropsInFullView=new Set,this._showedPropsInPopoverView=new Set,this.instanceofProps={},this.nilEntityId="",this.setNilEntityId=function(e){t.nilEntityId=e},this.setInstanceOfProps=function(e){t.instanceofProps=e},this.setShowedPropsInFullView=function(e){t._showedPropsInFullView=e},this.setShowedPropsInPopoverView=function(e){t._showedPropsInPopoverView=e},this.addShowedPropsInFullView=function(e){t._showedPropsInFullView.add(e)},this.addShowedPropsInPopoverView=function(e){t._showedPropsInPopoverView.add(e)},this.removeShowedPropsInFullView=function(e){t._showedPropsInFullView.delete(e)},this.removeShowedPropsInPopoverView=function(e){t._showedPropsInPopoverView.delete(e)},this.getInstanceOfProp=function(e){for(var n in t.instanceofProps)if(e.startsWith(t.instanceofProps[n]))return t.instanceofProps[e]},Object(y.o)(this,{_showedPropsInFullView:y.p,_showedPropsInPopoverView:y.p,instanceofProps:y.p,nilEntityId:y.p,setNilEntityId:y.f,setInstanceOfProps:y.f,showedPropsInFullView:y.g,showedPropsInPopoverView:y.g,setShowedPropsInFullView:y.f,setShowedPropsInPopoverView:y.f,addShowedPropsInFullView:y.f,addShowedPropsInPopoverView:y.f,removeShowedPropsInFullView:y.f,removeShowedPropsInPopoverView:y.f,getInstanceOfProp:y.f})}return Object(p.a)(e,[{key:"showedPropsInFullView",get:function(){return Array.from(this._showedPropsInFullView)}},{key:"showedPropsInPopoverView",get:function(){return Array.from(this._showedPropsInPopoverView)}}]),e}(),E=Object(p.a)((function e(){var t=this;Object(b.a)(this,e),this.pageSize=5,this.showEntityLinkingEditor=!1,this.setPageSize=function(e){t.pageSize=e},this.toggleEntityLinkingEditor=function(){t.showEntityLinkingEditor=!t.showEntityLinkingEditor},this.enableEntityLinkingEditor=function(){t.showEntityLinkingEditor=!0},Object(y.o)(this,{pageSize:y.p,showEntityLinkingEditor:y.p,setPageSize:y.f,toggleEntityLinkingEditor:y.f,enableEntityLinkingEditor:y.f})})),N=new k,T=function(){function e(){Object(b.a)(this,e),this.entity=void 0,this.table=void 0,this.entity=new C,this.table=new E,Object(y.o)(this,{entity:y.p,table:y.p,fetchSettings:y.f})}return Object(p.a)(e,[{key:"fetchSettings",value:function(){var e=Object(u.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/settings");case 2:t=e.sent,N.setInstanceOf(t.data.entity.instanceof),N.NIL_ENTITY=t.data.entity.nil,N.SEM_MODEL_IDENTS=new Set(t.data.semantic_model.identifiers),N.SEM_MODEL_STATEMENTS=new Set(t.data.semantic_model.statements),(n=Object.values(t.data.entity.instanceof)).length>0&&this.entity.addShowedPropsInPopoverView(n[0]);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),L=Object(p.a)((function e(t){var n=this;Object(b.a)(this,e),this.counter={},this.id2num={},this.label=function(e){return void 0===n.id2num[e.id]||1===n.id2num[e.id]?e.label:"".concat(e.label," ").concat(n.id2num[e.id])},this.nextLabel=function(e,t){return void 0===n.counter[e]?t:"".concat(t," ").concat(n.counter[e])},this.add=function(e){void 0===n.counter[e.uri]&&(n.counter[e.uri]=1),n.id2num[e.id]=n.counter[e.uri],n.counter[e.uri]+=1},this.getNum=function(e){return n.id2num[e.id]};var i,r=Object(h.a)(t||[]);try{for(r.s();!(i=r.n()).done;){var a=i.value;"class_node"===a.nodetype&&(void 0===this.counter[a.uri]&&(this.counter[a.uri]=1),this.id2num[a.id]=this.counter[a.uri],this.counter[a.uri]+=1)}}catch(o){r.e(o)}finally{r.f()}})),P=function(){function e(t,n,i){var r=this;Object(b.a)(this,e),this.id=void 0,this.version=void 0,this.nodes=void 0,this.edges=void 0,this.stale=void 0,this.nodeId2Index={},this.column2nodeIndex={},this.uriCount=void 0,this.isEmpty=function(){return 0==r.edges.length&&r.nodes.every((function(e){return"data_node"===e.nodetype}))},this.clone=function(){var t=r.toJS();return new e(r.id,t.nodes,t.edges)},this.onSave=function(){r.stale=!1},this.node=function(e){return r.nodes[r.nodeId2Index[e]]},this.hasNode=function(e){return void 0!==r.nodeId2Index[e]},this.nodesByURI=function(e){return r.nodes.filter((function(t){return"class_node"===t.nodetype&&t.uri===e}))},this.nodeByColumnIndex=function(e){return r.nodes[r.column2nodeIndex[e]]},this.nodeByEntityId=function(e){return r.nodes.filter((function(t){return"literal_node"===t.nodetype&&"entity-id"===t.value.type&&t.value.id===e}))[0]},this.edge=function(e,t){return r.edges.filter((function(n){return n.source===e&&n.target===t}))[0]},this.hasEdge=function(e,t){return r.edges.filter((function(n){return n.source===e&&n.target===t})).length>0},this.incomingEdges=function(e){return r.edges.filter((function(t){return t.target===e}))},this.outgoingEdges=function(e){return r.edges.filter((function(t){return t.source===e}))},this.nextNodeId=function(){for(var e=0;e<100*r.nodes.length;e++){var t="c-".concat(e);if(void 0===r.nodeId2Index[t])return t}throw new Error("Cannot find new id for a node")},this.findPathMax2hops=function(e,t){var n,i=[],a=r.outgoingEdges(e),o=Object(h.a)(a);try{for(o.s();!(n=o.n()).done;){var c=n.value;if(c.target!==t){var s,l=Object(h.a)(r.outgoingEdges(c.target));try{for(l.s();!(s=l.n()).done;){var d=s.value;d.target===t&&i.push([c,d])}}catch(u){l.e(u)}finally{l.f()}}else i.push([c,void 0])}}catch(u){o.e(u)}finally{o.f()}return i},this.getClassIdOfColumnIndex=function(e){var t,n=r.incomingEdges(r.nodeByColumnIndex(e).id),i=Object(h.a)(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(N.SEM_MODEL_IDENTS.has(a.uri)){if(n.length>1)throw new Error("Invalid semantic model. An entity column has two incoming edges");return a.source}}}catch(o){i.e(o)}finally{i.f()}},this.getOutgoingProperties=function(e){var t,n=[],i=Object(h.a)(r.outgoingEdges(e));try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.node(a.target);if("class_node"===o.nodetype&&N.SEM_MODEL_STATEMENTS.has(o.uri)){var c,s=Object(h.a)(r.outgoingEdges(a.target));try{for(s.s();!(c=s.n()).done;){var l=c.value;n.push([a,l])}}catch(d){s.e(d)}finally{s.f()}}else n.push([a,void 0])}}catch(d){i.e(d)}finally{i.f()}return n},this._removeNode=function(e){if(void 0!==r.nodeId2Index[e]&&void 0!==r.nodes[r.nodeId2Index[e]]){var t=r.nodeId2Index[e],n=r.nodes[t];if(!("data_node"===n.nodetype||"literal_node"===n.nodetype&&n.isInContext)){r.nodes[t]=void 0;var i,a=r.edges.filter((function(t){return t.source===e||t.target===e})),o=Object(h.a)(a);try{for(o.s();!(i=o.n()).done;){var c=i.value;r._removeEdge(c.source,c.target)}}catch(s){o.e(s)}finally{o.f()}}}},this._removeEdge=function(e,t){for(var n=void 0,i=0,a=0,o=0;o<r.edges.length;o++){var c=r.edges[o];c.source===e&&c.target===t&&(n=o),c.source!==e&&c.target!==e||(i+=1),c.source!==t&&c.target!==t||(a+=1)}void 0!==n&&(r.edges.splice(n,1),1===i&&r._removeNode(e),1===a&&r._removeNode(t))},this.buildIndex=function(){r.nodeId2Index={},r.column2nodeIndex={};for(var e=0;e<r.nodes.length;e++){var t=r.nodes[e];r.nodeId2Index[t.id]=e,"data_node"===t.nodetype&&null!==t.columnIndex&&(r.column2nodeIndex[t.columnIndex]=e)}},this.id=t,this.version=0,this.nodes=n,this.edges=i,this.stale=!1,this.buildIndex(),this.uriCount=new L(this.nodes),Object(y.o)(this,{version:y.p,nodes:y.p,edges:y.p,stale:y.p,nodeId2Index:y.p,column2nodeIndex:y.p,uriCount:y.p,addColumnRelationship:y.f,upsertColumnType:y.f,upsertRelationship:y.f,addClassNode:y.f,addLiteralNode:y.f,removeNode:y.f,updateClassNode:y.f,updateDataNode:y.f,updateLiteralNode:y.f,addEdge:y.f,removeEdge:y.f,updateEdge:y.f})}return Object(p.a)(e,[{key:"toJS",value:function(){return{nodes:Object(y.r)(this.nodes),edges:Object(y.r)(this.edges),nodeId2Index:Object(y.r)(this.nodeId2Index)}}},{key:"addColumnRelationship",value:function(e,t,n){var i=this.nodeByColumnIndex(e),r=this.nodeByColumnIndex(t),a=this.incomingEdges(i.id);if(0===a.length)throw new Error("Cannot add link from a data node to another node");if(1!==a.length)throw new Error("The source column connects to multiple class nodes! Don't know the exact class node to choose");var o=this.incomingEdges(r.id);if(o.length>1)throw new Error("The target column connects to multiple class nodes! Don't know the exact class node to choose");var c=a[0].source,s=0===o.length?r.id:o[0].source;this.addEdge(Object(m.a)(Object(m.a)({},n),{},{source:c,target:s}))}},{key:"upsertColumnType",value:function(e,t){var n=this.nodeByColumnIndex(e),i=this.incomingEdges(n.id);if(i.length>1)throw new Error("The column connects to multiple class nodes! Don't know the exact class node to choose");if(0===i.length){var r=this.nextNodeId();this.addClassNode(Object(m.a)(Object(m.a)({},t),{},{id:r})),this.addEdge({source:r,target:n.id,uri:"http://www.w3.org/2000/01/rdf-schema#label",label:"rdfs:label",approximation:!1})}else{var a=i[0];this.updateClassNode(a.source,t),"http://www.w3.org/2000/01/rdf-schema#label"!==a.uri&&this.updateEdge(a.source,a.target,{uri:"http://www.w3.org/2000/01/rdf-schema#label",label:"rdfs:label",approximation:a.approximation})}}},{key:"upsertRelationship",value:function(e,t,n,i){var r=this.findPathMax2hops(e,t);if(0!==r.length){if(r.length>1)throw new Error("There are more one path between two nodes. Don't know which path to update it");var a=Object(d.a)(r[0],2),o=a[0],c=a[1];this.updateEdge(o.source,o.target,{uri:n.uri,label:n.label,approximation:!1}),void 0!==c&&this.updateEdge(c.source,c.target,{uri:i.uri,label:i.label,approximation:!1})}else if(n.uri===i.uri)this.addEdge({source:e,target:t,uri:n.uri,label:n.label,approximation:!1});else{var s=this.nextNodeId();this.addClassNode({id:s,uri:"http://wikiba.se/ontology#Statement",label:"wikibase:Statement",approximation:!1,nodetype:"class_node"}),this.addEdge({source:e,target:s,uri:n.uri,label:n.label,approximation:!1}),this.addEdge({source:s,target:t,uri:i.uri,label:i.label,approximation:!1})}}},{key:"addClassNode",value:function(e){if(void 0!==this.nodeId2Index[e.id])throw new Error("Duplicated id");this.nodeId2Index[e.id]=this.nodes.length,this.nodes.push(e),this.uriCount.add(e),this.version+=1,this.stale=!0}},{key:"addLiteralNode",value:function(e){if(void 0!==this.nodeId2Index[e.id])throw new Error("Duplicated id");this.nodeId2Index[e.id]=this.nodes.length,this.nodes.push(e),this.version+=1,this.stale=!0}},{key:"removeNode",value:function(e){this._removeNode(e),this.nodes=this.nodes.filter((function(e){return void 0!==e})),this.buildIndex(),this.version+=1,this.stale=!0,this.uriCount=new L(this.nodes)}},{key:"updateClassNode",value:function(e,t){var n=this.nodeId2Index[e],i=this.nodes[n];if("class_node"!==i.nodetype)throw new Error("Invalid node type. Expected class node but get ".concat(i.nodetype));Object.assign(i,t),this.version+=1,this.stale=!0,void 0!==t.uri&&(this.uriCount=new L(this.nodes))}},{key:"updateLiteralNode",value:function(e,t){var n=this.nodeId2Index[e],i=this.nodes[n];if("literal_node"!==i.nodetype)throw new Error("Invalid node type. Expected literal node but get ".concat(i.nodetype));Object.assign(i,t),this.version+=1,this.stale=!0}},{key:"updateDataNode",value:function(e,t){var n=this.nodeId2Index[e],i=this.nodes[n];if("data_node"!==i.nodetype)throw new Error("Invalid node type. Expected data node but get ".concat(i.nodetype));Object.assign(i,t),this.version+=1,this.stale=!0}},{key:"addEdge",value:function(e){if(this.hasEdge(e.source,e.target))throw new Error("Cannot have more than one edge between two nodes");this.edges.push(e),this.version+=1,this.stale=!0}},{key:"removeEdge",value:function(e,t){var n=this.nodes.length;this._removeEdge(e,t),this.nodes=this.nodes.filter((function(e){return void 0!==e})),this.nodes.length!==n&&(this.buildIndex(),this.uriCount=new L(this.nodes)),this.version+=1,this.stale=!0}},{key:"updateEdge",value:function(e,t,n){for(var i=0;i<this.edges.length;i++){var r=this.edges[i];r.source===e&&r.target===t&&(this.edges[i]=Object(m.a)(Object(m.a)({},this.edges[i]),n))}this.version=(this.version||0)+1,this.stale=!0}}]),e}(),_=function(){function e(t,n,i,r,a,o){Object(b.a)(this,e),this.id=void 0,this.name=void 0,this.description=void 0,this.version=void 0,this.graph=void 0,this.table=void 0,this.id=t,this.name=n,this.description=i,this.version=r,this.graph=a,this.table=o}return Object(p.a)(e,[{key:"markSaved",value:function(){this.graph.onSave()}},{key:"toModel",value:function(){return this}}]),e}();_.isDraft=function(e){return void 0!==e.draftID};var D=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e,i,r,a,o,c){var s;return Object(b.a)(this,n),(s=t.call(this,-1,i,r,a,o,c)).draftID=void 0,s.draftID=e,s}return Object(p.a)(n,null,[{key:"getDefaultDraftSemanticModel",value:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=new P(e,i.columns.map((function(e,t){return{id:"col-".concat(t),label:e,columnIndex:t,nodetype:"data_node"}})),[]);return a.stale=!0,new n(e,t,r,0,a,i.id)}}]),n}(_),B=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this,"".concat(x,"/api/semanticmodel"),void 0,!1,[new a.m("table")])).getNewCreateDraftId=function(t){for(var n=0;;){var i="draft-".concat(n,":").concat(t.id);if(void 0===e.getCreateDraft(i))return i;n++}},e}return Object(p.a)(n,[{key:"tableIndex",get:function(){return this.indices[0]}},{key:"getNewSemanticModelName",value:function(e){var t,n=this.findByTable(e.id),i=this.getCreateDraftsByTable(e),r=-1,a=Object(h.a)(n.concat(i));try{for(a.s();!(t=a.n()).done;){var o=t.value,c=/sm-(\d+)/.exec(o.name);null!==c&&(parseInt(c[1])>=r&&(r=Math.max(r,parseInt(c[1]))))}}catch(s){a.e(s)}finally{a.f()}return"sm-".concat(r+1)}},{key:"getCreateDraftsByTable",value:function(e){var t,n=[],i=Object(h.a)(this.createDrafts.values());try{for(i.s();!(t=i.n()).done;){var r=t.value;r.table==e.id&&n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"findByTable",value:function(e){var t=this;return Array.from(this.tableIndex.index.get(e)||[]).map((function(e){return t.records.get(e)}))}},{key:"deindex",value:function(e){var t,n=Object(h.a)(this.indices);try{for(n.s();!(t=n.n()).done;){t.value.remove(e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"hasByTable",value:function(e){return this.tableIndex.index.has(e)}},{key:"deserialize",value:function(e){var t=e.data.nodes.map((function(e){var t=e.type;return delete e.type,e.nodetype=t,"data_node"===t?(e.columnIndex=e.column_index,delete e.column_index):"literal_node"===t&&(e.isInContext=e.is_in_context,delete e.is_in_context),e})),n=e.data.edges,i=new P(e.id.toString(),t,n);return new _(e.id,e.name,e.description,e.version,i,e.table)}},{key:"serializeUpdateDraft",value:function(e){return e.version+=1,{table:e.table,name:e.name,description:e.description,version:e.version,data:{nodes:e.graph.nodes.map((function(e){switch(e.nodetype){case"class_node":return{id:e.id,uri:e.uri,approximation:e.approximation,label:e.label,type:e.nodetype};case"data_node":return{id:e.id,label:e.label,column_index:e.columnIndex,type:e.nodetype};case"literal_node":return{id:e.id,value:e.value,label:e.label,is_in_context:e.isInContext,type:e.nodetype}}})),edges:e.graph.edges.map((function(e){return{source:e.source,target:e.target,uri:e.uri,approximation:e.approximation,label:e.label}}))}}}},{key:"serializeCreateDraft",value:function(e){return this.serializeUpdateDraft(e)}}]),n}(a.b),F=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e,i,r,a,o,c){var s;return Object(b.a)(this,n),(s=t.call(this,"".concat(x,"/api/assistant"),void 0,!1,[])).tables=void 0,s.rows=void 0,s.smStore=void 0,s.entityStore=void 0,s.classStore=void 0,s.propStore=void 0,s.predict=Object(y.j)(O.a.mark((function e(t){var n,i,r,a,o,c,s,l,d,u,b;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat(this.remoteURL,"/predict/").concat(t.id),{params:{algorithm:"mtab"}});case 2:n=e.sent,i=n.data.mtab.sm,r=n.data.mtab.rows,a=this.smStore.getNewCreateDraftId(t),o=this.smStore.deserialize({data:i,id:""}).graph,1===(c=this.smStore.getCreateDraftsByTable(t)).length&&c[0].graph.isEmpty()&&this.smStore.deleteCreateDraft(c[0].draftID),s=this.smStore.getNewSemanticModelName(t),this.smStore.setCreateDraft(new D(a,s,"",0,o,t.id)),l=r.map(this.rows.deserialize),d=Object(h.a)(l);try{for(d.s();!(u=d.n()).done;)b=u.value,this.rows.set(b)}catch(p){d.e(p)}finally{d.f()}return e.abrupt("return");case 15:case"end":return e.stop()}}),e,this)}))),s.tables=e,s.rows=i,s.smStore=r,s.classStore=a,s.propStore=o,s.entityStore=c,Object(y.o)(Object(j.a)(s),{predict:y.f,getColumnTypes:y.f,getColumnProperties:y.f,getColumnTypesServer:y.f}),s}return Object(p.a)(n,[{key:"getColumnTypes",value:function(){var e=Object(u.a)(O.a.mark((function e(t,n,i){var r,a,o,c,s,l,d,u,b,p,j,f,v,g,x,y,m,I,w,k,S,C,E,T,L,P,_,D,B,F,R,A;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rows.fetchByTable(t,0,t.size);case 2:r=e.sent,a=new Set,o=Object(h.a)(r);try{for(o.s();!(c=o.n()).done;){s=c.value,l=Object(h.a)(s.links[n]||[]);try{for(l.s();!(d=l.n()).done;)if(void 0!==(u=d.value).entityId&&u.entityId!==N.NIL_ENTITY&&a.add(u.entityId),i){b=Object(h.a)(u.candidateEntities);try{for(b.s();!(p=b.n()).done;)j=p.value,a.add(j.entityId)}catch(O){b.e(O)}finally{b.f()}}}catch(O){l.e(O)}finally{l.f()}}}catch(O){o.e(O)}finally{o.f()}return e.next=8,this.entityStore.fetchByIds(Array.from(a));case 8:f=e.sent,v=new Set,g=0,x=Object.values(f);case 11:if(!(g<x.length)){e.next=21;break}if(y=x[g],void 0!==(m=N.instanceof(y.uri))&&void 0!==y.properties[m]){e.next=16;break}return e.abrupt("continue",18);case 16:I=Object(h.a)(y.properties[m]);try{for(I.s();!(w=I.n()).done;)"entityid"===(k=w.value).value.type&&(S=k.value.value,v.add(S))}catch(O){I.e(O)}finally{I.f()}case 18:g++,e.next=11;break;case 21:return e.next=23,this.classStore.fetchByIds(Array.from(v));case 23:C=e.sent,E=this.smStore.findByTable(t.id).concat(this.smStore.getCreateDraftsByTable(t)),T=new Set,L=Object(h.a)(E);try{for(L.s();!(P=L.n()).done;)_=P.value,void 0!==(D=_.graph.getClassIdOfColumnIndex(n))&&"class_node"===(B=_.graph.node(D)).nodetype&&T.add(B.uri)}catch(O){L.e(O)}finally{L.f()}return e.t0=h.a,e.next=31,Promise.all(Array.from(T).map(this.classStore.fetchIfMissingByURI.bind(this.classStore)));case 31:e.t1=e.sent,F=(0,e.t0)(e.t1),e.prev=33,F.s();case 35:if((R=F.n()).done){e.next=42;break}if(void 0!==(A=R.value)){e.next=39;break}return e.abrupt("continue",40);case 39:C[A.id]=A;case 40:e.next=35;break;case 42:e.next=47;break;case 44:e.prev=44,e.t2=e.catch(33),F.e(e.t2);case 47:return e.prev=47,F.f(),e.finish(47);case 50:return e.abrupt("return",C);case 51:case"end":return e.stop()}}),e,this,[[33,44,47,50]])})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"getColumnProperties",value:function(){var e=Object(u.a)(O.a.mark((function e(t,n,i){var r,a,o,c,s,l,u,b,p,j,f,v,g,x,y,m,I,w,k,S,C,E,T,L,P,_,D,B,F,R,A,z,M,U,H,V,q,W,K,Y,J;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rows.fetchByTable(t,0,t.size);case 2:r=e.sent,a=new Set,o=Object(h.a)(r);try{for(o.s();!(c=o.n()).done;){s=c.value,l=Object(h.a)(s.links[n]||[]);try{for(l.s();!(u=l.n()).done;)if(void 0!==(b=u.value).entityId&&b.entityId!==N.NIL_ENTITY&&a.add(b.entityId),i){p=Object(h.a)(b.candidateEntities);try{for(p.s();!(j=p.n()).done;)f=j.value,a.add(f.entityId)}catch(O){p.e(O)}finally{p.f()}}}catch(O){l.e(O)}finally{l.f()}}}catch(O){o.e(O)}finally{o.f()}return e.next=8,this.entityStore.fetchByIds(Array.from(a));case 8:for(v=e.sent,g=new Set,x=0,y=Object.values(v);x<y.length;x++)for(m=y[x],I=0,w=Object.entries(m.properties);I<w.length;I++){k=Object(d.a)(w[I],2),S=k[0],C=k[1],g.add(S),E=Object(h.a)(C);try{for(E.s();!(T=E.n()).done;){L=T.value,P=Object(h.a)(L.qualifiersOrder);try{for(P.s();!(_=P.n()).done;)D=_.value,g.add(D)}catch(O){P.e(O)}finally{P.f()}}}catch(O){E.e(O)}finally{E.f()}}return e.next=13,this.propStore.fetchByIds(Array.from(g));case 13:B=e.sent,F=this.smStore.findByTable(t.id).concat(this.smStore.getCreateDraftsByTable(t)),R=new Set,A=Object(h.a)(F);try{for(A.s();!(z=A.n()).done;)if(M=z.value,void 0!==(U=M.graph.getClassIdOfColumnIndex(n))&&"class_node"===(H=M.graph.node(U)).nodetype){V=Object(h.a)(M.graph.outgoingEdges(H.id));try{for(V.s();!(q=V.n()).done;)W=q.value,R.add(W.uri)}catch(O){V.e(O)}finally{V.f()}}}catch(O){A.e(O)}finally{A.f()}return e.t0=h.a,e.next=21,Promise.all(Array.from(R).map(this.propStore.fetchIfMissingByURI.bind(this.propStore)));case 21:e.t1=e.sent,K=(0,e.t0)(e.t1),e.prev=23,K.s();case 25:if((Y=K.n()).done){e.next=32;break}if(void 0!==(J=Y.value)){e.next=29;break}return e.abrupt("continue",30);case 29:B[J.id]=J;case 30:e.next=25;break;case 32:e.next=37;break;case 34:e.prev=34,e.t2=e.catch(23),K.e(e.t2);case 37:return e.prev=37,K.f(),e.finish(37);case 40:return e.abrupt("return",B);case 41:case"end":return e.stop()}}),e,this,[[23,34,37,40]])})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"getColumnTypesServer",value:function(){var e=Object(u.a)(O.a.mark((function e(t,n){var i,r,a,o,c,s,l,d,u,b,p,j,f,v,g,x,y,m,I,k,S,C,E,N;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=w.a.post("".concat(this.remoteURL,"/column-types"),{table:t.id,column:n}),r=this.smStore.findByTable(t.id).concat(this.smStore.getCreateDraftsByTable(t)),a=new Set,o=Object(h.a)(r);try{for(o.s();!(c=o.n()).done;)s=c.value,void 0!==(l=s.graph.getClassIdOfColumnIndex(n))&&"class_node"===(d=s.graph.node(l)).nodetype&&a.add(d.uri)}catch(O){o.e(O)}finally{o.f()}return e.next=7,i;case 7:return u=e.sent,b=Object.fromEntries(Object.entries(u.data).map((function(e){return[e[0],new Set(e[1])]}))),e.t0=Object,e.next=12,this.classStore.fetchByIds(Object.keys(b));case 12:return e.t1=e.sent,p=e.t0.values.call(e.t0,e.t1),e.t2=Object,e.next=17,Promise.all(Array.from(a).map(this.classStore.fetchIfMissingByURI.bind(this.classStore)));case 17:for(e.t3=e.sent.filter((function(e){return void 0!==e})).map((function(e){return[e.id,e]})),j=e.t2.fromEntries.call(e.t2,e.t3),f=0,v=Object.values(j);f<v.length;f++)if(g=v[f],void 0===b[g.id]){b[g.id]=new Set,x=Object(h.a)(g.parents);try{for(x.s();!(y=x.n()).done;)m=y.value,void 0!==b[m]&&b[m].add(g.id)}catch(O){x.e(O)}finally{x.f()}}for(I=0,k=p;I<k.length;I++){S=k[I],C=Object(h.a)(S.parents);try{for(C.s();!(E=C.n()).done;)N=E.value,void 0!==j[N]&&b[N].add(S.id)}catch(O){C.e(O)}finally{C.f()}}return e.abrupt("return",b);case 22:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(a.k),R=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(b.a)(this,n),t.call(this,"".concat(x,"/api/entities"),void 0,!1)}return Object(p.a)(n,[{key:"deserialize",value:function(e){e.readableLabel=e.readable_label,delete e.readable_label;for(var t=0,n=Object.values(e.properties);t<n.length;t++){var i,r=n[t],a=Object(h.a)(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.qualifiersOrder=o.qualifiers_order,delete o.qualifiers_order}}catch(c){a.e(c)}finally{a.f()}}return e}}]),n}(a.k),A=n(107),z=n(89),M=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this,"".concat(x,"/api/classes"),{readableLabel:"readable_label",parentsClosure:"parents_closure"},!1,[new a.n("uri")])).doesNotExistURIs=new Set,e.getClassByURI=function(t){var n=e.uriIndex.index.get(t);return void 0!==n?e.get(n):void 0},Object(y.o)(Object(j.a)(e),{doesNotExistURIs:y.p,fetchIfMissingByURI:y.f}),e}return Object(p.a)(n,[{key:"uriIndex",get:function(){return this.indices[0]}},{key:"fetchIfMissingByURI",value:function(){var e=Object(u.a)(O.a.mark((function e(t){var n,i,r=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.doesNotExistURIs.has(t)){e.next=2;break}return e.abrupt("return",void 0);case 2:if(void 0!==(n=this.uriIndex.index.get(t))){e.next=9;break}return e.next=6,this.fetchOne({conditions:{uri:t}});case 6:return void 0===(i=e.sent)&&Object(y.q)((function(){r.doesNotExistURIs.add(t)})),e.abrupt("return",i);case 9:return e.abrupt("return",this.get(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deserialize",value:function(e){return(e=Object(A.a)(Object(z.a)(n.prototype),"deserialize",this).call(this,e)).parentsClosure=new Set(e.parentsClosure),e}}]),n}(a.k),U=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this,"".concat(x,"/api/properties"),{readableLabel:"readable_label"},!1,[new a.n("uri")])).doesNotExistURIs=new Set,e.getPropertyByURI=function(t){var n=e.uriIndex.index.get(t);return void 0!==n?e.get(n):void 0},Object(y.o)(Object(j.a)(e),{doesNotExistURIs:y.p,fetchIfMissingByURI:y.f}),e}return Object(p.a)(n,[{key:"uriIndex",get:function(){return this.indices[0]}},{key:"fetchIfMissingByURI",value:function(){var e=Object(u.a)(O.a.mark((function e(t){var n,i,r=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.doesNotExistURIs.has(t)){e.next=2;break}return e.abrupt("return",void 0);case 2:if(void 0!==(n=this.uriIndex.index.get(t))){e.next=9;break}return e.next=6,this.fetchOne({conditions:{uri:t}});case 6:return void 0===(i=e.sent)&&Object(y.q)((function(){r.doesNotExistURIs.add(t)})),e.abrupt("return",i);case 9:return e.abrupt("return",this.get(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(a.k),H=Object(p.a)((function e(t,n,i){Object(b.a)(this,e),this.id=void 0,this.name=void 0,this.description=void 0,this.id=t,this.name=n,this.description=i,Object(y.o)(this,{id:y.p,name:y.p,description:y.p})})),V=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"markSaved",value:function(){}},{key:"toModel",value:function(){return new H(this.id,this.name,this.description)}}],[{key:"fromProject",value:function(e){return new n(e.id,e.name,e.description)}}]),n}(H),q=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(b.a)(this,n),(i=t.call(this,0,"","")).draftID=void 0,i.draftID=e,i}return Object(p.a)(n)}(H),W=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this,"".concat(x,"/api/project"),void 0,!1)).uploadTable=function(){var e=Object(u.a)(O.a.mark((function e(t,n,i,r){var a,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",n),void 0!==i&&a.append("parser_opts",JSON.stringify({file:i})),void 0!==r&&a.append("selected_tables",JSON.stringify(r)),e.next=6,w.a.post("".concat(x,"/api/project/").concat(t,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"}});case 6:if(void 0===(o=e.sent).data.tables){e.next=9;break}return e.abrupt("return",o.data.tables[0]);case 9:return e.abrupt("return",o.data.table_ids);case 10:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),e}return Object(p.a)(n,[{key:"deserialize",value:function(e){return new H(e.id,e.name,e.description)}},{key:"serializeUpdateDraft",value:function(e){return{id:e.id,name:e.name,description:e.description}}},{key:"serializeCreateDraft",value:function(e){return{name:e.name,description:e.description}}}]),n}(a.b),K=["csv","json"];function Y(e){return void 0!==e.nLines}var J=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this,"".concat(x,"/api/tablerow"),void 0,!1,[new a.i("table","index")])).updateCellLinks=Object(y.j)(O.a.mark((function e(t,n,i,r){var a,o,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("number"!==typeof(a=t.row[n])){e.next=3;break}throw new Error("Can't not link a number \"".concat(a,'" to an entity'));case 3:if(void 0!==t.links[n]&&0!==t.links[n].length){e.next=7;break}if(void 0!==i){e.next=6;break}return e.abrupt("return");case 6:t.links[n]=[{start:0,end:a.length,url:void 0,entityId:i,candidateEntities:[]}];case 7:if(t.links[n][0].entityId=i,e.prev=8,o={links:t.links[n].map(this.serializeLink)},!r){c=Object(h.a)(o.links);try{for(c.s();!(s=c.n()).done;)delete s.value.candidate_entities}catch(l){c.e(l)}finally{c.f()}}return this.state.value="updating",e.next=14,w.a.put("".concat(this.remoteURL,"/").concat(t.id,"/cells/").concat(n),o);case 14:this.state.value="updated",e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(8),this.state.value="error",e.t0;case 21:case"end":return e.stop()}}),e,this,[[8,17]])}))),e.updateColumnLinks=Object(y.j)(O.a.mark((function e(t,n,i,r){var a,o,c,s,l,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(a=this.tableIndex.index.get(t.id))){e.next=25;break}o=Object(h.a)(a),e.prev=3,o.s();case 5:if((c=o.n()).done){e.next=17;break}if(s=Object(d.a)(c.value,2),s[0],l=s[1],(u=this.records.get(l)).row[n]===i){e.next=10;break}return e.abrupt("continue",15);case 10:if(void 0!==u.links[n]&&0!==u.links[n].length){e.next=14;break}if(void 0!==r){e.next=13;break}return e.abrupt("continue",15);case 13:u.links[n]=[{start:0,end:i.length,url:void 0,entityId:r,candidateEntities:[]}];case 14:u.links[n][0].entityId=r;case 15:e.next=5;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:return e.prev=25,this.state.value="updating",e.next=29,w.a.put("".concat(this.remoteURL,"/update_column_links"),{table:t.id,column:n,text:i,entity_id:void 0===r?null:r});case 29:this.state.value="updated",e.next=36;break;case 32:throw e.prev=32,e.t1=e.catch(25),this.state.value="error",e.t1;case 36:case"end":return e.stop()}}),e,this,[[3,19,22,25],[25,32]])}))),e.fetchByTable=Object(y.j)(O.a.mark((function e(t,n,i){var r,a,o,c,s,l,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.size<n+i&&(i=t.size-n),r=!0,void 0!==(a=this.tableIndex.index.get(t.id))){e.next=8;break}return e.next=6,this.fetch({limit:i,offset:n,conditions:{table:t.id}});case 6:return o=e.sent,e.abrupt("return",o.records);case 8:c=[],s=0;case 10:if(!(s<i)){e.next=19;break}if(void 0!==(l=a.get(s+n))){e.next=15;break}return r=!1,e.abrupt("break",19);case 15:c.push(this.records.get(l));case 16:s++,e.next=10;break;case 19:if(!r){e.next=21;break}return e.abrupt("return",c);case 21:return e.next=23,this.fetch({limit:i,offset:n,conditions:{table:t.id}});case 23:return d=e.sent,e.abrupt("return",d.records);case 25:case"end":return e.stop()}}),e,this)}))),e.serializeLink=function(e){return{start:e.start,end:e.end,url:e.url||null,entity_id:e.entityId||null,candidate_entities:e.candidateEntities.map((function(e){return{entity_id:e.entityId,probability:e.probability}}))}},Object(y.o)(Object(j.a)(e),{fetchByTable:y.f,updateCellLinks:y.f,updateColumnLinks:y.f}),e}return Object(p.a)(n,[{key:"tableIndex",get:function(){return this.indices[0]}},{key:"index",value:function(e){this.tableIndex.add(e)}},{key:"deserialize",value:function(e){return Object.values(e.links).forEach((function(e){e.forEach((function(e){null!==e.entity_id&&(e.entityId=e.entity_id),null===e.url&&delete e.url,e.candidate_entities.forEach((function(e){e.entityId=e.entity_id,delete e.entity_id})),e.candidateEntities=e.candidate_entities,delete e.entity_id,delete e.candidate_entities}))})),e}},{key:"serializeRecord",value:function(e){var t=this;return{table:e.table,index:e.index,row:Array.from(e.row),links:Object.fromEntries(Object.entries(e.links).map((function(e){var n=Object(d.a)(e,2);return[n[0],n[1].map(t.serializeLink)]})))}}}]),n}(a.l),G=new(function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this,"".concat(x,"/api/table"),void 0,!1,[new a.m("project")])).findByProject=function(t,n,i){return Array.from(e.projectIndex.index.get(t)||[]).map((function(t){return e.records.get(t)}))},e}return Object(p.a)(n,[{key:"projectIndex",get:function(){return this.indices[0]}},{key:"deserialize",value:function(e){return e.contextPage=e.context_page,null!==e.contextPage&&void 0!==e.contextPage||(e.contextPage={}),null!==e.contextPage.entity&&(e.contextPage.entityId=e.contextPage.entity,delete e.contextPage.entity),e.contextValues=e.context_values,void 0!==e.context_tree&&(e.contextTree=e.context_tree.map((function(e){return e.contentBefore=e.content_before.map((function(e){return void 0!==e.n_lines&&(e.nLines=e.n_lines,delete e.n_lines),e})),e.contentAfter=e.content_after.map((function(e){return void 0!==e.n_lines&&(e.nLines=e.n_lines,delete e.n_lines),e})),delete e.content_before,delete e.content_after,e})),delete e.context_tree),delete e.context_tree,delete e.context_values,delete e.context_page,e}},{key:"index",value:function(e){this.projectIndex.add(e)}}]),n}(a.l)),Q=new B,$=new J,X=new M,Z=new U,ee=new R,te={projectStore:new W,tableStore:G,tableRowStore:$,semanticModelStore:Q,entityStore:ee,propertyStore:Z,classStore:X,assistantService:new F(G,$,Q,X,Z,ee),uiSettings:new T};Object(a.r)((function(e){l.b.error("Error while talking with the server.",5)})),window._stores=te;var ne=Object(c.createContext)(te);function ie(){return s.a.useContext(ne)}var re=n(185),ae=n(117),oe=n(499),ce=n(69),se=n(856),le=n(314),de=n(48),ue=n(49),he=n(852),be=n(86),pe=n(500),je=n(92),fe=n(5),ve=Object(he.a)({})(Object(de.a)((function(e){e.classes;var t=ie().projectStore,n=be.a.useForm(),i=Object(d.a)(n,1)[0],r=Object(c.useState)({name:"",status:"success"}),a=Object(d.a)(r,2),o=a[0],s=a[1];return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)(be.a,{labelCol:{span:4},wrapperCol:{span:20},form:i,onFinish:function(){var e=new q("");e.name=i.getFieldValue("name"),e.description=i.getFieldValue("description"),t.create(e).then((function(){pe.a.destroyAll()})).catch((function(){s({name:e.name,status:"error"})}))},children:[Object(fe.jsx)(be.a.Item,{name:"name",label:"name",rules:[{required:!0}],validateStatus:o.name===i.getFieldValue("name")&&"error"===o.status?"error":void 0,children:Object(fe.jsx)(je.a,{})}),Object(fe.jsx)(be.a.Item,{name:"description",label:"description",rules:[{required:!0}],children:Object(fe.jsx)(je.a,{})}),Object(fe.jsx)(be.a.Item,{wrapperCol:{span:20,offset:4},children:Object(fe.jsx)(ce.a,{type:"primary",htmlType:"submit",children:"Create"})})]})})}))),ge=[ue.m[5],ue.n[5],ue.a[5],ue.e[5],ue.j[5],ue.o[5],ue.h[5],ue.f[5],ue.b[5],ue.c[5],ue.l[5],ue.i[5]],Oe=Object(de.a)((function(){var e=ie().projectStore;return Object(c.useEffect)((function(){e.fetch({limit:100,offset:0})}),[e]),Object(fe.jsxs)(s.a.Fragment,{children:[Object(fe.jsxs)(re.a,{gutter:16,children:[Object(fe.jsx)(ae.a,{className:"gutter-row",span:16,children:Object(fe.jsx)(oe.a.Title,{level:3,children:"Projects"})}),Object(fe.jsx)(ae.a,{className:"gutter-row",span:8,children:Object(fe.jsx)(ce.a,{style:{float:"right"},type:"primary",onClick:function(){return function(e){var t=Object(fe.jsx)(ve,{});pe.a.info({title:Object(fe.jsx)("span",{style:{marginBottom:16,display:"inline-block"},children:"New Project"}),content:t,bodyStyle:{margin:-8},okButtonProps:{style:{display:"none"}},maskClosable:!0,mask:!0,zIndex:e,width:"calc(100% - 128px)",style:{top:64}})}()},children:"New Project"})})]}),Object(fe.jsx)(re.a,{gutter:16,children:Object(fe.jsx)(ae.a,{className:"gutter-row",span:24,children:Object(fe.jsx)(se.b,{size:"small",bordered:!0,itemLayout:"horizontal",dataSource:e.list,renderItem:function(e,t){return Object(fe.jsx)(se.b.Item,{children:Object(fe.jsx)(se.b.Item.Meta,{avatar:Object(fe.jsx)(le.a,{shape:"square",size:"large",style:{marginTop:4,backgroundColor:ge[e.name.charCodeAt(0)%ge.length]},children:e.name[0].toUpperCase()}),title:Object(fe.jsx)(a.d,{path:ri.project,urlArgs:{projectId:e.id},queryArgs:{},children:e.name}),description:e.description})})}})})})]})})),xe=n(507),ye=n(176),me=n(485),Ie=n(174),we=n.n(Ie),ke=n(61),Se=Object(he.a)({})(Object(de.a)((function(e){var t=e.project,n=(e.classes,ie().projectStore),i=be.a.useForm(),r=Object(d.a)(i,1)[0],a=Object(c.useState)({name:"",status:"success"}),o=Object(d.a)(a,2),s=o[0],l=o[1];return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)(be.a,{labelCol:{span:4},wrapperCol:{span:20},form:r,onFinish:function(){var e=V.fromProject(t);e.name=r.getFieldValue("name"),e.description=r.getFieldValue("description"),n.update(e).then((function(){pe.a.destroyAll()})).catch((function(){l({name:e.name,status:"error"})}))},children:[Object(fe.jsx)(be.a.Item,{name:"name",label:"name",rules:[{required:!0}],initialValue:t.name,validateStatus:s.name===r.getFieldValue("name")&&"error"===s.status?"error":void 0,children:Object(fe.jsx)(je.a,{})}),Object(fe.jsx)(be.a.Item,{name:"description",label:"description",rules:[{required:!0}],initialValue:t.description,children:Object(fe.jsx)(je.a,{})}),Object(fe.jsx)(be.a.Item,{wrapperCol:{span:20,offset:4},children:Object(fe.jsxs)(ke.b,{style:{width:"100%"},children:[Object(fe.jsx)(ce.a,{type:"primary",htmlType:"submit",children:"Update"}),Object(fe.jsx)(ce.a,{type:"primary",danger:!0,onClick:function(){n.delete(t.id).then((function(){pe.a.destroyAll()})).then((function(){ri.home.path().open()}))},children:"Delete"})]})})]})})}))),Ce=n(859),Ee=n(853),Ne=n(503),Te=n(141),Le=function(e){e.opt;var t=e.form;return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(be.a.Item,{name:"delimiter",label:"delimiter",rules:[{required:!0}],children:Object(fe.jsx)(je.a,{onChange:function(e){t.setFieldsValue({delimiter:e.target.value.replace("\\t","\t").replace("\\n","\n")})},style:{width:60}})}),Object(fe.jsx)(be.a.Item,{name:"first_row_is_header",label:"Is first row header",rules:[{required:!0}],valuePropName:"checked",children:Object(fe.jsx)(Ne.a,{})})]})},Pe=function(e){switch(e){case"\t":return"\\t";case"\n":return"\\n";default:return e}},_e=function(e){var t,n=be.a.useForm(),i=Object(d.a)(n,1)[0];return t="csv"===e.parserOpts.format?Object(fe.jsx)(Le,{opt:e.parserOpts,form:i}):null,Object(fe.jsxs)(be.a,{layout:"inline",initialValues:Object(m.a)(Object(m.a)({},e.parserOpts),{},{delimiter:"csv"===e.parserOpts.format?Pe(e.parserOpts.delimiter):void 0}),children:[Object(fe.jsx)(be.a.Item,{name:"format",label:"File Type",rules:[{required:!0}],children:Object(fe.jsx)(Te.a,{onChange:function(e){i.setFieldsValue({format:e})},children:K.map((function(e){return Object(fe.jsx)(Te.a.Option,{value:e,children:e},e)}))})}),t,Object(fe.jsx)(be.a.Item,{children:Object(fe.jsx)(ce.a,{type:"primary",htmlType:"submit",children:"Update"})})]})},De=Object(he.a)({table:{"& div.ant-table-container":{border:"1px solid #bbb",borderRadius:4,borderLeft:"1px solid #bbb !important"},"& div.ant-card-body":{paddingLeft:0,paddingRight:0},"& th":{fontWeight:600}}})((function(e){var t=e.table,n=e.classes;return Object(fe.jsx)(ye.a,{className:n.table,defaultSize:"small",bordered:!0,toolBarRender:!1,search:!1,pagination:{pageSize:5,pageSizeOptions:["5","10","20","50","100","200","500","1000"]},rowKey:"id",columns:t.header.map((function(e,t){return{dataIndex:["data",t],title:e}})),request:function(){var e=Object(u.a)(O.a.mark((function e(n,i,r){var a,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(n.current-1)*n.pageSize,o=a+n.pageSize,e.abrupt("return",{data:t.rows.slice(a,o).map((function(e,t){return{data:e,id:t+a}})),success:!0,total:t.rows.length});case 3:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}()})})),Be={upload:{"& > .ant-upload":{padding:"8px 0 !important"}},carouselDot:{zIndex:2e3,backgroundColor:"black",opacity:0}},Fe=Object(he.a)(Be)((function(e){var t=e.classes,n=e.projectId,i=e.setUploadTable,r=ie().projectStore;return Object(fe.jsxs)(ke.b,{direction:"vertical",style:{width:"100%"},children:[Object(fe.jsxs)(Ee.a.Dragger,{name:"file",multiple:!1,onDrop:function(e){var t=e.dataTransfer.files[0];r.uploadTable(n,t).then((function(e){if(Array.isArray(e))throw new Error("Error");i(e,t)}))},beforeUpload:function(){return!1},className:t.upload,children:[Object(fe.jsx)("p",{className:"ant-upload-drag-icon",children:Object(fe.jsx)(Ce.a,{})}),Object(fe.jsx)("p",{className:"ant-upload-hint",children:"Click or drag file to this area to upload"})]}),Object(fe.jsxs)(be.a,{layout:"inline",children:[Object(fe.jsx)(be.a.Item,{name:"url",label:"URL",rules:[{required:!0}],style:{width:"calc(100% - 94px)"},children:Object(fe.jsx)(je.a,{})}),Object(fe.jsx)(be.a.Item,{style:{margin:0},children:Object(fe.jsx)(ce.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})})),Re=Object(he.a)(Be)((function(e){var t,n=e.uploadingTable,i=(e.classes,e.projectId),r=e.destroy,a=e.onDone,o=ie().projectStore,s=Object(c.useState)(n.table.tables.map((function(){return!0}))),l=Object(d.a)(s,2),u=l[0],h=l[1];t=1==n.table.tables.length?Object(fe.jsx)(De,{table:n.table.tables[0]}):n.table.tables.map((function(e,t){return Object(fe.jsxs)(ke.b,{direction:"vertical",style:{width:"100%"},children:[Object(fe.jsxs)(oe.a.Text,{children:["Select:\xa0",Object(fe.jsx)(Ne.a,{checked:u[t],onChange:function(e){var n=u.slice();n[t]=e,h(n)}})]}),Object(fe.jsx)(De,{table:e}),","]},"table-".concat(t,"-wrap"))}));return Object(fe.jsxs)(ke.b,{direction:"vertical",style:{width:"100%"},children:[Object(fe.jsx)(_e,{parserOpts:n.table.parser_opts}),t,Object(fe.jsx)(ke.b,{children:Object(fe.jsx)(ce.a,{type:"primary",onClick:function(){var e=[];return u.forEach((function(t,n){t&&e.push(n)})),o.uploadTable(i,n.file,n.table.parser_opts,e).then((function(e){r(),a()}))},children:"Confirm"})})]})})),Ae=function(e){var t=e.project,n=e.destroy,i=e.onDone,r=(ie().projectStore,Object(c.useState)("phase1")),a=Object(d.a)(r,2),o=a[0],s=a[1],l=Object(c.useState)(void 0),u=Object(d.a)(l,2),h=u[0],b=u[1];return"phase1"===o?Object(fe.jsx)(Fe,{projectId:t.id,setUploadTable:function(e,t){b({table:e,file:t}),s("phase2")}}):"phase2"===o?Object(fe.jsx)(Re,{projectId:t.id,uploadingTable:h,destroy:n,onDone:i||function(){}}):Object(fe.jsx)(fe.Fragment,{})},ze=Object(he.a)({table:{"& div.ant-table-container":{border:"1px solid #bbb",borderRadius:4,borderLeft:"1px solid #bbb !important"},"& div.ant-card-body":{paddingLeft:0,paddingRight:0},"& th":{fontWeight:600}}})(Object(de.a)((function(e){var t=e.classes,n=ri.project.useURLParams().projectId,i=pe.a.useModal(),r=Object(d.a)(i,2),o=r[0],l=r[1],h=Object(c.useRef)(),b=ie(),p=b.projectStore,j=b.tableStore;Object(c.useEffect)((function(){p.fetchById(n)}),[p,n]);var f=p.get(n);if(void 0===f)return Object(fe.jsx)(a.e,{});if(null===f)return Object(fe.jsx)(a.h,{});var v=[{dataIndex:"id",title:"id"},{dataIndex:"name",title:"name",renderText:function(e,t){return Object(fe.jsx)(a.d,{path:ri.table,urlArgs:{tableId:t.id},queryArgs:{query:j.encodeWhereQuery({project:n})},children:t.name})}},{dataIndex:"description",title:"description"},{dataIndex:"id",title:"action",renderText:function(e,t){return Object(fe.jsx)(me.a,{title:"Are you sure to delete this table?",onConfirm:function(){var e;j.delete(t.id),null===(e=h.current)||void 0===e||e.reload()},okText:"Yes",cancelText:"No",children:Object(fe.jsx)(ce.a,{type:"primary",danger:!0,size:"small",children:"Delete"})})}}];return Object(fe.jsxs)(s.a.Fragment,{children:[Object(fe.jsxs)(oe.a.Title,{level:3,children:["Project ",we.a.upperFirst(f.name),"\xa0",Object(fe.jsx)("a",{style:{fontSize:"0.8em",fontWeight:400},onClick:function(){return function(e,t){var n=Object(fe.jsx)(Se,{project:e});pe.a.info({title:Object(fe.jsxs)("span",{style:{marginBottom:16,display:"inline-block"},children:["Update Project ",e.name]}),content:n,bodyStyle:{margin:-8},okButtonProps:{style:{display:"none"}},maskClosable:!0,mask:!0,zIndex:t,width:"calc(100% - 128px)",style:{top:64}})}(f)},children:Object(fe.jsx)(xe.a,{})})]}),Object(fe.jsxs)(oe.a.Text,{children:[Object(fe.jsx)("b",{children:"Description:"})," ",Object(fe.jsx)(oe.a.Text,{type:"secondary",children:f.description})]}),Object(fe.jsx)(ye.a,{actionRef:h,className:t.table,defaultSize:"small",bordered:!0,request:function(){var e=Object(u.a)(O.a.mark((function e(t,i,r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.fetch({limit:t.pageSize,offset:(t.current-1)*t.pageSize,conditions:{project:n}});case 2:return a=e.sent,e.abrupt("return",{data:a.records.map(Me),success:!0,total:a.total});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),options:{search:!0},headerTitle:Object(fe.jsx)(oe.a.Title,{level:4,children:"Tables"}),toolBarRender:function(){return[Object(fe.jsx)(ce.a,{type:"primary",onClick:function(){return function(e,t){var n=(void 0===(null===t||void 0===t?void 0:t.modal)?pe.a:t.modal).info({title:Object(fe.jsx)("span",{style:{marginBottom:16,display:"inline-block"},children:"Upload Tables"}),bodyStyle:{margin:-8},okButtonProps:{style:{display:"none"}},maskClosable:!0,mask:!0,zIndex:null===t||void 0===t?void 0:t.zIndex,width:"calc(100% - 128px)",style:{top:64}});n.update({content:Object(fe.jsx)(Ae,{project:e,destroy:n.destroy,onDone:null===t||void 0===t?void 0:t.onDone})})}(f,{modal:o,onDone:function(){var e;null===(e=h.current)||void 0===e||e.reload()}})},children:"Upload"},"upload")]},search:!1,pagination:{pageSize:500,pageSizeOptions:["10","20","50","100","200","500","1000"]},rowKey:"id",columns:v}),l]})})));function Me(e){return{id:e.id,name:e.name,description:e.description}}var Ue=n(855),He=function(){function e(){Object(b.a)(this,e),this.timer=0}return Object(p.a)(e,[{key:"exec",value:function(e){var t=this;this.timer+=1;var n=this.timer;return e().then((function(e){if(!(n<t.timer))return e}))}}]),e}(),Ve={selection:{width:"100%"}},qe=Object(he.a)(Ve)(Object(de.a)((function(e){return Ye("propertyStore",e)}))),We=Object(he.a)(Ve)(Object(de.a)((function(e){return Ye("classStore",e)}))),Ke=Object(he.a)(Ve)(Object(de.a)((function(e){return Ye("entityStore",e)})));function Ye(e,t){var n=ie()[e],i=new He;Object(c.useEffect)((function(){void 0!==t.value&&(Array.isArray(t.value)?n.refetch?n.fetchByIds(t.value.filter((function(e){return!n.records.has(e)}))):n.fetchByIds(t.value):void 0===n.get(t.value)&&n.fetchById(t.value))}),[t.value]);var r=Object(c.useMemo)((function(){var e,t=[],i=Object(h.a)(n.iter());try{for(i.s();!(e=i.n()).done;){var r=e.value;t.push({value:r.id,label:r.readableLabel})}}catch(a){i.e(a)}finally{i.f()}return t}),[n.records.size]);return Object(fe.jsx)(Te.a,{mode:t.mode,allowClear:!0,options:r,optionFilterProp:"label",className:t.classes.selection,showSearch:!0,onSearch:function(e){""!==e&&i.exec((function(){return n.fetchById(e).then((function(){return 1}))}))},value:t.value,onSelect:t.onSelect,onDeselect:t.onDeselect})}var Je=Object(he.a)({})(Object(de.a)((function(e){e.classes;var t=ie().uiSettings;return Object(fe.jsxs)(Ue.b,{title:"Entity Settings",size:"small",column:1,children:[Object(fe.jsx)(Ue.b.Item,{label:"Properties (full view)",children:Object(fe.jsx)(qe,{mode:"multiple",value:t.entity.showedPropsInFullView,onSelect:t.entity.addShowedPropsInFullView,onDeselect:t.entity.removeShowedPropsInFullView})}),Object(fe.jsx)(Ue.b.Item,{label:"Properties (popover view)",children:Object(fe.jsx)(qe,{mode:"multiple",value:t.entity.showedPropsInPopoverView,onSelect:t.entity.addShowedPropsInPopoverView,onDeselect:t.entity.removeShowedPropsInPopoverView})})]})}))),Ge=n(860),Qe=n(861),$e=n(509),Xe=n(862),Ze=n(863),et=n(179),tt=n(361),nt=n(157),it=n(226),rt=n(104),at=n(504),ot=n(147),ct=n(197),st={selection:{width:"100%"},class_node:{backgroundColor:ue.f[2],"&:hover":{backgroundColor:ue.f[8],color:"white"}},literal_node:{backgroundColor:ue.l[2],"&:hover":{backgroundColor:ue.l[8],color:"white"}},data_node:{backgroundColor:ue.e[2],"&:hover":{backgroundColor:ue.e[8],color:"white"}}},lt=Object(he.a)(st)(Object(de.a)((function(e){var t=e.sm,n=e.value,i=e.onDeselect,r=e.onSelect,a=e.classes,o=ie().classStore,s=new He,l=Object(c.useMemo)((function(){var e,n=[],i=Object(h.a)(o.iter());try{for(i.s();!(e=i.n()).done;){var r=e.value;n.push({type:"class",id:r.id,value:"class:".concat(r.id),label:t.graph.uriCount.nextLabel(r.uri,r.readableLabel)})}}catch(d){i.e(d)}finally{i.f()}var c,s=Object(h.a)(t.graph.nodes);try{for(s.s();!(c=s.n()).done;){var l=c.value;n.push({type:l.nodetype,id:l.id,value:"".concat(l.nodetype,":").concat(l.id),label:t.graph.uriCount.label(l),className:a[l.nodetype]})}}catch(d){s.e(d)}finally{s.f()}return n}),[o.records.size]);return Object(fe.jsx)(Te.a,{allowClear:!0,options:l,optionFilterProp:"label",className:a.selection,showSearch:!0,onSearch:function(e){""!==e&&s.exec((function(){return o.fetchById(e).then((function(){return 1}))}))},value:void 0===n?void 0:"".concat(n.type,":").concat(n.id),onSelect:function(e,t){r({type:t.type,id:t.id})},onDeselect:function(e,t){i({type:t.type,id:t.id})}})}))),dt={table:{width:"100%",textAlign:"left",borderSpacing:0,borderRadius:"2px 2px 0 0","& tr":{verticalAlign:"middle"},"& th, td":{padding:"0 4px"}},selection:{width:"100%"}},ut=(Object(he.a)(dt)(Object(de.a)((function(e){var t=e.sm,n=e.classes,i=e.value,r=e.onSelect,a=e.onDeselect,o=Object(c.useMemo)((function(){return t.graph.nodes.map((function(e){return{value:e.id,label:e.label}}))}),[t]);return Object(fe.jsx)(Te.a,{showSearch:!0,allowClear:!0,options:o,optionFilterProp:"label",className:n.selection,value:i,onSelect:r,onDeselect:a})}))),Object(he.a)(dt)(Object(de.a)((function(e){var t,n,i=e.sm,r=e.edge,a=(e.classes,ie()),o=a.classStore,s=a.propertyStore,l=Object(c.useState)(void 0!==r?{type:i.graph.node(r.source).nodetype,id:r.source}:void 0),u=Object(d.a)(l,2),h=u[0],b=u[1],p=Object(c.useState)(void 0!==r?{type:i.graph.node(r.target).nodetype,id:r.target}:void 0),j=Object(d.a)(p,2),f=j[0],v=j[1],g=Object(c.useState)(null===r||void 0===r?void 0:r.uri),O=Object(d.a)(g,2),x=O[0],y=O[1],m=Object(c.useState)(!1),I=Object(d.a)(m,2),w=I[0],k=I[1],S=Object(c.useMemo)((function(){return void 0!==h&&"class"!==h.type&&(void 0!==f&&"class"!==f.type&&(i.graph.hasEdge(h.id,f.id)&&(void 0===r||h.id!==r.source||f.id!==r.target)))}),[i.graph.version,null===h||void 0===h?void 0:h.id,null===f||void 0===f?void 0:f.id]);Object(c.useEffect)((function(){void 0!==r&&void 0===s.getPropertyByURI(r.uri)&&s.fetchOne({conditions:{uri:r.uri}})}),[s,r,x]);return Object(fe.jsxs)(be.a,{labelCol:{span:6},wrapperCol:{span:18},labelWrap:!0,layout:"horizontal",children:[Object(fe.jsx)(be.a.Item,{label:Object(fe.jsx)(oe.a.Text,{copyable:void 0!==h?{text:h.id}:void 0,children:"Source"}),validateStatus:S?"error":void 0,help:S?"Cannot have more than one edge between two nodes":void 0,children:Object(fe.jsx)(lt,{sm:i,value:h,onSelect:b,onDeselect:function(){return b(void 0)}})}),Object(fe.jsx)(be.a.Item,{label:Object(fe.jsx)(oe.a.Text,{copyable:void 0!==f?{text:f.id}:void 0,children:"Target"}),children:Object(fe.jsx)(lt,{sm:i,value:f,onSelect:v,onDeselect:function(){return v(void 0)}})}),Object(fe.jsx)(be.a.Item,{label:Object(fe.jsx)(oe.a.Text,{copyable:void 0!==x?{text:null===(t=s.getPropertyByURI(x))||void 0===t?void 0:t.id}:void 0,children:"Predicate"}),children:Object(fe.jsx)(qe,{value:void 0!==x?null===(n=s.getPropertyByURI(x))||void 0===n?void 0:n.id:void 0,onSelect:function(e){var t;return y(null===(t=s.get(e))||void 0===t?void 0:t.uri)},onDeselect:function(e){return y(void 0)}})}),Object(fe.jsx)(be.a.Item,{label:"Approximation",children:Object(fe.jsx)(Ne.a,{checked:w,onChange:function(e){return k(e)}})}),Object(fe.jsx)(be.a.Item,{label:"\xa0",colon:!1,children:Object(fe.jsxs)(ke.b,{children:[Object(fe.jsx)(ce.a,{type:"primary",onClick:function(){if(void 0!==x&&void 0!==h&&void 0!==f&&!S){var e,t,n=s.getPropertyByURI(x);if("class"===h.type){var a=o.get(h.id);e=i.graph.nextNodeId(),i.graph.addClassNode({id:e,uri:a.uri,label:a.readableLabel,approximation:!1,nodetype:"class_node"})}else e=h.id;if("class"===f.type){var c=o.get(f.id);t=i.graph.nextNodeId(),i.graph.addClassNode({id:t,uri:c.uri,label:c.readableLabel,approximation:!1,nodetype:"class_node"})}else t=f.id;var l={source:e,target:t,uri:n.uri,approximation:w,label:n.readableLabel};void 0!==r?r.source===e&&r.target===t?i.graph.updateEdge(r.source,r.target,l):(i.graph.removeEdge(r.source,r.target),i.graph.addEdge(l)):i.graph.addEdge(l),pe.a.destroyAll()}},disabled:void 0===h||void 0===f||void 0===x||!(void 0===r||(null===h||void 0===h?void 0:h.id)!==r.source||(null===f||void 0===f?void 0:f.id)!==r.target||x!==r.uri||w!==r.approximation)||S,children:"Save"}),void 0!==r?Object(fe.jsx)(ce.a,{type:"primary",danger:!0,onClick:function(){void 0!==r&&(i.graph.removeEdge(r.source,r.target),pe.a.destroyAll())},children:"delete"}):null]})})]})})))),ht=n(184),bt=Object(de.a)((function(e){var t,n,i,r,a,o=ie().classStore,s=Object(c.useState)(null===(t=e.node)||void 0===t?void 0:t.uri),l=Object(d.a)(s,2),u=l[0],h=l[1],b=Object(c.useState)((null===(n=e.node)||void 0===n?void 0:n.approximation)||!1),p=Object(d.a)(b,2),j=p[0],f=p[1];Object(c.useEffect)((function(){void 0!==e.node&&o.fetchIfMissingByURI(e.node.uri)}),[null===(i=e.node)||void 0===i?void 0:i.uri]);return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(be.a.Item,{label:Object(fe.jsx)(oe.a.Text,{copyable:void 0!==u?{text:null===(r=o.getClassByURI(u))||void 0===r?void 0:r.id}:void 0,children:"Class"}),children:Object(fe.jsx)(We,{value:void 0!==u?null===(a=o.getClassByURI(u))||void 0===a?void 0:a.id:void 0,onSelect:function(e){var t;return h(null===(t=o.get(e))||void 0===t?void 0:t.uri)},onDeselect:function(){return h(void 0)}})}),Object(fe.jsx)(be.a.Item,{label:"Approximation",children:Object(fe.jsx)(Ne.a,{checked:j,onChange:function(e){return f(e)}})}),Object(fe.jsx)(be.a.Item,{label:"\xa0",colon:!1,children:Object(fe.jsxs)(ke.b,{children:[Object(fe.jsx)(ce.a,{type:"primary",onClick:function(){void 0!==u&&(void 0===e.node?e.sm.graph.addClassNode({id:e.sm.graph.nextNodeId(),uri:u,label:o.getClassByURI(u).readableLabel,nodetype:"class_node",approximation:j}):e.sm.graph.updateClassNode(e.node.id,{uri:u,label:o.getClassByURI(u).readableLabel,approximation:j}),e.onDone())},disabled:void 0===u||!(void 0===e.node||e.node.uri!==u||e.node.approximation!==j),children:"Save"}),void 0!==e.node?Object(fe.jsx)(ce.a,{type:"primary",danger:!0,onClick:function(){e.sm.graph.removeNode(e.node.id),e.onDone()},children:"delete"}):null]})})]})})),pt=Object(de.a)((function(e){var t,n,i=ie().entityStore,r=Object(c.useState)("entity-id"===(null===(t=e.node)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.type)?e.node.value.id:void 0),a=Object(d.a)(r,2),o=a[0],s=a[1],l=Object(c.useState)(void 0!==e.node&&"literal_node"===e.node.nodetype&&e.node.isInContext),u=Object(d.a)(l,2),h=u[0],b=u[1],p=Object(c.useMemo)((function(){var t;return void 0!==o&&(void 0===e.node&&void 0!==e.sm.graph.nodeByEntityId(o)||void 0!==e.node&&(null===(t=e.sm.graph.nodeByEntityId(o))||void 0===t?void 0:t.id)!==e.node.id)}),[e.sm.graph.version,o]);if(void 0!==e.node&&"string"===e.node.value.type)return Object(fe.jsx)("div",{children:"Not Implemented Yet"});return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(be.a.Item,{label:Object(fe.jsx)(oe.a.Text,{copyable:void 0!==o?{text:o}:void 0,children:"Entity"}),validateStatus:p?"error":void 0,help:p?"Entity's already in the graph":void 0,children:Object(fe.jsx)(Ke,{value:o,onSelect:s,onDeselect:function(){return s(void 0)}})}),Object(fe.jsx)(be.a.Item,{label:"Is In Context?",children:Object(fe.jsx)(Ne.a,{checked:h,onChange:function(e){return b(e)}})}),Object(fe.jsx)(be.a.Item,{label:"\xa0",colon:!1,children:Object(fe.jsxs)(ke.b,{children:[Object(fe.jsx)(ce.a,{type:"primary",onClick:function(){if(void 0!==o&&!p){var t=i.get(o);void 0===e.node?e.sm.graph.addLiteralNode({id:e.sm.graph.nextNodeId(),value:{type:"entity-id",id:o,uri:t.uri},label:t.readableLabel,nodetype:"literal_node",isInContext:h}):e.sm.graph.updateLiteralNode(e.node.id,{value:{type:"entity-id",id:o,uri:t.uri},label:t.readableLabel,nodetype:"literal_node",isInContext:h}),e.onDone()}},disabled:void 0===o||p||!(void 0===e.node||e.node.isInContext!==h||"entity-id"===e.node.value.type&&e.node.value.id!==o),children:"Save"}),void 0!==e.node?Object(fe.jsx)(ce.a,{type:"primary",danger:!0,onClick:function(){e.sm.graph.removeNode(e.node.id),e.onDone()},children:"delete"}):null]})})]})})),jt=Object(de.a)((function(e){var t,n,i=e.sm,r=e.node,a=e.inedge,o=e.onDone,s=ie(),l=s.classStore,u=s.propertyStore,h=Object(c.useState)(void 0!==a?{type:i.graph.node(a.source).nodetype,id:a.source}:void 0),b=Object(d.a)(h,2),p=b[0],j=b[1],f=Object(c.useState)(null===a||void 0===a?void 0:a.uri),v=Object(d.a)(f,2),g=v[0],O=v[1],x=Object(c.useState)(!1),y=Object(d.a)(x,2),m=y[0],I=y[1];return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(be.a.Item,{label:Object(fe.jsx)(oe.a.Text,{copyable:void 0!==p?{text:p.id}:void 0,children:"Source"}),children:Object(fe.jsx)(lt,{sm:i,value:p,onSelect:j,onDeselect:function(){return j(void 0)}})}),Object(fe.jsx)(be.a.Item,{label:Object(fe.jsx)(oe.a.Text,{copyable:void 0!==g?{text:null===(t=u.getPropertyByURI(g))||void 0===t?void 0:t.id}:void 0,children:"Predicate"}),children:Object(fe.jsx)(qe,{value:void 0!==g?null===(n=u.getPropertyByURI(g))||void 0===n?void 0:n.id:void 0,onSelect:function(e){var t;return O(null===(t=u.get(e))||void 0===t?void 0:t.uri)},onDeselect:function(e){return O(void 0)}})}),Object(fe.jsx)(be.a.Item,{label:"Target",children:Object(fe.jsxs)(oe.a.Text,{children:[r.label," (",r.columnIndex,")"]})}),Object(fe.jsx)(be.a.Item,{label:"Approximation",children:Object(fe.jsx)(Ne.a,{checked:m,onChange:function(e){return I(e)}})}),Object(fe.jsx)(be.a.Item,{label:"\xa0",colon:!1,children:Object(fe.jsxs)(ke.b,{children:[Object(fe.jsx)(ce.a,{type:"primary",onClick:function(){if(void 0!==p&&void 0!==g){var e,t=u.getPropertyByURI(g);if("class"===p.type){var n=l.get(p.id);e=i.graph.nextNodeId(),i.graph.addClassNode({id:e,uri:n.uri,label:n.readableLabel,approximation:!1,nodetype:"class_node"})}else e=p.id;var c={source:e,target:r.id,uri:t.uri,approximation:m,label:t.readableLabel};void 0!==a?a.source===e?i.graph.updateEdge(a.source,a.target,c):(i.graph.removeEdge(a.source,a.target),i.graph.addEdge(c)):i.graph.addEdge(c),o()}},disabled:void 0===p||void 0===g||!((null===p||void 0===p?void 0:p.id)!==(null===a||void 0===a?void 0:a.source)||g!==(null===a||void 0===a?void 0:a.uri)||m!==(null===a||void 0===a?void 0:a.approximation)),children:"Save"}),void 0!==a?Object(fe.jsx)(ce.a,{type:"primary",danger:!0,onClick:function(){void 0!==a&&(i.graph.removeEdge(a.source,a.target),o())},children:"delete"}):null]})})]})})),ft=Object(he.a)({})(Object(de.a)((function(e){var t=e.sm,n=e.node,i=(e.classes,Object(c.useState)((null===n||void 0===n?void 0:n.nodetype)||"class_node")),r=Object(d.a)(i,2),a=r[0],o=r[1],s=function(){return pe.a.destroyAll()};return void 0!==n&&"data_node"===n.nodetype&&t.graph.incomingEdges(n.id).length>1?Object(fe.jsx)("p",{children:"This form can't be used for data node that has more than one incoming edge. Please click on individual edge and edit it there"}):Object(fe.jsxs)(be.a,{labelCol:{span:6},wrapperCol:{span:18},labelWrap:!0,layout:"horizontal",children:[void 0===n?Object(fe.jsx)(be.a.Item,{label:"Node Type",children:Object(fe.jsxs)(ht.a.Group,{value:a,onChange:function(e){return o(e.target.value)},buttonStyle:"solid",children:[Object(fe.jsx)(ht.a.Button,{value:"class_node",children:"Class Node"}),Object(fe.jsx)(ht.a.Button,{value:"literal_node",children:"Literal Node"})]})}):null,"class_node"===a?Object(fe.jsx)(bt,{sm:t,node:"class_node"===(null===n||void 0===n?void 0:n.nodetype)?n:void 0,onDone:s}):"literal_node"===a?Object(fe.jsx)(pt,{sm:t,node:"literal_node"===(null===n||void 0===n?void 0:n.nodetype)?n:void 0,onDone:s}):Object(fe.jsx)(jt,{sm:t,node:n,inedge:t.graph.incomingEdges(n.id)[0],onDone:s})]})})));function vt(e,t){var n,i;switch(e.type){case"edge":i=Object(fe.jsx)(ut,Object(m.a)({},e)),n=void 0===e.edge?"Add Edge":"Update Edge";break;case"node":i=Object(fe.jsx)(ft,Object(m.a)({},e)),n=void 0===e.node?"Add Node":"Update Node"}pe.a.info({title:Object(fe.jsx)("span",{style:{marginBottom:16,display:"inline-block"},children:n}),content:i,bodyStyle:{margin:-8},okButtonProps:{style:{display:"none"}},maskClosable:!0,mask:!0,zIndex:t,width:"calc(100% - 128px)",style:{top:64}})}var gt=Object(de.a)((function(e){var t,n=e.tableRef,i=e.graphRef,r=e.table,a=e.semanticmodel,o=Object(c.useState)(!1),s=Object(d.a)(o,2),l=s[0],u=s[1],h=ie(),b=h.semanticModelStore,p=h.assistantService,j=h.uiSettings;Object(ct.a)("c",null===i.current?function(){}:i.current.recenter,[i.current,Ot(a.sms[a.index])]);var f=a.sms.map(Ot).join("---");Object(ct.a)("shift+n",(function(){a.index<a.sms.length-1&&a.setIndex(a.index+1)}),[r.id,a.index,f]),Object(ct.a)("shift+b",(function(){a.index>0&&a.setIndex(a.index-1)}),[r.id,a.index,f]);var v=a.sms[a.index],g={saveModel:function(){_.isDraft(v)?b.create(v):v.graph.stale&&b.update(v)},addModel:function(){var e=b.getNewCreateDraftId(r),t=a.sms.length,n=D.getDefaultDraftSemanticModel(e,b.getNewSemanticModelName(r),r);n.graph=v.graph.clone(),n.graph.id=e,b.setCreateDraft(n),a.setIndex(t)},deleteModel:function(){_.isDraft(v)?b.deleteCreateDraft(v.draftID):b.delete(v.id),a.setIndex(0),u(!1)},exportModel:function(){ri.tableExportModel.path({tableId:r.id},{attachment:!1}).mouseClickNavigationHandler(void 0,!0)},exportData:function(){ri.tableExportData.path({tableId:r.id},{attachment:!1}).mouseClickNavigationHandler(void 0,!0)},openAddNodeForm:function(){vt({type:"node",sm:v})},openAddEdgeForm:function(){return vt({type:"edge",sm:v})},predict:function(){p.predict(r).then((function(){var e;null===(e=n.current)||void 0===e||e.reload(),j.table.enableEntityLinkingEditor()}))}},O=Object(fe.jsxs)(rt.a,{onClick:function(e){e.key.startsWith("manual-close")||u(!1)},children:[Object(fe.jsxs)(rt.a.ItemGroup,{title:"Semantic Descriptions",children:[a.sms.length>1?Object(fe.jsx)(rt.a.SubMenu,{title:"List models",icon:Object(fe.jsx)(it.a,{icon:tt.a}),children:a.sms.map((function(e,t){return Object(fe.jsxs)(rt.a.Item,{onClick:function(){return a.setIndex(t)},style:{fontWeight:t===a.index?"bold":void 0},children:[_.isDraft(e)?Object(fe.jsx)(at.a,{color:"orange",children:"draft"}):e.graph.stale?Object(fe.jsx)(at.a,{color:"orange",children:"unsaved"}):null,e.name]},"sm-".concat(e.name))}))},"list-model"):null,Object(fe.jsx)(rt.a.Item,{disabled:!_.isDraft(v)&&!v.graph.stale,icon:Object(fe.jsx)(Ge.a,{}),onClick:g.saveModel,children:"Save current model"},"save-model"),Object(fe.jsx)(rt.a.Item,{onClick:g.addModel,icon:Object(fe.jsx)(Qe.a,{}),children:"Add new model"},"add-model"),Object(fe.jsx)(rt.a.Item,{danger:!0,icon:Object(fe.jsx)($e.a,{}),children:Object(fe.jsx)(me.a,{title:"Are you sure to delete this semantic description?",onConfirm:g.deleteModel,onCancel:function(){return u(!1)},okText:"Yes",cancelText:"No",children:"Delete current model"})},"manual-close-0"),Object(fe.jsx)(rt.a.Item,{disabled:!0,icon:Object(fe.jsx)(Xe.a,{}),children:"Import models"},"import-model"),Object(fe.jsx)(rt.a.Item,{onClick:g.exportModel,icon:Object(fe.jsx)(Ze.a,{}),children:"Export models"},"export-model")]},"group-sm"),Object(fe.jsx)(rt.a.Divider,{}),Object(fe.jsx)(rt.a.Item,{icon:Object(fe.jsx)(it.a,{icon:tt.b}),onClick:j.table.toggleEntityLinkingEditor,children:"Toggle Entity Linking Editor"},"enable-el-editor"),Object(fe.jsx)(rt.a.Item,{icon:Object(fe.jsx)(it.a,{icon:nt.c}),onClick:g.exportData,children:"Export data"},"export-data")]});return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)(ke.b,{style:{float:"right"},children:[void 0===i.current?null:Object(fe.jsxs)(at.a,{color:_.isDraft(v)||v.graph.stale?"orange":"green",style:{marginRight:0,cursor:"pointer"},onClick:g.saveModel,children:["Status:"," ",_.isDraft(v)?"Draft":v.graph.stale?"Changed":"Saved",a.sms.length>1?" (".concat(v.name,")"):""]}),j.table.showEntityLinkingEditor?Object(fe.jsx)(at.a,{color:"geekblue",style:{marginRight:0,cursor:"pointer"},onClick:j.table.toggleEntityLinkingEditor,children:"Editing Entity Linking"}):null]},"space-1"),Object(fe.jsxs)(ke.b,{children:[Object(fe.jsx)(ce.a,{size:"small",onClick:null===(t=i.current)||void 0===t?void 0:t.recenter,children:"Center graph (C)"}),Object(fe.jsx)(ce.a,{size:"small",onClick:g.openAddNodeForm,children:"Add node"}),Object(fe.jsx)(ce.a,{size:"small",onClick:g.openAddEdgeForm,children:"Add edge"}),Object(fe.jsx)(ce.a,{size:"small",onClick:g.predict,children:"Predict"}),Object(fe.jsx)(ot.a,{overlay:O,onVisibleChange:u,visible:l,children:Object(fe.jsxs)(ce.a,{size:"small",children:["More ",Object(fe.jsx)(et.a,{})]})})]},"space-2")]})}));function Ot(e){return _.isDraft(e)?e.draftID:e.id}var xt=n(858),yt=n(864),mt=n(495),It=n.n(mt),wt=n(496),kt=n.n(wt),St=n(58),Ct=n(12),Et=n(183);function Nt(e,t,n,i){var r=i.xoffset,a=i.yoffset,o=i.cfg,c=i.stroke;return r=void 0===r?0:r,a=void 0===a?0:a,void 0!==c&&n.map((function(n){var i=n.text,s=n.x,l=n.y;e.addShape("text",{attrs:Object(m.a)(Object(m.a)({text:i,x:s+r,y:l+a,fontFamily:t.fontFamily},o),{},{fill:c.color,stroke:c.color,lineWidth:c.width}),name:"bg-text",draggable:!0})})),n.map((function(n){var i=n.text,c=n.x,s=n.y;return e.addShape("text",{attrs:Object(m.a)({text:i,fill:"black",x:c+r,y:s+a,fontFamily:t.fontFamily},o),name:"text",draggable:!0})}))}function Tt(e){var t=e.getApproximateWidth(4);return Et.a.registerNode("circle-wrap",{draw:function(n,i){return function(n,i){n.style.padding;var r,a,o=(null===(r=n.labelCfg)||void 0===r?void 0:r.offset)||0,c=e.wrapText(n.label,t,"center"),s=c.units,l=c.width,d=i.addShape("circle",{attrs:Object(m.a)({r:10},n.style),name:"circle"});return Nt(i,e,s,{xoffset:-l/2,yoffset:10+o,cfg:null===n||void 0===n||null===(a=n.labelCfg)||void 0===a?void 0:a.style,stroke:{color:"white",width:4}}),d}(n,i)}},"single-node"),e}var Lt=n(493),Pt=n.n(Lt),_t=n(494),Dt=n.n(_t),Bt=function(e,t){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=i.join(":");return void 0===t[a]&&(t[a]=e.apply(void 0,i)),t[a]}},Ft=Object(p.a)((function e(t){var n=this;Object(b.a)(this,e),this.paragraph=void 0,this.getDesiredLineLength=void 0,this.cacheLineLengths={},this.cacheLineDemerits={},this.cacheParagraphDemerits={},this.cacheParagraphBreakpoints={},this.optimize=function(){return n.optimizeParagraph(0,n.paragraph.length-1,0)},this.optimizeParagraph=Bt((function(e,t,i){var r=n.computeLineAdjustment(e,t,i);if(void 0!==r&&r>=0)return{breakpoints:[],demerits:n.computeLineDemerits(e,t,i)};for(var a={caret:-1,demerits:1/0,breakpoints:[]},o=t-1;o>e;o--)if("box"!==n.paragraph[o].type){var c=n.optimizeParagraph(e,o,i),s=n.optimizeParagraph(o+1,t,i+(c.breakpoints.length>0?c.breakpoints.length+1:0));c.demerits+s.demerits<a.demerits&&(a.caret=o,a.demerits=c.demerits+s.demerits,a.breakpoints=c.breakpoints.slice(),a.breakpoints.push(o),a.breakpoints=a.breakpoints.concat(s.breakpoints))}return{breakpoints:a.breakpoints,demerits:a.demerits}}),this.cacheParagraphBreakpoints),this.computeLineLength=Bt((function(e,t){for(var i=0,r=e;r<t;r++)"penalty"!==n.paragraph[r].type&&(i+=n.paragraph[r].width);return"penalty"===n.paragraph[t].type&&(i+=n.paragraph[t].width),i}),this.cacheLineLengths),this.computeLineElastic=function(e,t){for(var i=0,r=0,a=e;a<=t;a++){var o=n.paragraph[a];"glue"===o.type&&(i+=o.stretch,r+=o.shrink)}return{stretchability:i,shrinkability:r}},this.computeLineAdjustment=function(e,t,i){var r=n.computeLineLength(e,t),a=n.getDesiredLineLength(i);if(r===a)return 0;var o=n.computeLineElastic(e,t);if(r<a){if(o.stretchability<0)return;return 0===o.stretchability?(a-r)/.1:(a-r)/o.stretchability}return o.shrinkability<=0?void 0:(a-r)/o.shrinkability},this.computeLineBadness=function(e,t,i){var r=n.computeLineAdjustment(e,t,i);return void 0===r||r<-1?-1/0:Math.pow(r,3)},this.computeLineDemerits=Bt((function(e,t,i){var r=n.paragraph[t],a="penalty"===r.type?r.cost:0,o=n.computeLineBadness(e,t,i);return a>=0?Math.pow(1+o+a,2)+0:a===-1/0?Math.pow(1+o,2)+0:Math.pow(1+o,2)-Math.pow(a,2)+0}),this.cacheLineDemerits),this.computeParagraphDemerits=function(e,t,i,r){for(var a=e,o=0,c=0;c<i.length;c++)o+=n.computeLineDemerits(a,i[c],r+c),a=i[c]+1;return o+=n.computeLineDemerits(a,t,r+(i.length>0?i.length+1:0))},this.paragraph=t.units.map((function(e){return(e=Object.assign({},e)).width=e.width/16,"glue"===e.type&&(e.stretch=e.stretch/16,e.shrink=e.shrink/16),e})),this.getDesiredLineLength=function(e){return t.getLineLength(e)/16}})),Rt=function(){function e(t,n){var i=this;Object(b.a)(this,e),this.spaceWidth=void 0,this.units=void 0,this.lineLengths=void 0,this.getLineLength=void 0,this.groupByLine=function(e){var t=[],n=0;(e=e.slice()).push(i.units.length-1);var r,a=Object(h.a)(e);try{for(a.s();!(r=a.n()).done;){var o,c=r.value,s=i.units.slice(n,c),l=[],d=Object(h.a)(s);try{for(d.s();!(o=d.n()).done;){var u=o.value;"penalty"!==u.type&&("box"===u.type&&l.length>0&&"box"===l[l.length-1].type?(l[l.length-1].text+=u.text,l[l.length-1].width+=u.width):l.push(Object.assign({},u)))}}catch(b){d.e(b)}finally{d.f()}"penalty"===i.units[c].type&&i.units[c].text.length>0&&l.push(i.units[c]),n=c+1,t.push(l)}}catch(b){a.e(b)}finally{a.f()}return t},this.layout=function(e,t){var n=t.lineHeight,r=t.cssLineHeight,a=t.fontSize,o=t.align,c=(t.verticalAlign,t.autoLength),s=[],l=e.map((function(e){return e.reduce((function(e,t){return e+t.width}),0)})),d=e.map((function(e,t){return i.getLineLength(t)}));if(c)for(var u=Math.max.apply(Math,Object(Ct.a)(l)),b=0;b<d.length;b++)d[b]>u&&(d[b]=u);for(var p=0;p<e.length;p++){var j=e[p],f=l[p],v=d[p],g=j.filter((function(e){return"glue"===e.type})).length,O=f<v&&"justify"!==o?i.spaceWidth:Math.abs(v-f)/g+i.spaceWidth,x=(p+1)*n-a*(r-1)/2,y=0;if("center"===o?y+=(v-f)/2:"right"===o&&(y+=v-f),O===i.spaceWidth){var m=Object.assign({x:y,y:x,renderedWidth:f,lineNumber:p},j[0]);m.text=j.map((function(e){return e.text})).join(""),s.push(m)}else{var I,w=Object(h.a)(j);try{for(w.s();!(I=w.n()).done;){var k=I.value,S="glue"===k.type?O:k.width,C=Object.assign({x:y,y:x,renderedWidth:S,lineNumber:p},k);y+=S,s.push(C)}}catch(E){w.e(E)}finally{w.f()}}}return{units:s,lineLengths:l}},this.units=t,this.lineLengths=n,Array.isArray(n)?this.getLineLength=function(e){return e<n.length?n[e]:n[n.length-1]}:this.getLineLength=function(e){return n},this.spaceWidth=0;var r,a=Object(h.a)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;if("glue"===o.type){this.spaceWidth=o.width;break}}}catch(c){a.e(c)}finally{a.f()}}return Object(p.a)(e,null,[{key:"getUnitsFromText",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,a=[],o=e.split(/(\s+)/).filter((function(e){return e.length>0}));if(void 0!==i&&i.length>0){var c=new RegExp(".*?[".concat(i.join(""),"]|.+"),"g");o=o.flatMap((function(e){return e.match(c)}))}var s=t(" "),l=t("-"),d=function(e){return/\s/.test(e.charAt(0))},u=s/2,h=s/3;return o.forEach((function(e){if(d(e)){var i={type:"glue",width:s,shrink:h,stretch:u,text:e};a.push(i)}else if(a.length>0&&"box"===a[a.length-1].type&&a.push({type:"penalty",width:0,cost:1,flagged:!1,text:""}),n){var o=n(e);o.forEach((function(e,n){var i={type:"box",width:t(e),text:e};if(a.push(i),n<o.length-1){var c={type:"penalty",text:"-",width:l,cost:r,flagged:!0};a.push(c)}}))}else{var c={type:"box",width:t(e),text:e};a.push(c)}})),a.push({type:"glue",width:0,stretch:1e4,shrink:0,text:""}),a}}]),e}(),At=Object(p.a)((function e(t,n){var i=this;Object(b.a)(this,e),this.measureCtx=void 0,this.circleLayout=void 0,this.hypher=void 0,this.font=void 0,this.fontFamily=void 0,this.fontSize=void 0,this.cssLineHeight=1.428,this.lineHeight=void 0,this.spaceWidth=void 0,this.separable=["{","}",":",",","'",'"',".","/"],this.wrapText=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"justify",r=new Rt(Rt.getUnitsFromText(e,i.measureText,i.hyphenate,i.separable),t),a=new Ft(r).optimize().breakpoints,o=r.layout(r.groupByLine(a),{align:n,cssLineHeight:i.cssLineHeight,fontSize:i.fontSize,lineHeight:i.lineHeight,verticalAlign:"middle",autoLength:!0}),c=o.units,s=o.lineLengths,l=Math.max.apply(Math,Object(Ct.a)(s)),d=(a.length+1)*i.lineHeight;return{units:c,width:l,height:d}},this.wrapTextCircle=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=i.circleLayout.findRadius(i.measureText(e),n,r)+12,o=i.circleLayout.getLayout(a),c=o.lines,s=i.wrapText(e,c.slice(0,3),"center"),l=s.units,d=s.width,u=Math.max.apply(Math,Object(Ct.a)(l.map((function(e){return e.lineNumber}))))+1,b=-(a=d/2),p=-(u%2===1?(u-1)/2:u/2)*i.lineHeight-i.lineHeight/2,j=Object(h.a)(l);try{for(j.s();!(t=j.n()).done;){var f=t.value;f.x+=b,f.y+=p}}catch(v){j.e(v)}finally{j.f()}return{units:l,radius:a}},this.hyphenate=function(e){return e.length>4?i.hypher.hyphenate(e):[e]},this.getApproximateWidth=function(e){return e*i.measureText("abcij ")},this.measureText=function(e){return i.measureCtx.measureText(e).width};var r=document.createElement("canvas");this.measureCtx=r.getContext("2d"),this.spaceWidth=this.measureText(" "),this.font=t.font||"".concat(t.fontSize,"px ").concat(t.fontFamily),this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.measureCtx.font=this.font,this.hypher=new Dt.a(Pt.a),void 0!==n&&(void 0!==n.lineHeight&&(this.cssLineHeight=n.lineHeight),void 0!==n.separable&&(this.separable=n.separable)),this.lineHeight=this.fontSize*this.cssLineHeight,this.circleLayout=new zt(this)}));At.getCssFont=function(e){var t=getComputedStyle(e),n=t.fontStyle,i=t.fontVariant,r=t.fontWeight,a=t.fontSize,o=t.fontFamily;return{font:"".concat(n," ").concat(i," ").concat(r," ").concat(a," ").concat(o),fontSize:parseFloat(a),fontFamily:o}};var zt=Object(p.a)((function e(t){var n=this;Object(b.a)(this,e),this.lineBreak=void 0,this.lineHeight=void 0,this.radius2layout=void 0,this.findRadius=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=0,a=t,o=void 0,c=0;c<t;c++){if(a-r===1){o=a;break}var s=Math.ceil((r+a)/2),l=n.getLayout(s).totalLength;if(l<e)r=s;else{if(!(l-e>i)){o=s;break}a=s}}if(void 0===o)throw new Error("The text of ".concat(e," is too long to render in a circle that has the maximum radius: ").concat(t," - ").concat(n.getLayout(t).totalLength));return o},this.getLayout=function(e){if(void 0===n.radius2layout[e]){for(var t=n.computeHalfNumberOfLines(e),i=[],r=[],a=t;a>0;a--)i.push(n.computeLineLength(a,e)),r.push(e-n.lineHeight*(a+.5));i.push(n.computeCentralLineLength(e)),r.push(e-n.lineHeight/2);for(var o=t-1;o>=0;o--)i.push(i[o]),r.push(e+n.lineHeight*(o-.5));n.radius2layout[e]={lines:i,linesY:r,centralLine:i[t],totalLength:i.reduce((function(e,t){return e+t}))}}return n.radius2layout[e]},this.computeHalfNumberOfLines=function(e){return Math.floor((e-n.lineHeight/2)/n.lineHeight)},this.computeLineLength=function(e,t){return 2*Math.sqrt(Math.pow(t,2)-Math.pow(n.lineHeight*e,2))},this.computeCentralLineLength=function(e){return 2*Math.sqrt(Math.pow(e,2)-Math.pow(n.lineHeight/2,2))},this.lineBreak=t,this.lineHeight=t.lineHeight,this.radius2layout={}})),Mt=function(){function e(t,n){var i=this;Object(b.a)(this,e),this.version=void 0,this.container=void 0,this.graph=void 0,this.data=void 0,this.props=void 0,this.wordwrap=void 0,this.hotswapProps=function(e){return!!we.a.isEqual(i.props.layout,e.layout)&&(i.props.enableActivateRelations===e.enableActivateRelations&&(i.props=e,!0))},this.destroy=function(){i.graph.destroy()},this.fitCenter=function(){i.graph.fitCenter()},this.setDataAndRender=function(e,t){i.version>0&&i.graph.clear(),i.data=e,i.graph.data({nodes:e.nodes,edges:e.edges}),i.graph.render(),i.version+=1,void 0!==t&&t()},this.updateLayout=function(e){i.graph.updateLayout(e),i.graph.layout()},this.updateContainerSize=function(e){var t=e.center,n=e.height,r=i.graph.get("group");r.resetMatrix();var a=r.getCanvasBBox();if(0!==a.width&&0!==a.height){var o,c=i.container.clientWidth;switch(n.type){case"fit-graph":o=a.height+n.extraHeight;break;case"fit-remaining-window":var s=i.container.getBoundingClientRect().top,l=window.scrollY;o=document.documentElement.clientHeight-(s+l)-n.offsetHeight;break;case"keep-as-is":o=i.props.initHeight}i.graph.changeSize(c,o),!0===t?i.graph.moveTo(c/2-a.width/2,o/2-a.height/2):i.graph.moveTo(i.props.leftOffset||0,i.props.topOffset||0)}return a},this.untilLayoutStable=function(e,t,n,r,a,o,c){if(e<=0)return n.apply(void 0,Object(Ct.a)(r)),void(void 0!==a&&a());var s=i.graph.get("group").getCanvasBBox();if(o=o||10,void 0!==c){if(Math.abs(c.width-s.width)<o&&Math.abs(c.height-s.height)<o)return void setTimeout((function(){var c=i.graph.get("group").getCanvasBBox();Math.abs(s.width-c.width)>=o||Math.abs(s.height-c.height)>=o?i.untilLayoutStable(e-1,t,n,r,a,o,c):(n.apply(void 0,Object(Ct.a)(r)),void 0!==a&&a())}),t);setTimeout((function(){i.untilLayoutStable(e-1,t,n,r,a,o,s)}),t)}else setTimeout((function(){i.untilLayoutStable(e,t,n,r,a,o,s)}),t)},this.version=0,this.props=n,this.container=t,this.data={nodes:[],edges:[]};this.wordwrap=new At({fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",fontSize:12}),function(e){var t=e.getApproximateWidth(4),n=function(n,i){var r,a=n.style.paddingWidth||0,o=n.style.paddingHeight||0,c=e.wrapText(n.label,n.size||t,"center"),s=c.units,l=c.width,d=c.height,u=i.addShape("rect",{attrs:Object(m.a)({width:l+2*a,height:d+2*o},n.style),name:"rect"});return Nt(i,e,s,{xoffset:a,yoffset:o,cfg:null===(r=n.labelCfg)||void 0===r?void 0:r.style}),u};Et.a.registerNode("rect-wrap",{draw:function(e,t){return n(e,t)},setState:function(e,t,i){for(var r,a=i._cfg,o=a.model,c=a.states,s={},l=Object(m.a)({},null===(r=o.labelCfg)||void 0===r?void 0:r.style),u=0,b=Object.entries(o.style);u<b.length;u++){var p=Object(d.a)(b[u],2),j=p[0],f=p[1];"object"!==typeof f&&(s[j]=f)}var v,g=Object(h.a)(c);try{for(g.s();!(v=g.n()).done;)for(var O=v.value,x=0,y=Object.entries(a.styles[O]);x<y.length;x++){var I=Object(d.a)(y[x],2),w=I[0],k=I[1];"label"===w?Object.assign(l,k):s[w]=k}}catch(C){g.e(C)}finally{g.f()}var S=a.group;S.clear(),n({label:o.label,size:o.size,style:s,labelCfg:{style:l}},S)}},"single-node")}(this.wordwrap),Tt(this.wordwrap);var r=["drag-canvas","drag-node"];n.enableActivateRelations&&r.push({type:"activate-relations",resetSelected:!0}),this.graph=new Et.a.Graph({container:t,width:t.scrollWidth,height:n.initHeight,layout:n.layout||{type:"force",preventOverlap:!0,linkDistance:50,nodeSpacing:50},defaultEdge:{type:"quadratic",style:{stroke:"black",endArrow:{fill:"black",path:Et.a.Arrow.triangle(6,8)}},labelCfg:{style:{fill:"black",background:{fill:"#ffffff",stroke:"#9EC9FF",padding:[2,2,2,2],radius:2}}}},modes:{default:r,edit:["click-select"]},nodeStateStyles:{active:{opacity:1,label:{opacity:1}},inactive:{opacity:.2,label:{opacity:.2}}},edgeStateStyles:{active:{stroke:"black",opacity:1},inactive:{opacity:.2,text:{opacity:.2}}}}),void 0!==n.onNodeClick&&this.graph.on("node:click",(function(e){i.props.onNodeClick(e.item._cfg.model.id)})),void 0!==n.onEdgeClick&&this.graph.on("edge:click",(function(e){i.props.onEdgeClick(e.item._cfg.model)}))}return Object(p.a)(e,null,[{key:"transformData",value:function(e,t){var n=e.map((function(e,t){var n;n=e.label.trim().length>0&&("rect"===e.shape||"circle"===e.shape)?e.shape+"-wrap":e.shape;var i={id:e.id,label:e.label,type:n,style:Object(m.a)(Object(m.a)({},e.style),{},{radius:4,paddingHeight:2,paddingWidth:4}),labelCfg:{style:e.labelStyle}};return"rect"===e.shape&&(i.style.radius=4),i}));we.a.uniq(t.map((function(e){return e.id}))).length!==t.length&&console.error("Edges must have unique ids. However, we get:",t.map((function(e){return e.id})));var i,r=t.map((function(e){return{id:e.id,source:e.source,target:e.target,label:e.label}})),a=new Set,o=!1,c=Object(h.a)(t);try{for(c.s();!(i=c.n()).done;){var s=i.value,l="".concat(s.source,"-").concat(s.target);if(a.has(l)){o=!0;break}a.add(l)}}catch(d){c.e(d)}finally{c.f()}return o&&Et.a.Util.processParallelEdges(r),{nodes:n,edges:r}}}]),e}(),Ut={hide:{display:"none"},graph:{position:"relative",width:"100%"},toolbar:{position:"absolute",top:8,left:8,"& button.text":{borderRadius:4,paddingLeft:8,paddingRight:8},"& button.icon":{borderRadius:4,padding:4,"& svg":{fontSize:22}}},bordered:{border:"1px solid #bbb",borderRadius:4},container:{width:"100%","& canvas":{display:"block"}}},Ht={Force:{type:"force",preventOverlap:!0,linkDistance:50,nodeSpacing:50},Dagre:{type:"dagre",rankdir:"TB",nodesep:70,ranksep:30}},Vt=Object(he.a)(Ut)(Object(c.forwardRef)((function(e,t){var n=e.id,i=e.version,r=e.nodes,a=e.edges,o=e.classes,s=e.props,l=e.className,d=e.renderingAdjustedHeight,u=void 0===d?{type:"fit-graph",extraHeight:8}:d,h=e.toolbar,b=void 0!==h&&h,p=e.bordered,j=void 0===p||p,f=e.layouts,v=void 0===f?Ht:f,g=Object(c.useRef)(null),O=Object(c.useRef)(void 0);Object(c.useImperativeHandle)(t,(function(){return{graph:function(){return O.current},recenter:function(){return void 0!==O.current&&(O.current.updateContainerSize({center:!0,height:u}),!0)}}})),Object(c.useEffect)((function(){if(null!==g.current){void 0===O.current&&(O.current=new Mt(g.current,s||{initHeight:500}));var e=O.current;if(void 0!==s)e.hotswapProps(s)||(e.destroy(),O.current=new Mt(g.current,s||{initHeight:500}),e=O.current);e.setDataAndRender(Mt.transformData(r,a),(function(){window.g=e,e.untilLayoutStable(20,50,e.updateContainerSize,[{center:!0,height:u}],(function(){}))}))}}),[n,i,r,a,s,u]);var x=!1===b?null:Object(fe.jsx)(qt,{autoHide:"auto-hide"===b,graph:O,layouts:v});return Object(fe.jsxs)("div",{className:l,children:[Object(fe.jsx)("div",{className:o.hide,children:i}),Object(fe.jsxs)("div",{className:o.graph,children:[x,Object(fe.jsx)("div",{ref:g,className:o.container+(j?" "+o.bordered:"")})]})]})}))),qt=Object(he.a)(Ut)((function(e){var t=e.autoHide,n=void 0!==t&&t,i=e.graph,r=e.classes,a=e.layouts,o=Object(c.useState)(!1),s=Object(d.a)(o,2),l=s[0],u=s[1],h=Object(c.useState)("Force"),b=Object(d.a)(h,2),p=b[0],j=b[1],f=function(){n&&u(!0)},v=function(){n&&u(!1)};if(n&&!l)return Object(fe.jsx)("div",{className:r.toolbar,onMouseEnter:f,onMouseLeave:v,children:Object(fe.jsx)(ce.a,{className:"icon",children:Object(fe.jsx)(It.a,{})})});var g=function(){var e;null===(e=i.current)||void 0===e||e.graph.fitCenter()},O=function(e){var t,n;j(e),null===(t=i.current)||void 0===t||t.updateLayout(a[e]),null===(n=i.current)||void 0===n||n.untilLayoutStable(20,50,g,[],(function(){}))};return Object(fe.jsx)("div",{className:r.toolbar,onMouseEnter:f,onMouseLeave:v,children:Object(fe.jsxs)(ke.b,{size:4,align:"start",children:[Object(fe.jsx)(St.a,{title:"Center the graph",children:Object(fe.jsx)(ce.a,{className:"icon",onClick:g,children:Object(fe.jsx)(kt.a,{})})}),Object(fe.jsx)(St.a,{title:"Make the graph full screen",children:Object(fe.jsx)(ce.a,{className:"icon",children:Object(fe.jsx)(xt.a,{})})}),Object(fe.jsx)(St.a,{title:"Change graph layout",children:Object(fe.jsx)(ot.a,{overlay:Object(fe.jsx)(rt.a,{onClick:function(e){O(e.key)},children:Object.keys(Ht).map((function(e){return Object(fe.jsx)(rt.a.Item,{children:e},e)}))}),children:Object(fe.jsxs)(ce.a,{className:"text",icon:Object(fe.jsx)(yt.a,{}),onClick:function(){"Force"===p&&O("Dagre"),"Dagre"===p&&O("Force")},children:[p," ",Object(fe.jsx)(et.a,{})]})})})]})})})),Wt={hide:{display:"none"},graphContainer:{},draft:{border:"1px dashed ".concat(ue.o[7]," !important"),"&:hover":{color:"".concat(ue.e[5]," !important")}},selectedDraft:{backgroundColor:"".concat(ue.e[5]," !important")}},Kt=Object(he.a)(Wt)(Object(de.a)(Object(c.forwardRef)((function(e,t){var n=e.classes,i=(e.table,e.sm),r=Object(c.useRef)();Object(c.useImperativeHandle)(t,(function(){return{recenter:function(){var e;return(null===(e=r.current)||void 0===e?void 0:e.recenter())||!1}}}));var a=Object(c.useMemo)((function(){return[i.graph.nodes.map((function(e){var t,n;switch(e.nodetype){case"class_node":t="circle",n={fill:ue.f[2],stroke:ue.f[8]};break;case"data_node":t="rect",n={fill:ue.e[3],stroke:ue.e[8]};break;case"literal_node":t="entity-id"===e.value.type?"circle":"rect",n=e.isInContext?{fill:"#C6E5FF",stroke:"#5B8FF9"}:{fill:ue.l[2],stroke:"#c41d7f"};break;default:throw new Error("Unreachable!")}return{id:e.id,label:Yt(i,e),style:n,shape:t}})),i.graph.edges.map((function(e){return{id:"".concat(e.source,"-").concat(e.target,"-").concat(e.uri),source:e.source,target:e.target,label:e.label}}))]}),[_.isDraft(i)?i.draftID:null,i.id,i.graph.version]),o=Object(d.a)(a,2),s=o[0],l=o[1];return Object(fe.jsx)(Vt,{ref:r,className:n.graphContainer,id:i.id,version:i.graph.version,nodes:s,edges:l,toolbar:!1,renderingAdjustedHeight:{type:"fit-graph",extraHeight:20},props:{initHeight:300,layout:{type:"dagre",rankdir:"TB",nodesep:50,ranksep:15},onNodeClick:function(e){vt({type:"node",sm:i,node:i.graph.node(e)})},onEdgeClick:function(e){vt({type:"edge",sm:i,edge:i.graph.edge(e.source,e.target)})}}})})))),Yt=function(e,t){switch(t.nodetype){case"data_node":case"literal_node":return t.label;case"class_node":return e.graph.uriCount.label(t)}},Jt=n(220),Gt=n(14),Qt=["entity","nolink","onCtrlClick"],$t=function(e){var t=e.entity,n=e.nolink,i=void 0!==n&&n,r=e.onCtrlClick,o=Object(Gt.a)(e,Qt);return i?Object(fe.jsx)("span",Object(m.a)(Object(m.a)({},o),{},{children:t.readableLabel})):Object(fe.jsx)(a.c,Object(m.a)(Object(m.a)({href:t.uri,openInNewPage:!0,onCtrlClick:r},o),{},{children:t.readableLabel}))},Xt=n(497),Zt=n.n(Xt),en=n(146);function tn(e){var t=Object(c.useMemo)((function(){for(var t=new Set,n=0,i=Object.entries(e.properties);n<i.length;n++){var r=Object(d.a)(i[n],2),a=r[0],o=r[1];t.add(a);var c,s=Object(h.a)(o);try{for(s.s();!(c=s.n()).done;)for(var l=c.value,u=0,b=Object.keys(l.qualifiers);u<b.length;u++){var p=b[u];t.add(p)}}catch(j){s.e(j)}finally{s.f()}}return Array.from(t)}),[e.id]),n=ie().propertyStore;return Object(c.useEffect)((function(){n.batch.fetchByIds(t)}),[e.id]),Object.fromEntries(t.map((function(e){var t=n.get(e);return t?[e,t]:[e,{id:e,doesNotExist:null===t}]})))}var nn=n(501),rn=Object(de.a)((function(e){var t=e.entityId,n=e.render,i=e.renderLoading,r=e.renderNotFound,o=e.forceWaiting,s=void 0!==o&&o,l=ie(),d=l.entityStore,u=l.uiSettings;Object(c.useEffect)((function(){d.batch.fetchById(t)}),[d,t]);var h=d.get(t);return void 0===h?s?void 0!==i?i():Object(fe.jsx)(a.e,{}):Object(fe.jsx)("span",{children:t}):null===h?void 0!==r?r():Object(fe.jsx)(nn.a,{status:"404",title:"404",subTitle:"Entity ".concat(t," does not exist")}):n(h,u.entity)})),an=["property","nolink","showId"],on=function(e){var t=e.property,n=e.nolink,i=void 0!==n&&n,r=e.showId,o=void 0!==r&&r,c=Object(Gt.a)(e,an);if(void 0!==t.doesNotExist)return t.doesNotExist?Object(fe.jsx)("span",Object(m.a)(Object(m.a)({},c),{},{children:Object(fe.jsxs)("i",{children:["Property ",t.id," doesn't exist"]})})):i?Object(fe.jsxs)("span",Object(m.a)(Object(m.a)({},c),{},{children:["(",t.id,")"]})):Object(fe.jsxs)(a.c,Object(m.a)(Object(m.a)({href:"",openInNewPage:!0},c),{},{children:["(",t.id,")"]}));if(i)return Object(fe.jsxs)("span",Object(m.a)(Object(m.a)({},c),{},{children:[t.label," (",t.id,")"]}));var s=o?"".concat(t.label," (").concat(t.id,")"):t.label;return Object(fe.jsx)(a.c,Object(m.a)(Object(m.a)({href:t.uri,openInNewPage:!0},c),{},{children:s}))},cn=n(506),sn=n(218),ln=Object(he.a)({hide:{display:"none"}})((function(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),i=n[0],r=n[1],a=function(){r(!i)},o=i?Object(fe.jsx)(cn.a,{onClick:a}):Object(fe.jsx)(sn.a,{onClick:a});return Object(fe.jsxs)("div",{children:[Object(fe.jsxs)(ke.b,{size:4,children:[e.children,o]}),Object(fe.jsx)("div",{className:i?"gena-app":e.classes.hide,children:e.collapsible})]})})),dn=Object(he.a)({})((function(e){var t=e.value;return"entityid"===t.type?Object(fe.jsx)(rn,{entityId:t.value,render:function(e){return Object(fe.jsx)($t,{entity:e})}}):"time"===t.type?Object(fe.jsx)(ln,{collapsible:Object(fe.jsxs)("ul",{children:[Object(fe.jsxs)("li",{children:[Object(fe.jsx)("b",{children:"Timezone:"})," ",t.value.timezone]}),Object(fe.jsxs)("li",{children:[Object(fe.jsx)("b",{children:"From:"})," ",t.value.before," - ",t.value.after]}),Object(fe.jsxs)("li",{children:[Object(fe.jsx)("b",{children:"Precision:"})," ",t.value.precision]}),Object(fe.jsxs)("li",{children:[Object(fe.jsx)("b",{children:"Calendar Model:"})," ",Object(fe.jsx)(a.c,{href:t.value.calendarmodel,openInNewPage:!0,children:t.value.calendarmodel})]})]}),children:t.value.time}):"quantity"===t.type?Object(fe.jsx)(ln,{collapsible:Object(fe.jsxs)("ul",{children:[Object(fe.jsxs)("li",{children:[Object(fe.jsx)("b",{children:"Bound:"})," ",t.value.lowerBound," -"," ",t.value.upperBound]}),Object(fe.jsxs)("li",{children:[Object(fe.jsx)("b",{children:"Unit:"})," ",t.value.unit]})]}),children:t.value.amount}):"monolingualtext"===t.type?Object(fe.jsxs)("span",{children:[t.value.text," ",Object(fe.jsxs)("i",{children:["@",t.value.language]})]}):"globecoordinate"===t.type?Object(fe.jsx)(ln,{collapsible:Object(fe.jsxs)("ul",{children:[Object(fe.jsxs)("li",{children:[Object(fe.jsx)("b",{children:"Precision:"})," ",t.value.precision]}),Object(fe.jsxs)("li",{children:[Object(fe.jsx)("b",{children:"Globe:"})," ",Object(fe.jsx)(a.c,{href:t.value.globe,openInNewPage:!0,children:t.value.globe})]})]}),children:Object(fe.jsxs)(a.c,{href:"http://maps.google.com/maps?q=".concat(t.value.latitude,",").concat(t.value.longitude),openInNewPage:!0,children:[t.value.latitude," N,",t.value.longitude," W"]})}):"object"===typeof t.value?Object(fe.jsx)("span",{children:JSON.stringify(t.value)}):Object(fe.jsx)("span",{children:t.value})})),un=["stmt","classes","id2prop"],hn=Object(he.a)({qualifiers:{marginLeft:24}})((function(e){var t,n=e.stmt,i=e.classes,r=e.id2prop,a=Object(Gt.a)(e,un),o=[],c=Object(h.a)(n.qualifiersOrder);try{for(c.s();!(t=c.n()).done;){var s=t.value,l=void 0;l=0===n.qualifiers[s].length?Object(fe.jsx)(oe.a.Text,{type:"secondary",italic:!0,children:"no value"}):n.qualifiers[s].map((function(e,t){return Object(fe.jsx)("div",{children:Object(fe.jsx)(dn,{value:e})},t)})),o.push(Object(fe.jsxs)(re.a,{gutter:8,children:[Object(fe.jsx)(ae.a,{span:6,children:Object(fe.jsx)(on,{property:r[s]})}),Object(fe.jsx)(ae.a,{span:18,children:l})]},s))}}catch(d){c.e(d)}finally{c.f()}return Object(fe.jsxs)("div",Object(m.a)(Object(m.a)({},a),{},{children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(dn,{value:n.value})}),Object(fe.jsx)("div",{className:i.qualifiers,children:o})]}))})),bn=Object(he.a)({propDivider:{height:1,border:"none",color:"#ddd",backgroundColor:"#ddd"}})(Object(de.a)((function(e){var t=e.entity,n=e.id2prop,i=e.filteredProps,r=e.showId,a=void 0!==r&&r,o=e.classes;0===i.length&&(i=Object.keys(t.properties));var c,s=[],l=Object(h.a)(i);try{for(l.s();!(c=l.n()).done;){var d=c.value;if(void 0!==t.properties[d]){var u=t.properties[d];s.length>0&&s.push(Object(fe.jsx)("hr",{className:o.propDivider},"divider-".concat(d))),s.push(Object(fe.jsxs)(re.a,{gutter:8,children:[Object(fe.jsx)(ae.a,{span:6,children:Object(fe.jsx)(oe.a.Text,{strong:!0,children:Object(fe.jsx)(on,{property:n[d],showId:a})})}),Object(fe.jsx)(ae.a,{span:18,children:Object(fe.jsx)(ke.b,{direction:"vertical",style:{width:"100%"},children:u.map((function(e,t){return Object(fe.jsx)(hn,{stmt:e,id2prop:n},t)}))})})]},d))}}}catch(b){l.e(b)}finally{l.f()}return Object(fe.jsx)(ke.b,{direction:"vertical",style:{width:"100%"},size:2,children:s})}))),pn=n(153),jn=Object(he.a)({root:{width:240}})(Object(de.a)((function(e){var t=e.entity,n=e.enable,i=e.setEnable,r=e.id2prop,a=e.filteredProps,o=e.addFilteredProp,s=e.removeFilteredProp,l=e.classes,d=Object(c.useMemo)((function(){return Object.keys(t.properties).map((function(e){return{label:"".concat(r[e].label," (").concat(e,")"),value:e}}))}),[r,t.id]);return Object(fe.jsxs)("div",{children:[Object(fe.jsx)(pn.a,{onChange:function(){return i(!n)},checked:n,children:"Enable Filtering"}),Object(fe.jsx)(Te.a,{mode:"multiple",allowClear:!0,options:d,optionFilterProp:"label",className:l.root,value:a,onSelect:o,onDeselect:s})]})}))),fn=Object(he.a)({root:{"& > h2, p, span":{margin:0},minWidth:360}})(Object(de.a)((function(e){var t=e.entity,n=e.settings,i=tn(t),r=Object(c.useState)(!0),o=Object(d.a)(r,2),s=o[0],l=o[1];return Object(fe.jsxs)("div",{children:[Object(fe.jsx)(ke.b,{style:{float:"right"},children:Object(fe.jsx)(jn,{enable:s,setEnable:l,entity:t,id2prop:i,filteredProps:n.showedPropsInFullView,addFilteredProp:n.addShowedPropsInFullView,removeFilteredProp:n.removeShowedPropsInFullView})}),Object(fe.jsxs)("h2",{children:[Object(fe.jsx)(a.c,{href:t.uri,openInNewPage:!0,children:t.label.lang2value[t.label.lang]}),"\xa0",Object(fe.jsxs)(oe.a.Text,{italic:!0,strong:!1,style:{fontSize:14,fontWeight:400},copyable:{text:t.id},children:["(",t.id,")"]})]}),Object(fe.jsx)(oe.a.Text,{type:"secondary",children:t.aliases.lang2values[t.aliases.lang].join(" | ")}),Object(fe.jsx)("p",{children:t.description.lang2value[t.description.lang]}),Object(fe.jsx)("hr",{}),Object(fe.jsx)(bn,{entity:t,id2prop:i,showId:!0,filteredProps:s?n.showedPropsInFullView:[]})]})})));function vn(e,t){var n;n="string"!==typeof e?Object(fe.jsx)(fn,{entity:e.entity,settings:e.settings}):Object(fe.jsx)(rn,{entityId:e,render:function(e,t){return Object(fe.jsx)(fn,{entity:e,settings:t})}}),pe.a.info({icon:null,content:n,bodyStyle:{margin:-8,marginTop:-16},okButtonProps:{style:{display:"none"}},maskClosable:!0,mask:!0,zIndex:t,width:"calc(100% - 128px)",style:{top:64}})}var gn=["entity","children","classes","zIndex","settings"],On=Object(he.a)({root:{"& > h2, p, span":{margin:0},minWidth:600}})(Object(de.a)((function(e){var t=e.entity,n=e.children,i=e.classes,r=e.zIndex,o=e.settings,c=Object(Gt.a)(e,gn),s=tn(t),l=Object(fe.jsxs)("div",Object(m.a)(Object(m.a)({},c),{},{className:"".concat(i.root," ").concat(c.className),children:[Object(fe.jsxs)("h2",{children:[Object(fe.jsx)(a.c,{href:t.uri,openInNewPage:!0,children:t.label.lang2value[t.label.lang]}),"\xa0",Object(fe.jsxs)(oe.a.Text,{italic:!0,strong:!1,style:{fontSize:14,fontWeight:400},copyable:{text:t.id},children:["(",t.id,")"]}),Object(fe.jsx)(Zt.a,{style:{marginBottom:-2,paddingTop:4,cursor:"pointer"},onClick:function(){vn({entity:t,settings:o},void 0!==r?r+1:void 0)}})]}),Object(fe.jsx)(oe.a.Text,{type:"secondary",children:t.aliases.lang2values[t.aliases.lang].join(" | ")}),Object(fe.jsx)("p",{children:t.description.lang2value[t.description.lang]}),Object(fe.jsx)("hr",{}),Object(fe.jsx)(bn,{id2prop:s,entity:t,filteredProps:o.showedPropsInPopoverView})]}));return Object(fe.jsx)(en.a,{content:l,zIndex:r,children:n})}))),xn=n(165),yn=n(305),mn={treeNode:{},levelMarker:{},table:{"& th":{minWidth:30,textAlign:"left"}}},In=Object(he.a)(mn)(Object(de.a)((function(e){var t=e.types,n=e.classes,i=e.filter,r=Object(c.useState)([]),a=Object(d.a)(r,2),o=a[0],s=a[1];return Object(c.useMemo)((function(){for(var e=Object.fromEntries(Object.keys(t).map((function(e){return[e,new Set]}))),n=0,r=Object.values(t);n<r.length;n++){var a,o=r[n],c=Object(h.a)(o.parents);try{for(c.s();!(a=c.n()).done;){var l=a.value;void 0!==t[l]&&e[l].add(o.id)}}catch(S){c.e(S)}finally{c.f()}}for(var u=new Set(Object.keys(e)),b=0,p=Object.entries(e);b<p.length;b++){var j,f=Object(d.a)(p[b],2),v=(f[0],f[1]),g=Object(h.a)(v);try{for(g.s();!(j=g.n()).done;){var O=j.value;u.delete(O)}}catch(S){g.e(S)}finally{g.f()}}i.addTypes(Object.keys(t));var x,y={start:"",nodes:t,p2cs:e,visited:{},counter:0,filter:i},m=[],I=Object(h.a)(u);try{for(I.s();!(x=I.n()).done;){var w=x.value;y.start=w,kn(y,m)}}catch(S){I.e(S)}finally{I.f()}for(var k in e)void 0===y.visited[k]&&(y.start=k,kn(y,m));s(m)}),[Object.keys(t).sort().join("\t")]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("table",{className:n.table,children:[Object(fe.jsx)("thead",{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{children:Object(fe.jsx)(oe.a.Text,{type:"secondary",strong:!0,children:"#"})}),Object(fe.jsx)("th",{children:Object(fe.jsx)(St.a,{title:"Include: select rows that have a specific type",children:Object(fe.jsx)(oe.a.Text,{type:"secondary",strong:!0,children:"In"})})}),Object(fe.jsx)("th",{children:Object(fe.jsx)(St.a,{title:"Exclude: select rows that do not have a specific type",children:Object(fe.jsx)(oe.a.Text,{type:"secondary",strong:!0,children:"Ex"})})}),Object(fe.jsx)("th",{children:Object(fe.jsx)(oe.a.Text,{type:"secondary",strong:!0,children:"Type"})})]})}),Object(fe.jsxs)("tbody",{children:[Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("td",{}),Object(fe.jsx)(St.a,{title:"Select all checkbox in this `Include` column",placement:"left",children:Object(fe.jsx)("td",{children:Object(fe.jsx)(pn.a,{indeterminate:i.hasAnyOp("include")&&!i.hasAllOp("include"),checked:i.hasAllOp("include"),onChange:function(e){return i.toggleAllType("include",e.target.checked)}})})}),Object(fe.jsx)(St.a,{title:"Select all checkbox in this `Exclude` column",placement:"right",children:Object(fe.jsx)("td",{children:Object(fe.jsx)(pn.a,{indeterminate:i.hasAnyOp("exclude")&&!i.hasAllOp("exclude"),checked:i.hasAllOp("exclude"),onChange:function(e){return i.toggleAllType("exclude",e.target.checked)}})})}),Object(fe.jsx)("td",{children:Object(fe.jsx)(oe.a.Text,{type:"secondary",children:"(Select all)"})})]}),o]})]}),Object(fe.jsx)(yn.a,{style:{margin:"8px 0"}}),Object(fe.jsxs)(ke.b,{children:[Object(fe.jsx)(oe.a.Text,{type:"secondary",strong:!0,title:"Reset all filters",onClick:function(){return i.toggleAllType("null",!0)},style:{cursor:"pointer"},children:"Reset"}),Object(fe.jsx)(yn.a,{type:"vertical"}),Object(fe.jsx)(St.a,{title:"Select rows containing NIL entities",placement:"bottom",children:Object(fe.jsxs)(oe.a.Text,{type:"secondary",strong:!0,onClick:function(){return i.setSelectNil(!i.selectNil)},style:{cursor:"pointer",userSelect:"none"},children:[Object(fe.jsx)(pn.a,{checked:i.selectNil,onChange:function(e){return i.setSelectNil(e.target.checked)}}),"\xa0NIL Rows"]})}),Object(fe.jsx)(yn.a,{type:"vertical"}),Object(fe.jsx)(St.a,{title:"Select rows that do not link to any entity",placement:"bottom",children:Object(fe.jsxs)(oe.a.Text,{type:"secondary",strong:!0,onClick:function(){return i.setSelectUnlinked(!i.selectUnlinked)},style:{cursor:"pointer",userSelect:"none"},children:[Object(fe.jsx)(pn.a,{checked:i.selectUnlinked,onChange:function(e){return i.setSelectUnlinked(e.target.checked)}}),"\xa0Unlinked Rows"]})}),Object(fe.jsx)(yn.a,{type:"vertical"}),Object(fe.jsx)(St.a,{title:"Applying filters to candidate entities",placement:"bottom",children:Object(fe.jsxs)(oe.a.Text,{type:"secondary",strong:!0,onClick:function(){return i.setIncludeCandidateEntities(!i.includeCandidateEntities)},style:{cursor:"pointer",userSelect:"none"},children:[Object(fe.jsx)(pn.a,{checked:i.includeCandidateEntities,onChange:function(e){return i.setIncludeCandidateEntities(e.target.checked)}}),"\xa0Candidate entities"]})})]})]})}))),wn=Object(he.a)(mn)(Object(de.a)((function(e){var t,n=e.nodeId,i=e.nodes,r=e.visited,a=e.unknown,o=e.depth,c=e.counter,s=e.classes,l=e.filter,d=(null===(t=i[n])||void 0===t?void 0:t.readableLabel)||n,u=[];if(0===o)u.push(Object(fe.jsx)("span",{children:d},"2"));else{for(var h="",b=1;b<o;b++)h+="\u2502&nbsp;&nbsp;&nbsp;";u.push(Object(fe.jsx)("code",{className:s.levelMarker,dangerouslySetInnerHTML:{__html:"".concat(h,"\u251c\u2500\u2500&nbsp;")}},"1")),u.push(Object(fe.jsx)("span",{children:d},"2"))}return void 0!==r&&u.push(Object(fe.jsxs)(oe.a.Text,{type:"secondary",style:{marginLeft:4},children:["(visited at #",r,")"]})),a&&u.push(Object(fe.jsx)(oe.a.Text,{type:"secondary",style:{marginLeft:4},children:"(unknown)"})),Object(fe.jsxs)("tr",{className:s.treeNode,children:[Object(fe.jsx)("td",{title:"The index number of this type",children:Object(fe.jsxs)(oe.a.Text,{type:"secondary",children:[c,"."]})}),Object(fe.jsx)("td",{title:"Select rows having entities of this type",children:void 0===r?Object(fe.jsx)(pn.a,{checked:"include"===l.type2op[n],onChange:function(e){l.setTypeOp(n,e.target.checked?"include":"null")}}):null}),Object(fe.jsx)("td",{title:"Select rows having entities that do not be part of this type",children:void 0===r?Object(fe.jsx)(pn.a,{checked:"exclude"===l.type2op[n],onChange:function(e){l.setTypeOp(n,e.target.checked?"exclude":"null")}}):null}),Object(fe.jsx)("td",{children:u})]})}))),kn=function(e,t){for(var n=[[e.start,0]];n.length>0;){e.counter+=1;var i=n.pop(),r=Object(d.a)(i,2),a=r[0],o=r[1];if(t.push(Object(fe.jsx)(wn,{counter:e.counter,nodeId:a,nodes:e.nodes,unknown:void 0===e.nodes[a],depth:o,visited:e.visited[a],filter:e.filter},e.counter)),void 0===e.visited[a]){e.visited[a]=e.counter;var c,s=Object(h.a)(e.p2cs[a]);try{for(s.s();!(c=s.n()).done;){var l=c.value;n.push([l,o+1])}}catch(u){s.e(u)}finally{s.f()}}}},Sn={treeNode:{},levelMarker:{},table:{"& th":{minWidth:30,textAlign:"left"}}},Cn=Object(he.a)(Sn)(Object(de.a)((function(e){var t=e.properties,n=e.classes,i=e.filter,r=Object(c.useState)([]),a=Object(d.a)(r,2),o=a[0],s=a[1];return Object(c.useMemo)((function(){for(var e=Object.fromEntries(Object.keys(t).map((function(e){return[e,new Set]}))),n=0,r=Object.values(t);n<r.length;n++){var a,o=r[n],c=Object(h.a)(o.parents);try{for(c.s();!(a=c.n()).done;){var l=a.value;void 0!==t[l]&&e[l].add(o.id)}}catch(S){c.e(S)}finally{c.f()}}for(var u=new Set(Object.keys(e)),b=0,p=Object.entries(e);b<p.length;b++){var j,f=Object(d.a)(p[b],2),v=(f[0],f[1]),g=Object(h.a)(v);try{for(g.s();!(j=g.n()).done;){var O=j.value;u.delete(O)}}catch(S){g.e(S)}finally{g.f()}}i.addTypes(Object.keys(t));var x,y={start:"",nodes:t,p2cs:e,visited:{},counter:0,filter:i},m=[],I=Object(h.a)(u);try{for(I.s();!(x=I.n()).done;){var w=x.value;y.start=w,Nn(y,m)}}catch(S){I.e(S)}finally{I.f()}for(var k in e)void 0===y.visited[k]&&(y.start=k,Nn(y,m));s(m)}),[Object.keys(t).sort().join("\t")]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("table",{className:n.table,children:[Object(fe.jsx)("thead",{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{children:Object(fe.jsx)(oe.a.Text,{type:"secondary",strong:!0,children:"#"})}),Object(fe.jsx)("th",{children:Object(fe.jsx)(St.a,{title:"Include: select rows that have a specific type",children:Object(fe.jsx)(oe.a.Text,{type:"secondary",strong:!0,children:"In"})})}),Object(fe.jsx)("th",{children:Object(fe.jsx)(St.a,{title:"Exclude: select rows that do not have a specific type",children:Object(fe.jsx)(oe.a.Text,{type:"secondary",strong:!0,children:"Ex"})})}),Object(fe.jsx)("th",{children:Object(fe.jsx)(oe.a.Text,{type:"secondary",strong:!0,children:"Type"})})]})}),Object(fe.jsxs)("tbody",{children:[Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("td",{}),Object(fe.jsx)(St.a,{title:"Select all checkbox in this `Include` column",placement:"left",children:Object(fe.jsx)("td",{children:Object(fe.jsx)(pn.a,{indeterminate:i.hasAnyOp("include")&&!i.hasAllOp("include"),checked:i.hasAllOp("include"),onChange:function(e){return i.toggleAllType("include",e.target.checked)}})})}),Object(fe.jsx)(St.a,{title:"Select all checkbox in this `Exclude` column",placement:"right",children:Object(fe.jsx)("td",{children:Object(fe.jsx)(pn.a,{indeterminate:i.hasAnyOp("exclude")&&!i.hasAllOp("exclude"),checked:i.hasAllOp("exclude"),onChange:function(e){return i.toggleAllType("exclude",e.target.checked)}})})}),Object(fe.jsx)("td",{children:Object(fe.jsx)(oe.a.Text,{type:"secondary",children:"(Select all)"})})]}),o]})]}),Object(fe.jsx)(yn.a,{style:{margin:"8px 0"}}),Object(fe.jsxs)(ke.b,{children:[Object(fe.jsx)(oe.a.Text,{type:"secondary",strong:!0,title:"Reset all filters",onClick:function(){return i.toggleAllType("null",!0)},style:{cursor:"pointer"},children:"Reset"}),Object(fe.jsx)(yn.a,{type:"vertical"}),Object(fe.jsx)(St.a,{title:"Select rows containing NIL entities",placement:"bottom",children:Object(fe.jsxs)(oe.a.Text,{type:"secondary",strong:!0,onClick:function(){return i.setSelectNil(!i.selectNil)},style:{cursor:"pointer",userSelect:"none"},children:[Object(fe.jsx)(pn.a,{checked:i.selectNil,onChange:function(e){return i.setSelectNil(e.target.checked)}}),"\xa0NIL Rows"]})}),Object(fe.jsx)(yn.a,{type:"vertical"}),Object(fe.jsx)(St.a,{title:"Select rows that do not link to any entity",placement:"bottom",children:Object(fe.jsxs)(oe.a.Text,{type:"secondary",strong:!0,onClick:function(){return i.setSelectUnlinked(!i.selectUnlinked)},style:{cursor:"pointer",userSelect:"none"},children:[Object(fe.jsx)(pn.a,{checked:i.selectUnlinked,onChange:function(e){return i.setSelectUnlinked(e.target.checked)}}),"\xa0Unlinked Rows"]})}),Object(fe.jsx)(yn.a,{type:"vertical"}),Object(fe.jsx)(St.a,{title:"Applying filters to candidate entities",placement:"bottom",children:Object(fe.jsxs)(oe.a.Text,{type:"secondary",strong:!0,onClick:function(){return i.setIncludeCandidateEntities(!i.includeCandidateEntities)},style:{cursor:"pointer",userSelect:"none"},children:[Object(fe.jsx)(pn.a,{checked:i.includeCandidateEntities,onChange:function(e){return i.setIncludeCandidateEntities(e.target.checked)}}),"\xa0Candidate entities"]})})]})]})}))),En=Object(he.a)(Sn)(Object(de.a)((function(e){var t,n=e.nodeId,i=e.nodes,r=e.visited,a=e.unknown,o=e.depth,c=e.counter,s=e.classes,l=e.filter,d=(null===(t=i[n])||void 0===t?void 0:t.readableLabel)||n,u=[];if(0===o)u.push(Object(fe.jsx)("span",{children:d},"2"));else{for(var h="",b=1;b<o;b++)h+="\u2502&nbsp;&nbsp;&nbsp;";u.push(Object(fe.jsx)("code",{className:s.levelMarker,dangerouslySetInnerHTML:{__html:"".concat(h,"\u251c\u2500\u2500&nbsp;")}},"1")),u.push(Object(fe.jsx)("span",{children:d},"2"))}return void 0!==r&&u.push(Object(fe.jsxs)(oe.a.Text,{type:"secondary",style:{marginLeft:4},children:["(visited at #",r,")"]})),a&&u.push(Object(fe.jsx)(oe.a.Text,{type:"secondary",style:{marginLeft:4},children:"(unknown)"})),Object(fe.jsxs)("tr",{className:s.treeNode,children:[Object(fe.jsx)("td",{title:"The index number of this type",children:Object(fe.jsxs)(oe.a.Text,{type:"secondary",children:[c,"."]})}),Object(fe.jsx)("td",{title:"Select rows having entities of this type",children:void 0===r?Object(fe.jsx)(pn.a,{checked:"include"===l.type2op[n],onChange:function(e){l.setTypeOp(n,e.target.checked?"include":"null")}}):null}),Object(fe.jsx)("td",{title:"Select rows having entities that do not be part of this type",children:void 0===r?Object(fe.jsx)(pn.a,{checked:"exclude"===l.type2op[n],onChange:function(e){l.setTypeOp(n,e.target.checked?"exclude":"null")}}):null}),Object(fe.jsx)("td",{children:u})]})}))),Nn=function(e,t){for(var n=[[e.start,0]];n.length>0;){e.counter+=1;var i=n.pop(),r=Object(d.a)(i,2),a=r[0],o=r[1];if(t.push(Object(fe.jsx)(En,{counter:e.counter,nodeId:a,nodes:e.nodes,unknown:void 0===e.nodes[a],depth:o,visited:e.visited[a],filter:e.filter},e.counter)),void 0===e.visited[a]){e.visited[a]=e.counter;var c,s=Object(h.a)(e.p2cs[a]);try{for(s.s();!(c=s.n()).done;){var l=c.value;n.push([l,o+1])}}catch(u){s.e(u)}finally{s.f()}}}},Tn=Object(he.a)({tab:{"& div.ant-tabs-nav":{marginBottom:"8px !important"}}})((function(e){var t=e.table,n=e.columnIndex,i=e.filter,r=e.classes,a=Object(c.useState)("by-type"),o=Object(d.a)(a,2),s=o[0],l=(o[1],ie()),u=l.assistantService,h=(l.semanticModelStore,l.classStore,Object(c.useState)({})),b=Object(d.a)(h,2),p=b[0],j=b[1],f=Object(c.useState)({}),v=Object(d.a)(f,2),g=v[0],O=(v[1],Object(c.useState)({includeNil:!1,includeUnlinked:!1})),x=Object(d.a)(O,2);x[0],x[1];return Object(c.useEffect)((function(){u.getColumnTypes(t,n,!1).then(j)}),[s]),Object(fe.jsx)("div",{style:{minWidth:495,padding:8},children:Object(fe.jsxs)(xn.a,{className:r.tab,defaultActiveKey:"by-type",size:"small",children:[Object(fe.jsx)(xn.a.TabPane,{tab:"Filter By Type",children:Object(fe.jsx)(In,{types:p,filter:i},"".concat(t.id," ").concat(n))},"by-type"),Object(fe.jsx)(xn.a.TabPane,{tab:"Filter By Property",children:Object(fe.jsx)(Cn,{properties:g,filter:i},"".concat(t.id," ").concat(n))},"by-prop")]})})})),Ln=["value","fractionDigits"],Pn=function(e){var t=e.value,n=e.fractionDigits,i=Object(Gt.a)(e,Ln);return Object(fe.jsx)("span",Object(m.a)(Object(m.a)({title:t.toString()},i),{},{children:t.toFixed(n)}))},_n=Object(he.a)({checkboxIcon:{padding:"1px 2px",border:"1px solid",borderRadius:2,fontSize:12,marginBottom:-1}})((function(e){var t=e.icon,n=e.classes,i=e.selected,r=e.onChange,a=e.colorSelected,o=void 0===a?ue.a[5]:a,s=e.colorUnselected,l=void 0===s?ue.g[5]:s,u=Object(c.useState)(!1),h=Object(d.a)(u,2),b=h[0],p=h[1],j=void 0===i?b:i;return Object(fe.jsx)(it.a,{icon:t,color:j?o:l,className:n.checkboxIcon,onClick:function(){if(void 0!==i&&void 0!==r)return r(!i);p(!b),void 0!==r&&r(!b)}})})),Dn=function(e){var t=e.children,n=e.title,i=e.ms,r=Object(c.useState)(!1),a=Object(d.a)(r,2),o=a[0],s=a[1];return Object(fe.jsx)(St.a,{title:n,visible:o,onVisibleChange:function(e){e&&(s(!0),setTimeout((function(){s(!1)}),i))},trigger:"click",children:t})},Bn={correctCandidateEntity:{color:ue.a[5]},candidateEntity:{color:ue.g[5],"&:hover":{color:"".concat(ue.g[5]," !important")}},candidateEntitySeeMore:{color:ue.g[5],cursor:"pointer"}},Fn=Object(he.a)(Bn)(Object(de.a)((function(e){var t=e.record,n=e.index,i=e.classes,r=e.topK,a=void 0===r?3:r,o=ie(),l=o.tableRowStore,b=o.tableStore,p=Object(c.useState)(!1),j=Object(d.a)(p,2),f=j[0],v=j[1],g=function(e){return function(i){return l.updateCellLinks(t,n,i?e:void 0,!1)}},x=function(e){return function(i){var r=t.row[n];if("number"===typeof r)throw new Error("Can't not link a number \"".concat(r,'" to an entity'));return l.updateColumnLinks(b.get(t.table),n,r,i?e:void 0)}},y=t.links[n]||[],m=[];if(y.length>0){var I,w=Object(h.a)(y[0].candidateEntities.slice(0,a));try{var k=function(){var e=I.value,t=e.entityId===y[0].entityId?i.correctCandidateEntity:i.candidateEntity;m.push(Object(fe.jsx)("div",{children:Object(fe.jsxs)(ke.b,{size:4,children:[Object(fe.jsx)(_n,{icon:nt.a,selected:y[0].entityId===e.entityId,onChange:g(e.entityId)}),Object(fe.jsx)(_n,{icon:nt.b,selected:y[0].entityId===e.entityId,onChange:x(e.entityId)}),Object(fe.jsx)(rn,{entityId:e.entityId,render:function(e,n){return Object(fe.jsx)(On,{entity:e,settings:n,children:Object(fe.jsx)($t,{nolink:!0,entity:e,className:t})})}}),Object(fe.jsxs)("span",{className:t,children:["(",Object(fe.jsx)(Pn,{value:e.probability,fractionDigits:3}),")"]})]})},e.entityId))};for(w.s();!(I=w.n()).done;)k()}catch(L){w.e(L)}finally{w.f()}var S=y[0].candidateEntities.findIndex((function(e){return e.entityId===y[0].entityId}));if(-1!==S&&S>=a){var C=y[0].candidateEntities[S];m.push(Object(fe.jsx)("div",{children:Object(fe.jsxs)(ke.b,{size:4,children:[Object(fe.jsx)(_n,{icon:nt.a,selected:y[0].entityId===C.entityId,onChange:g(C.entityId)}),Object(fe.jsx)(_n,{icon:nt.b,selected:y[0].entityId===C.entityId,onChange:x(C.entityId)}),Object(fe.jsx)(rn,{entityId:C.entityId,render:function(e,t){return Object(fe.jsxs)("span",{className:i.correctCandidateEntity,children:["(",S,")\xa0",Object(fe.jsx)(On,{entity:e,settings:t,children:Object(fe.jsx)($t,{nolink:!0,entity:e})})]})}}),Object(fe.jsxs)("span",{className:i.correctCandidateEntity,children:["(",Object(fe.jsx)(Pn,{value:C.probability,fractionDigits:3}),")"]})]})},C.entityId))}y[0].candidateEntities.length>a&&m.push(Object(fe.jsx)("div",{children:Object(fe.jsx)(oe.a.Text,{className:i.candidateEntitySeeMore,onClick:function(){return v(!f)},children:"See more"})},"see-more"))}var E=y.length>0&&y[0].entityId===N.NIL_ENTITY?i.correctCandidateEntity:i.candidateEntity;m.push(Object(fe.jsx)("div",{className:E,children:Object(fe.jsxs)(ke.b,{size:4,children:[Object(fe.jsx)(_n,{icon:nt.a,selected:y.length>0&&y[0].entityId===N.NIL_ENTITY,onChange:g(N.NIL_ENTITY)}),Object(fe.jsx)(_n,{icon:nt.b,selected:y.length>0&&y[0].entityId===N.NIL_ENTITY,onChange:x(N.NIL_ENTITY)}),Object(fe.jsx)(rn,{entityId:N.NIL_ENTITY,render:function(e,t){return Object(fe.jsx)(On,{entity:e,settings:t,children:Object(fe.jsx)($t,{nolink:!0,entity:e,className:E})})}})]})},"nil-entity")),m.push(Object(fe.jsx)("div",{className:i.candidateEntity,children:Object(fe.jsxs)(ke.b,{size:4,style:{cursor:"pointer"},onClick:function(){var e=Object(fe.jsx)(Ke,{onSelect:function(e){g(e)(!0).then((function(){pe.a.destroyAll()}))}});pe.a.info({title:Object(fe.jsx)("span",{style:{marginBottom:16,display:"inline-block"},children:"Search Entity"}),content:e,bodyStyle:{margin:-8},okButtonProps:{style:{display:"none"}},maskClosable:!0,mask:!0})},children:[Object(fe.jsx)(_n,{icon:nt.d}),"Create"]})},"new-entity"));var T=[{dataIndex:"id",title:"Entity",render:function(e){return Object(fe.jsx)(rn,{entityId:e,render:function(e,t){return Object(fe.jsx)(On,{entity:e,settings:t,children:Object(fe.jsx)($t,{nolink:!0,entity:e})})}})}},{dataIndex:"score",title:"Score",render:function(e){return Object(fe.jsx)(Pn,{value:e,fractionDigits:5})}},{title:"action",render:function(){return Object(fe.jsx)(ke.b,{size:4,children:Object(fe.jsx)(ce.a,{children:"Select"})})}}];return Object(fe.jsxs)(s.a.Fragment,{children:[m,Object(fe.jsx)(pe.a,{title:"Candidate Entities",visible:f,style:{top:20},bodyStyle:{padding:0},width:"60%",onOk:function(){return v(!1)},onCancel:function(){return v(!1)},children:Object(fe.jsx)(ye.a,{defaultSize:"small",bordered:!0,search:!1,pagination:{pageSize:20,pageSizeOptions:["20","50","100","200","500","1000"]},rowKey:"id",columns:T,request:function(){var e=Object(u.a)(O.a.mark((function e(t,n,i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({total:y.length>0?y[0].candidateEntities.length:0,success:!0,data:0===y.length?[]:y[0].candidateEntities.slice((t.current-1)*t.pageSize,t.current*t.pageSize).map((function(e,t){return{id:e.entityId,score:e.probability}}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}()})})]})}))),Rn={link:{textDecoration:"underline","&:hover":{textDecoration:"underline"}},noEntityLink:{color:ue.g[5],"&:hover":{color:ue.g[5]}}},An=Object(he.a)(Rn)(Object(de.a)((function(e){var t=e.cell,n=e.record,i=e.index,r=e.classes,o=e.topK,c=void 0===o?3:o,s=ie().uiSettings,l=n.links[i]||[],d=l.flatMap((function(e,n){var i=0===n?t.substring(0,e.start):t.substring(l[n-1].end,e.start),o=t.substring(e.start,e.end),c=void 0;void 0!==e.entityId&&(c=function(){vn(e.entityId)});var s=void 0===e.url&&void 0===e.entityId?o:Object(fe.jsx)(a.c,{href:e.url,openInNewPage:!0,dangerouslySetInnerHTML:{__html:""===o.trim()?"&blank;":o},className:r.link+(void 0===e.entityId||e.entityId===N.NIL_ENTITY?" "+r.noEntityLink:""),style:null===e.entityId?{color:"#aaa"}:{},onCtrlClick:c},n);return void 0===e.entityId?[i,s]:[i,Object(fe.jsx)(rn,{entityId:e.entityId,render:function(e,t){return Object(fe.jsx)(On,{entity:e,zIndex:500,settings:t,children:s})},renderNotFound:function(){return Object(fe.jsx)("span",{className:r.noEntityLink,children:s})}},n)]}));return 0===l.length?d.push(t):d.push(t.substring(l[l.length-1].end)),Object(fe.jsxs)("div",{children:[d,s.table.showEntityLinkingEditor&&"number"!==typeof n.row[i]?Object(fe.jsx)(Fn,{record:n,index:i,topK:c}):null]})}))),zn=function(){function e(t,n){var i=this;Object(b.a)(this,e),this.type2op={},this.selectNil=!1,this.selectUnlinked=!1,this.includeCandidateEntities=!0,this.columnIndex=void 0,this.onChange=void 0,this.addTypes=function(e){var t,n=Object(h.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;i.type2op[r]="null"}}catch(a){n.e(a)}finally{n.f()}},this.setIncludeCandidateEntities=function(e){i.includeCandidateEntities!==e&&(i.includeCandidateEntities=e,i.onChange())},this.setSelectNil=function(e){i.selectNil!==e&&(i.selectNil=e,i.onChange())},this.setSelectUnlinked=function(e){i.selectUnlinked!==e&&(i.selectUnlinked=e,i.onChange())},this.toggleAllType=function(e,t){var n=!1;if(t)for(var r in i.type2op)i.type2op[r]!==e&&(i.type2op[r]=e,n=!0);else for(var a in i.type2op)i.type2op[a]===e&&(i.type2op[a]="null",n=!0);n&&i.onChange()},this.setTypeOp=function(e,t){i.type2op[e]!==t&&(i.type2op[e]=t,i.onChange())},this.hasAnyOp=function(e){for(var t in i.type2op)if(i.type2op[t]===e)return!0;return!1},this.hasAllOp=function(e){for(var t in i.type2op)if(i.type2op[t]!==e)return!1;return!0},this.getFilterExec=function(e,t){var n=[],r=[];for(var a in i.type2op)"include"===i.type2op[a]?n.push(a):"exclude"===i.type2op[a]&&r.push(a);return function(){var a=Object(u.a)(O.a.mark((function a(o){var c,s,l,d,u,b,p,j,f,v,g,x;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i.hasFilter){a.next=2;break}return a.abrupt("return",!0);case 2:if(!i.selectNil&&!i.selectUnlinked){a.next=23;break}c=Object(h.a)(o.links[i.columnIndex]||[]),a.prev=4,c.s();case 6:if((s=c.n()).done){a.next=12;break}if(l=s.value,!(i.selectNil&&l.entityId===N.NIL_ENTITY||i.selectUnlinked&&void 0===l.entityId)){a.next=10;break}return a.abrupt("return",!0);case 10:a.next=6;break;case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(4),c.e(a.t0);case 17:return a.prev=17,c.f(),a.finish(17);case 20:if(!i.selectUnlinked||0!==(o.links[i.columnIndex]||[]).length){a.next=22;break}return a.abrupt("return",!0);case 22:return a.abrupt("return",!1);case 23:d=new Set,u=Object(h.a)(o.links[i.columnIndex]||[]);try{for(u.s();!(b=u.n()).done;)if((p=b.value).entityId!==N.NIL_ENTITY&&void 0!==p.entityId&&d.add(p.entityId),i.includeCandidateEntities){j=Object(h.a)(p.candidateEntities);try{for(j.s();!(f=j.n()).done;)v=f.value,d.add(v.entityId)}catch(O){j.e(O)}finally{j.f()}}}catch(O){u.e(O)}finally{u.f()}if(0!==d.size){a.next=28;break}return a.abrupt("return",!1);case 28:return a.next=30,e.fetchByIds(Array.from(d));case 30:return g=a.sent,a.next=33,t.fetchByIds(Object.values(g).flatMap((function(e){var t=N.instanceof(e.uri);if(void 0===t||void 0===e.properties[t])return[];var n,i=[],r=Object(h.a)(e.properties[t]);try{for(r.s();!(n=r.n()).done;){var a=n.value;"entityid"===a.value.type&&i.push(a.value.value)}}catch(O){r.e(O)}finally{r.f()}return i})));case 33:return x=a.sent,a.abrupt("return",(0===n.length||Object.values(x).some((function(e){return n.some((function(t){return e.id===t||e.parentsClosure.has(t)}))})))&&(0===r.length||!Object.values(x).some((function(e){return r.some((function(t){return e.id===t||e.parentsClosure.has(t)}))}))));case 35:case"end":return a.stop()}}),a,null,[[4,14,17,20]])})));return function(e){return a.apply(this,arguments)}}()},this.columnIndex=t,this.onChange=n,Object(y.o)(this,{type2op:y.p,selectNil:y.p,selectUnlinked:y.p,includeCandidateEntities:y.p,hasFilter:y.g,addTypes:y.f,setSelectNil:y.f,setSelectUnlinked:y.f,setIncludeCandidateEntities:y.f,toggleAllType:y.f,setTypeOp:y.f})}return Object(p.a)(e,[{key:"hasFilter",get:function(){for(var e in this.type2op)if("null"!==this.type2op[e])return!0;return this.selectNil||this.selectUnlinked}}]),e}(),Mn=Object(p.a)((function e(t,n){var i=this;Object(b.a)(this,e),this.columnFilters=[],this.onChange=function(e){},this.setOnChange=function(e){i.onChange=e},this.handleChange=function(){i.onChange(i)},this.hasFilter=function(){return i.columnFilters.some((function(e){return e.hasFilter}))},this.filter=function(){var e=Object(u.a)(O.a.mark((function e(t,n,r){var a,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.columnFilters.map((function(e){return e.getFilterExec(n,r)})),e.next=3,Promise.all(t.map((function(e){return Promise.all(a.map((function(t){return t(e)}))).then((function(e){return e.every((function(e){return e}))}))})));case 3:return o=e.sent,e.abrupt("return",t.filter((function(e,t){return o[t]})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),void 0!==n&&(this.onChange=n);for(var r=0;r<t;r++)this.columnFilters.push(new zn(r,(function(){i.handleChange()})));Object(y.o)(this,{columnFilters:y.p,setOnChange:y.f})})),Un={table:{width:"100%","& div.ant-table-container":{border:"1px solid #bbb",borderRadius:4,borderLeft:"1px solid #bbb !important"},"& div.ant-card-body":{paddingLeft:0,paddingRight:0},"& th":{fontWeight:600},"& .ant-table-cell":{verticalAlign:"top"}}},Hn=Object(he.a)(Un)(Object(de.a)(Object(c.forwardRef)((function(e,t){var n=e.table,i=e.query,r=e.classes,o=e.toolBarRender,s=e.showRowIndex,l=void 0!==s&&s,h=Object(c.useRef)(),b=Object(c.useState)(new Mn(n.columns.length,(function(e){var t;null===(t=h.current)||void 0===t||t.reload(!0)}))),p=Object(d.a)(b,2),j=p[0];p[1];Object(c.useImperativeHandle)(t,(function(){return{reload:function(){var e;null===(e=h.current)||void 0===e||e.reload()}}}));var f=n.columns.map((function(e,t){return{dataIndex:["row",t],title:n.columns[t],render:function(e,n){return Object(fe.jsx)(An,{cell:e,record:n,index:t})},filterDropdown:Object(fe.jsx)(Tn,{table:n,columnIndex:t,filter:j.columnFilters[t]}),filterIcon:Object(fe.jsx)(Jt.a,{style:{color:j.columnFilters[t].hasFilter?"#1890ff":void 0}})}}));return l&&f.splice(0,0,{title:Object(fe.jsx)(oe.a.Text,{type:"secondary",disabled:!0,children:"#"}),dataIndex:"index"}),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ye.a,{actionRef:h,className:r.table,defaultSize:"small",bordered:!0,params:{filter:j},request:function(){var e=Object(u.a)(O.a.mark((function e(t,n,r){var a,o,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t.pageSize,(t.current-1)*t.pageSize,t.filter);case 2:return a=e.sent,o=a.rows,c=a.total,e.abrupt("return",{data:o,success:!0,total:c});case 6:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),search:!1,pagination:{pageSize:5,pageSizeOptions:["5","10","20","50","100","200","500","1000"]},headerTitle:void 0!==n.contextPage.url?Object(fe.jsx)(a.c,{href:n.contextPage.url,openInNewPage:!0,children:n.name}):n.name,toolBarRender:o,rowKey:"index",columns:f}),Object(fe.jsx)(Vn,{table:n})]})})))),Vn=function(e){var t=e.table,n=[["Description",t.description]];void 0!==t.contextPage.url?n.push(["From website",Object(fe.jsx)(a.c,{href:t.contextPage.url,openInNewPage:!0,children:t.contextPage.title})]):n.push(["From website","N/A"]),n.push(["Associated Entity",void 0!==t.contextPage.entityId?Object(fe.jsx)(rn,{entityId:t.contextPage.entityId,render:function(e,t){return Object(fe.jsx)(On,{entity:e,zIndex:500,settings:t,children:Object(fe.jsx)($t,{entity:e,onCtrlClick:function(){vn({entity:e,settings:t})}})})},renderNotFound:function(){return Object(fe.jsxs)("span",{children:["`Entity $",t.contextPage.entityId," does not exist`"]})}}):"N/A"]);var i=(t.contextHierarchy||[]).flatMap((function(e,t){return 0===e.level&&0===e.heading.trim().length&&e.contentBefore.every(Y)&&0===e.contentAfter.length?[]:[Object(fe.jsx)("p",{children:Object(fe.jsxs)("b",{children:["#".repeat(e.level)," ",e.heading]})},"".concat(t,"-head"))].concat(qn("".concat(t,"-before"),e.contentBefore)).concat(qn("".concat(t,"-after"),e.contentAfter))}));return n.push(["Content Hierarchy",i.length>0?Object(fe.jsx)("div",{children:i}):"N/A"]),Object(fe.jsx)(Ue.b,{title:"Table Info",size:"small",children:n.map((function(e){var t=Object(d.a)(e,2),n=t[0],i=t[1];return Object(fe.jsx)(Ue.b.Item,{label:n,children:i},n)}))})},qn=function(e,t){var n,i=[[]],r=Object(h.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;Y(a)?i.push([]):i[i.length-1].push(a.value)}}catch(o){r.e(o)}finally{r.f()}return i.filter((function(e){return e.length>0})).map((function(t,n){return Object(fe.jsx)("p",{children:t},"".concat(e,"-").concat(n))}))},Wn=n(854);var Kn=function(e){var t=e.project||new H(0,"",""),n=function(e){var t=ie().tableStore,n=50,i=ri.table.useQueryParams(),r=null===i?"":i.query,a=Object(c.useMemo)((function(){return""!==r?t.decodeWhereQuery(r):{}}),[t,r]),o=Object(c.useState)({tableId:-1,tableIndex:-1,query:"",records:[],leftOffset:0,total:0,hasPrev:!1,hasNext:!1,allLeft:!1,allRight:!1,version:0}),s=Object(d.a)(o,2),l=s[0],h=s[1];Object(c.useEffect)((function(){var i=!0,o=function(){var o=Object(u.a)(O.a.mark((function o(){var c,s,u,b,p,j,f,v,g;return O.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c=we.a.sortedIndex(l.records,e),l.query===r&&l.records[c]===e){o.next=13;break}return o.next=5,Promise.all([t.query({limit:n,offset:0,fields:["id"],conditions:Object(m.a)(Object(m.a)({},a),{},{id:{op:"gte",value:e}})}),t.query({limit:n,offset:0,fields:["id"],conditions:Object(m.a)(Object(m.a)({},a),{},{id:{op:"lt",value:e}})})]);case 5:u=o.sent,b=Object(d.a)(u,2),p=b[0],j=b[1],f=j.records.map((function(e){return e.id})).concat(p.records.map((function(e){return e.id}))),s={tableIndex:j.records.length,records:f,total:j.total+p.total,leftOffset:j.total-j.records.length,allLeft:j.total<=n,allRight:p.total<=n,hasPrev:j.records.length>0,hasNext:p.records.length>1},o.next=28;break;case 13:if(0!==c||l.allLeft){o.next=20;break}return o.next=16,t.query({limit:n,offset:0,fields:["id"],conditions:Object(m.a)(Object(m.a)({},a),{},{id:{op:"lt",value:e}})});case 16:v=o.sent,s={tableIndex:v.records.length,leftOffset:v.total-v.records.length,records:v.records.map((function(e){return e.id})).concat(l.records),allLeft:v.total<=n,hasPrev:v.records.length>0},o.next=28;break;case 20:if(c!==l.records.length-1||l.allRight){o.next=27;break}return o.next=23,t.query({limit:n,offset:0,fields:["id"],conditions:Object(m.a)(Object(m.a)({},a),{},{id:{op:"gt",value:e}})});case 23:g=o.sent,s={tableIndex:c,records:l.records.concat(g.records.map((function(e){return e.id}))),allRight:g.total<=n,hasNext:g.records.length>0},o.next=28;break;case 27:s={tableIndex:c,hasNext:c<l.records.length-1,hasPrev:c>0};case 28:i&&h(Object(m.a)(Object(m.a)(Object(m.a)({},l),s),{},{version:l.version+1,query:r,tableId:e}));case 29:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();return o(),function(){i=!1}}),[e,r]);var b=function(t){if(e===l.tableId){var n=l.records[l.tableIndex+t];void 0!==n&&ri.table.path({tableId:n},{query:r}).open()}};return{toPreviousTable:function(){b(-1)},toNextTable:function(){b(1)},navState:l}}(e.table.id),i=n.navState,r=n.toNextTable,o=n.toPreviousTable;return Object(ct.a)("b",o,[e.table.id,i.version]),Object(ct.a)("n",r,[e.table.id,i.version]),Object(fe.jsx)(Wn.a,{onBack:function(){return a.q.push(ri.project.getURL({projectId:e.table.project}))},title:Object(fe.jsxs)(ke.b,{children:[Object(fe.jsx)("span",{style:{fontWeight:500},children:"Table "}),Object(fe.jsx)(Dn,{title:"copied",ms:500,children:Object(fe.jsx)("span",{style:{color:"#237804",textDecoration:"underline",cursor:"pointer"},onClick:function(){return navigator.clipboard.writeText(e.table.name)},children:e.table.name})})]},"title"),subTitle:Object(fe.jsxs)(ke.b,{children:[Object(fe.jsxs)("span",{children:["(Project ",Object(fe.jsx)("b",{children:t.name}),")"]}),Object(fe.jsxs)("span",{className:"ml-2",children:["Position:"," ",Object(fe.jsxs)("b",{children:[" ",i.leftOffset+i.tableIndex+1,"/",i.total]})]})]},"sub-title"),extra:[Object(fe.jsx)(ce.a,{onClick:o,disabled:!i.hasPrev,children:"Previous Table (B)"},"prev"),Object(fe.jsx)(ce.a,{onClick:r,disabled:!i.hasNext,children:"Next Table (N)"},"next")]})},Yn=Object(he.a)({table:{marginTop:8,"& div.ant-table-container":{border:"1px solid #bbb",borderRadius:4,borderLeft:"1px solid #bbb !important"}},container:{marginLeft:24,marginRight:24}})(Object(de.a)((function(e){var t=e.classes,n=ie(),i=n.projectStore,r=n.tableStore,o=n.tableRowStore,l=n.semanticModelStore,h=(n.assistantService,n.classStore),b=n.entityStore,p=ri.table.useURLParams().tableId,j=function(e){var t=ie(),n=t.tableStore,i=t.semanticModelStore,r=Object(c.useState)(-1),a=Object(d.a)(r,2),o=a[0],s=a[1],l=Object(c.useState)(!1),u=Object(d.a)(l,2),h=u[0],b=u[1],p=Object(c.useState)(0),j=Object(d.a)(p,2),f=j[0],v=j[1],g=-1===o||e===o;e!==o&&(s(e),b(!1),v(0));Object(c.useEffect)((function(){var t=!0;return i.hasByTable(e)||i.fetch({limit:1e3,offset:0,conditions:{table:e}}).then((function(){t&&b(!0)})),function(){t=!1}}),[i,e]);var O=n.get(e);if(!g||void 0===O||null===O||!i.hasByTable(e)&&!h)return{index:f,sms:[],setIndex:v};var x=i.findByTable(e),y=i.getCreateDraftsByTable(O);if(f>=x.length+y.length){var m=i.getNewCreateDraftId(O),I=D.getDefaultDraftSemanticModel(m,"sm-".concat(x.length),O);i.setCreateDraft(I),y.push(I)}f<x.length?x[f]:y[f-x.length];return{sms:x.concat(y),index:f,setIndex:v}}(p),f=j.sms,v=j.index,g=j.setIndex,x=Object(c.useRef)(null),y=Object(c.useRef)(null);Object(c.useEffect)((function(){r.fetchById(p).then((function(e){void 0!==e&&i.fetchById(e.project)}))}),[r,i,l,p]);var m=r.get(p);return null===m?Object(fe.jsx)(a.h,{}):void 0===m||0===f.length?Object(fe.jsx)(a.e,{}):Object(fe.jsxs)(s.a.Fragment,{children:[Object(fe.jsx)(Kn,{project:i.get(m.project),table:m}),Object(fe.jsx)("div",{className:t.container,children:Object(fe.jsxs)(ke.b,{direction:"vertical",size:8,children:[Object(fe.jsx)(gt,{graphRef:y,tableRef:x,table:m,semanticmodel:{sms:f,index:v,setIndex:g}}),Object(fe.jsx)(Kt,{ref:y,table:m,sm:f[v]},"sm-".concat(p)),Object(fe.jsx)(Hn,{ref:x,toolBarRender:!1,table:m,query:function(){var e=Object(u.a)(O.a.mark((function e(t,n,i){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.hasFilter()){e.next=5;break}return e.next=3,o.fetchByTable(m,n,t);case 3:return r=e.sent,e.abrupt("return",{rows:r,total:m.size});case 5:return e.next=7,o.fetchByTable(m,0,m.size);case 7:return a=e.sent,e.next=10,i.filter(a,b,h);case 10:return c=e.sent,e.abrupt("return",{rows:c.slice(n,n+t),total:c.length});case 12:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),showRowIndex:!0},"tbl-".concat(p)),Object(fe.jsx)(Je,{})]})})]})})));var Jn=n(221),Gn=["children"],Qn={centerNavBar:{justifyContent:"center",boxShadow:"0 2px 8px #f0f1f2"},leftNavBar:{"& .logo::after":{borderBottom:"none !important",transition:"none !important"},"& .logo:hover::after":{borderBottom:"none !important",transition:"none !important"},"& .logo img":{height:24,borderRadius:4,marginTop:-2},paddingLeft:24,paddingRight:24,boxShadow:"0 2px 8px #f0f1f2"}},$n=(Object(he.a)(Qn)((function(e){var t=e.classes,n=e.menus,i=e.routes,r=e.className,o=e.style,c=e.isFirstItemLogo,s=Object(Jn.e)(),l=Object.keys(n).map((function(e,t){return Xn(e,!0===c&&0===t?"logo":"",n[e])})),d=Object(a.p)(s,i);return Object(fe.jsx)(rt.a,{mode:"horizontal",className:t.centerNavBar+(void 0!==r?" "+r:""),style:o,onClick:function(e){i[e.key].path({},{}).open()},selectedKeys:void 0!==d?[d]:void 0,children:l})})),Object(he.a)(Qn)((function(e){var t=e.classes,n=e.menus,i=e.routes,r=e.className,o=e.style,c=e.isFirstItemLogo,s=Object(Jn.e)(),l=Object.keys(n).map((function(e,t){return Xn(e,!0===c&&0===t?"logo":"",n[e])})),d=Object(a.p)(s,i);return Object(fe.jsx)(rt.a,{mode:"horizontal",className:t.leftNavBar+(void 0!==r?" "+r:""),style:o,onClick:function(e){i[e.key].path({},{}).open()},selectedKeys:void 0!==d?[d]:void 0,children:l})})));function Xn(e,t,n){var i,r;if("string"===typeof n)i=n;else if(s.a.isValidElement(n))i=n;else{var a=n;i=a.children,r=Object(Gt.a)(a,Gn)}return Object(fe.jsx)(rt.a.Item,Object(m.a)(Object(m.a)({className:t},r),{},{children:i}),e)}var Zn=n.p+"static/media/logo.e35779db.png",ei=n(865),ti=n(866),ni=n(857),ii=function(){return Object(fe.jsx)("h1",{children:"Not supposed to see this page"})},ri={project:new a.g({component:ze,urlSchema:{projectId:"number"},pathDef:"/projects/:projectId"}),table:new a.j({component:Yn,urlSchema:{tableId:"number"},querySchema:{query:"string"},pathDef:"/tables/:tableId"}),tableExportModel:new a.j({component:ii,urlSchema:{tableId:"number"},querySchema:{attachment:"optionalboolean"},pathDef:"/api/table/:tableId/export-models"}),tableExportData:new a.j({component:ii,urlSchema:{tableId:"number"},querySchema:{attachment:"optionalboolean"},pathDef:"/api/table/:tableId/export"}),settings:new a.f({component:function(){return Object(fe.jsx)(re.a,{gutter:16,children:Object(fe.jsx)(ae.a,{className:"gutter-row",span:24})})},pathDef:"/settings",exact:!0}),upload:new a.f({component:Oe,pathDef:"/upload",exact:!0}),projects:new a.f({component:Oe,pathDef:"/projects",exact:!0}),home:new a.f({component:Oe,pathDef:"/",exact:!0})};window._routes=ri,Object(a.o)(ri,(function(e){return function(t){var n=s.a.createElement(e,t);return Object(fe.jsxs)(ke.b,{direction:"vertical",style:{width:"100%"},children:[Object(fe.jsx)($n,{menus:{home:Object(fe.jsx)("img",{src:Zn,alt:"logo"}),projects:{icon:Object(fe.jsx)(ei.a,{}),children:"Projects"},upload:{icon:Object(fe.jsx)(ti.a,{}),children:"Upload"},settings:{icon:Object(fe.jsx)(ni.a,{}),children:"Settings"}},routes:ri,isFirstItemLogo:!0}),Object(fe.jsx)("div",{className:"wide-container",children:n})]})}}),["table"]);var ai=n(498),oi=n.n(ai),ci=n(17);te.uiSettings.fetchSettings().then((function(){r.a.render(Object(fe.jsx)(ne.Provider,{value:te,children:Object(fe.jsx)(ci.a,{locale:oi.a,children:Object(fe.jsx)(a.a,{enUSLocale:!0,routes:ri})})}),document.getElementById("root"))})),o()}},[[830,1,2]]]);
//# sourceMappingURL=main.a7f52adf.chunk.js.map