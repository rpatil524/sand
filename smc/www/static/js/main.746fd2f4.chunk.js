(this.webpackJsonpsmc=this.webpackJsonpsmc||[]).push([[0],{557:function(e,t,n){},862:function(e,t,n){"use strict";n.r(t);var i=n(62),r=n.n(i),a=(n(557),n(58)),o=n(15),s=n.n(o),c=n(51),d=n(25),u=n(31),l=n(90),h=n.n(l),f=n(11),p=n(237),b=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{c(i.next(e))}catch(t){a(t)}}function s(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((i=i.apply(e,t||[])).next())}))},v=function(){function e(){Object(d.a)(this,e),this._value="updated",this.forbiddenStates=new Set,Object(f.o)(this,{_value:f.p,value:f.g})}return Object(u.a)(e,[{key:"value",get:function(){return this._value},set:function(e){this.forbiddenStates.has(e)||(this._value=e)}}]),e}(),j=function(){function e(t,n,i){var r=this;Object(d.a)(this,e),this.state=new v,this.records=new Map,this.ajaxErrorHandler=function(e){p.b.error("Error while talking with the server. Check console for more details.",10),console.error(e)},this.refetch=!0,this.fetch=Object(f.j)(s.a.mark((function e(t){var n,i,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.value="updating",e.next=4,this.query(t);case 4:n=e.sent,i=Object(c.a)(n.records);try{for(i.s();!(r=i.n()).done;)a=r.value,this.records.set(a.id,a),this.index(a)}catch(o){i.e(o)}finally{i.f()}return this.state.value="updated",e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(0),this.state.value="error",e.t0;case 15:case"end":return e.stop()}}),e,this,[[0,11]])}))),this.queryByName=function(e){return b(r,void 0,void 0,s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("".concat(this.remoteURL),{params:{q:e}});case 3:n=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),this.ajaxErrorHandler(t.t0),t.t0;case 10:return t.abrupt("return",{records:n.data.map(this.deserialize),total:n.data.total});case 11:case"end":return t.stop()}}),t,this,[[0,6]])})))},this.remoteURL=t,this.field2name=n||{},this.nameAndField=Object.entries(this.field2name).map((function(e){var t=Object(a.a)(e,2),n=t[0];return[t[1],n]})),this.name2field=Object.fromEntries(this.nameAndField),void 0!==i&&(this.refetch=i),Object(f.o)(this,{state:f.p,records:f.p,fetch:f.f,fetchOne:f.f,fetchById:f.f,set:f.f,list:f.g})}return Object(u.a)(e,[{key:"remoteSize",value:function(){return b(this,void 0,void 0,s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.query({limit:1});case 2:return e.abrupt("return",e.sent.total);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"fetchOne",value:function(e){return b(this,void 0,void 0,s.a.mark((function t(){var n,i,r=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.state.value="updating",e.limit=1,t.next=5,this.query(e);case 5:if(0!==(n=t.sent).records.length){t.next=9;break}return Object(f.q)((function(){r.state.value="updated"})),t.abrupt("return",void 0);case 9:return i=n.records[0],t.abrupt("return",Object(f.q)((function(){return r.records.set(i.id,i),r.index(i),r.state.value="updated",i})));case 13:if(t.prev=13,t.t0=t.catch(0),!t.t0.response||404!==t.t0.response.status){t.next=18;break}return Object(f.q)((function(){r.state.value="updated"})),t.abrupt("return",void 0);case 18:throw Object(f.q)((function(){r.state.value="error"})),this.ajaxErrorHandler(t.t0),t.t0;case 21:case"end":return t.stop()}}),t,this,[[0,13]])})))}},{key:"fetchById",value:function(e){return b(this,void 0,void 0,s.a.mark((function t(){var n,i,r=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.refetch||!this.has(e)){t.next=5;break}if(null!==(n=this.records.get(e))){t.next=4;break}return t.abrupt("return",Promise.resolve(void 0));case 4:return t.abrupt("return",Promise.resolve(n));case 5:return t.prev=5,this.state.value="updating",t.next=9,h.a.get("".concat(this.remoteURL,"/").concat(e));case 9:return i=t.sent,t.abrupt("return",Object(f.q)((function(){var e=r.deserialize(i.data);return r.records.set(e.id,e),r.index(e),r.state.value="updated",e})));case 13:if(t.prev=13,t.t0=t.catch(5),!t.t0.response||404!==t.t0.response.status){t.next=18;break}return Object(f.q)((function(){r.records.set(e,null),r.state.value="updated"})),t.abrupt("return",void 0);case 18:throw Object(f.q)((function(){r.state.value="error"})),this.ajaxErrorHandler(t.t0),t.t0;case 21:case"end":return t.stop()}}),t,this,[[5,13]])})))}},{key:"query",value:function(e){return b(this,void 0,void 0,s.a.mark((function t(){var n,i,r,o,c,d,u,l,f=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={limit:e.limit,offset:e.offset,unique:e.unique},void 0!==e.fields&&(n.fields=e.fields.map((function(e){return f.field2name[e]||e})).join(",")),void 0!==e.conditions)for(i=0,r=Object.entries(e.conditions);i<r.length;i++)o=Object(a.a)(r[i],2),c=o[0],d=o[1],c=this.field2name[c]||c,"object"===typeof d?"max"===d.op?n["".concat(c,"[").concat(d.op,"]")]=d.value.join(","):n["".concat(c,"[").concat(d.op,"]")]=d.value:n["".concat(c)]=d;return Array.isArray(e.sortedBy)?n.sorted_by=e.sortedBy.map((function(e){var t=f.field2name[e.field]||e.field;return"asc"===e.order?t:"-".concat(t)})).join(","):"object"===typeof e.sortedBy?(u=this.field2name[e.sortedBy.field]||e.sortedBy.field,n.sorted_by="asc"===e.sortedBy.order?u:"-".concat(u)):n.sorted_by=this.field2name[e.sortedBy]||e.sortedBy,void 0!==e.groupBy&&(n.group_by=e.groupBy.map((function(e){return f.field2name[e]||e})).join(",")),t.prev=5,t.next=8,h.a.get("".concat(this.remoteURL),{params:n});case 8:l=t.sent,t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(5),this.ajaxErrorHandler(t.t0),t.t0;case 15:return t.abrupt("return",{records:l.data.items.map(this.deserialize),total:l.data.total});case 16:case"end":return t.stop()}}),t,this,[[5,11]])})))}},{key:"has",value:function(e){return this.records.has(e)}},{key:"get",value:function(e){return this.records.get(e)}},{key:"set",value:function(e){this.records.set(e.id,e)}},{key:"iter",value:s.a.mark((function e(){var t,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(c.a)(this.records.values()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=10;break}if(null===(i=n.value)){e.next=8;break}return e.next=8,i;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])}))},{key:"list",get:function(){return Array.from(this.iter())}},{key:"filter",value:function(e){var t,n=[],i=Object(c.a)(this.records.values());try{for(i.s();!(t=i.n()).done;){var r=t.value;null!==r&&e(r)&&n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"groupBy",value:function(e,t){var n,i={},r=Object(c.a)(t);try{var a=function(){var t=n.value,r=e.map((function(e){return t[e]})).join("$");void 0===i[r]?i[r]=[t]:i[r].push(t)};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return Object.values(i)}},{key:"deserialize",value:function(e){if(this.nameAndField.length>0){var t,n=Object(c.a)(this.nameAndField);try{for(n.s();!(t=n.n()).done;){var i=Object(a.a)(t.value,2),r=i[0];e[i[1]]=e[r],delete e[r]}}catch(o){n.e(o)}finally{n.f()}}return e}},{key:"index",value:function(e){}},{key:"encodeWhereQuery",value:function(e){return btoa(JSON.stringify(e))}},{key:"decodeWhereQuery",value:function(e){return JSON.parse(atob(e))}}]),e}(),g=n(218),O=n(44),y=n(45),x=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{c(i.next(e))}catch(t){a(t)}}function s(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((i=i.apply(e,t||[])).next())}))},m=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(e,i,r){var a;return Object(d.a)(this,n),(a=t.call(this,e,i,r)).createDrafts=new Map,a.updateDrafts=new Map,a.createAJAXParams={URL:void 0,config:{}},a.onDeleteListeners=[],a.create=Object(f.j)(s.a.mark((function e(t){var n,i,r,a=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],e.prev=1,this.state.value="updating",e.next=5,h.a.post(this.createAJAXParams.URL||this.remoteURL,this.serializeCreateDraft(t),this.createAJAXParams.config);case 5:return i=e.sent,r=this.deserialize(i.data),this.records.set(r.id,r),this.index(r),n&&this.createDrafts.delete(t.draftID),this.state.value="updated",e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(1),this.state.value="error",this.ajaxErrorHandler(e.t0),e.t0;case 19:case"end":return e.stop()}}),e,this,[[1,14]])}))),a.update=Object(f.j)(s.a.mark((function e(t){var n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.value="updating",e.next=4,h.a.post("".concat(this.remoteURL,"/").concat(t.id),this.serializeUpdateDraft(t));case 4:return n=e.sent,i=t.toModel()||this.deserialize(n.data),t.markSaved(),this.records.set(i.id,i),this.index(i),this.state.value="updated",e.abrupt("return",i);case 13:throw e.prev=13,e.t0=e.catch(0),this.state.value="error",this.ajaxErrorHandler(e.t0),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,13]])}))),a.delete=Object(f.j)(s.a.mark((function e(t){var n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.value="updating",e.next=4,h.a.delete("".concat(this.remoteURL,"/").concat(t));case 4:this.deindex(t),this.records.delete(t),n=Object(c.a)(this.onDeleteListeners);try{for(n.s();!(i=n.n()).done;)(0,i.value)(t)}catch(r){n.e(r)}finally{n.f()}this.state.value="updated",e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(0),this.state.value="error",this.ajaxErrorHandler(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,this,[[0,11]])}))),Object(f.o)(Object(g.a)(a),{createDrafts:f.p,updateDrafts:f.p,create:f.f,update:f.f,delete:f.f,truncate:f.f,setCreateDraft:f.f,deleteCreateDraft:f.f,setUpdateDraft:f.f,deleteUpdateDraft:f.f}),a}return Object(u.a)(n,[{key:"addOnDeleteListener",value:function(e){this.onDeleteListeners.push(e)}},{key:"truncate",value:function(){return x(this,void 0,void 0,s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.value="updating",e.next=4,h.a.delete("".concat(this.remoteURL));case 4:Object(f.q)((function(){var e,n=Object(c.a)(t.records.keys());try{for(n.s();!(e=n.n()).done;){var i=e.value;t.deindex(i);var r,a=Object(c.a)(t.onDeleteListeners);try{for(a.s();!(r=a.n()).done;){(0,r.value)(i)}}catch(o){a.e(o)}finally{a.f()}}}catch(o){n.e(o)}finally{n.f()}t.records.clear(),t.state.value="updated"})),e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(0),Object(f.q)((function(){t.state.value="error"})),this.ajaxErrorHandler(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getCreateDraft",value:function(e){return this.createDrafts.get(e)}},{key:"setCreateDraft",value:function(e){this.createDrafts.set(e.draftID,e)}},{key:"deleteCreateDraft",value:function(e){this.createDrafts.delete(e)}},{key:"getUpdateDraft",value:function(e){return this.updateDrafts.get(e)}},{key:"setUpdateDraft",value:function(e){this.updateDrafts.set(e.id,e)}},{key:"deleteUpdateDraft",value:function(e){this.updateDrafts.delete(e)}},{key:"deindex",value:function(e){}}]),n}(j),w=(n(74),function(){function e(t,n){Object(d.a)(this,e),this.index=new Map,this.fkField=t,this.idField=n||"id",Object(f.o)(this,{index:f.p,add:f.f})}return Object(u.a)(e,[{key:"add",value:function(e){var t=e[this.fkField];this.index.has(t)||this.index.set(t,new Set),this.index.get(t).add(e[this.idField])}},{key:"remove",value:function(e){var t,n=e[this.fkField];null===(t=this.index.get(n))||void 0===t||t.delete(e[this.idField])}}]),e}()),k=function(){function e(t,n,i){Object(d.a)(this,e),this.index=new Map,this.fkField1=t,this.fkField2=n,this.idField=i||"id",Object(f.o)(this,{index:f.p,add:f.f})}return Object(u.a)(e,[{key:"add",value:function(e){var t=e[this.fkField1],n=e[this.fkField2];this.index.has(t)||this.index.set(t,new Map),this.index.get(t).set(n,e[this.idField])}},{key:"remove",value:function(e){var t=e[this.fkField1],n=e[this.fkField2];this.index.has(t)&&this.index.get(t).delete(n)}}]),e}(),I=n(10),S=n(883),E=n(128),L=Object(S.a)({root:{paddingTop:12,paddingBottom:4,textAlign:"center"},bordered:{border:"1px solid #ddd",borderRadius:4}})((function(e){var t=e.classes,n=e.size,i=void 0===n?"default":n,r=e.bordered,a=void 0!==r&&r,o=t.root;return a&&(o+=" ".concat(t.bordered)),Object(I.jsx)("div",Object.assign({className:o},{children:Object(I.jsx)(E.a,{tip:"Loading...",size:i},void 0)}),void 0)})),C=n(516),_=n(59),T=n(69),N=n(233),D="native"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PLATFORM?"native":"web",P=("native"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PLATFORM&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SERVER,n(124)),R=n(99),A=n(138),B=n(515),F=n(0),H=n.n(F);function z(e,t){B.a.confirm({title:e,okText:"Leave",okType:"primary",okButtonProps:{danger:!0},cancelText:"Stay",onOk:function(){t(!0)},onCancel:function(){t(!1)}})}var M="native"===D?Object(A.c)({getUserConfirmation:z}):Object(A.a)({getUserConfirmation:z}),U=function(){function e(t){var n=t.urlSchema,i=void 0===n?{}:n,r=t.querySchema,a=void 0===r?{}:r,o=t.component,s=t.pathDef,c=t.exact,u=void 0!==c&&c,l=t.strict,h=void 0!==l&&l;Object(d.a)(this,e),this.urlSchema=i,this.querySchema=a,this.pathDef=s,this.exact=u,this.strict=h,this.routeDef={path:s,exact:u,strict:h,component:o},this.component=o}return Object(u.a)(e,[{key:"getURL",value:function(e,t){var n=this.pathDef;if(null!==e)for(var i in e)n=n.replace(":".concat(i),e[i]);var r=new URLSearchParams(t).toString();return r.length>0&&(n="".concat(n,"?").concat(r)),n}},{key:"location",value:function(e,t){var n=this.pathDef;for(var i in e)n=n.replace(":".concat(i),e[i]);var r=new URLSearchParams(t).toString();return{pathname:n,search:r=r.length>0?"?".concat(r):r,hash:"",state:void 0}}},{key:"path",value:function(e,t){return new K(this,e,t)}},{key:"useURLParams",value:function(){var e=this,t=Object(N.e)();return Object(F.useMemo)((function(){return e.getURLArgs(t)}),[t.pathname])}},{key:"useQueryParams",value:function(){var e=this,t=Object(N.e)();return Object(F.useMemo)((function(){return e.getQueryArgs(t)}),[t.search])}},{key:"useParams",value:function(){return{url:this.useURLParams(),query:this.useQueryParams()}}},{key:"getURLArgs",value:function(e){var t=Object(N.d)(e.pathname,this.routeDef);return null===t?null:this.parse(t.params,this.urlSchema)}},{key:"getQueryArgs",value:function(e){var t=new URLSearchParams(e.search),n=this.parse(Object.fromEntries(t.entries()),this.querySchema);return null!==n&&Object.values(n).every((function(e){return void 0===e}))?null:n}},{key:"parse",value:function(e,t){for(var n={},i=0,r=Object.entries(t);i<r.length;i++){var o=Object(a.a)(r[i],2),s=o[0],c=o[1],d=e[s];switch(c){case"number":if(void 0===d)return null;if(n[s]=parseFloat(d),!Number.isFinite(n[s]))return null;break;case"boolean":if(void 0===d||"true"!==d||"false"!==d)return null;n[s]="true"===d;break;case"string":if(void 0===d)return null;n[s]=d;break;case"optionalnumber":if(void 0===d)continue;if(n[s]=parseFloat(d),!Number.isFinite(n[s]))return null;break;case"optionalboolean":if(void 0===d)continue;if("true"!==d||"false"!==d)return null;n[s]="true"===d;break;case"optionalstring":if(void 0===d)continue;n[s]=d}}return n}}]),e}(),q=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getURL",value:function(){return Object(P.a)(Object(R.a)(n.prototype),"getURL",this).call(this,{},{})}},{key:"location",value:function(){return Object(P.a)(Object(R.a)(n.prototype),"location",this).call(this,{},{})}},{key:"path",value:function(){return Object(P.a)(Object(R.a)(n.prototype),"path",this).call(this,{},{})}}]),n}(U),W=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getURL",value:function(e){return Object(P.a)(Object(R.a)(n.prototype),"getURL",this).call(this,e,{})}},{key:"location",value:function(e){return Object(P.a)(Object(R.a)(n.prototype),"location",this).call(this,e,{})}},{key:"path",value:function(e){return Object(P.a)(Object(R.a)(n.prototype),"path",this).call(this,e,{})}}]),n}(U),K=function(){function e(t,n,i){var r=this;Object(d.a)(this,e),this.mouseClickNavigationHandler=function(e){void 0!==e&&e.preventDefault(),void 0!==e&&(e.ctrlKey||e.metaKey)?(window.open(r.pathDef.getURL(r.urlArgs,r.queryArgs),"_blank"),window.focus()):M.push(r.pathDef.location(r.urlArgs,r.queryArgs))},this.pathDef=t,this.urlArgs=n,this.queryArgs=i}return Object(u.a)(e,[{key:"open",value:function(){M.push(this.pathDef.location(this.urlArgs,this.queryArgs))}}]),e}(),Q={internalHTMLLinkClickFnId:"window._routeAPIs.internalHTMLLinkClick",history:M,internalHTMLLinkClick:function(e){e.preventDefault();var t=e.target.getAttribute("href");e.ctrlKey||e.metaKey?(window.open(t,"_blank"),window.focus()):M.push(t)},goBack:function(){return M.goBack()},goForward:function(){return M.goForward()},openInternalLink:function(e){M.push(e)}};window._routeAPIs=Q;var V=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},J=function(e){var t=e.path,n=e.urlArgs,i=e.queryArgs,r=e.children,a=V(e,["path","urlArgs","queryArgs","children"]);return Object(I.jsx)("a",Object.assign({href:t.getURL(n,i),onClick:function(e){t.path(n,i).mouseClickNavigationHandler(e)}},a,{children:r}),void 0)},X=function(e){var t=e.href,n=e.openInNewPage,i=void 0!==n&&n,r=e.children,a=V(e,["href","openInNewPage","children"]);return Object(I.jsx)("a",Object.assign({href:t,target:i?"_blank":void 0,rel:"noopener noreferrer"},a,{children:r}),void 0)};function Y(e,t){for(var n=0,i=Object.entries(t);n<i.length;n++){var r=Object(a.a)(i[n],2),o=r[0],s=r[1];if(null!==Object(N.d)(e.pathname,s.routeDef))return o}}var G=new q({component:function(){return null},pathDef:"/"}).path().mouseClickNavigationHandler,$=function(){return Object(I.jsx)(C.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:Object(I.jsxs)(_.b,{children:[Object(I.jsx)(T.a,Object.assign({onClick:Q.goBack},{children:"Back"}),void 0),Object(I.jsx)(T.a,Object.assign({type:"primary",onClick:G},{children:"Home"}),void 0)]},void 0)},void 0)},Z=n(97),ee=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},te={centerNavBar:{justifyContent:"center",boxShadow:"0 2px 8px #f0f1f2"},leftNavBar:{"& .logo::after":{borderBottom:"none !important",transition:"none !important"},"& .logo:hover::after":{borderBottom:"none !important",transition:"none !important"},"& .logo img":{height:24,borderRadius:4,marginTop:-2},paddingLeft:24,paddingRight:24,boxShadow:"0 2px 8px #f0f1f2"}},ne=(Object(S.a)(te)((function(e){var t=e.classes,n=e.menus,i=e.routes,r=e.className,a=e.style,o=e.isFirstItemLogo,s=Object(N.e)(),c=Object.keys(n).map((function(e,t){return ie(e,!0===o&&0===t?"logo":"",n[e])})),d=Y(s,i);return Object(I.jsx)(Z.a,Object.assign({mode:"horizontal",className:t.centerNavBar+(void 0!==r?" "+r:""),style:a,onClick:function(e){i[e.key].path({},{}).open()},selectedKeys:void 0!==d?[d]:void 0},{children:c}),void 0)})),Object(S.a)(te)((function(e){var t=e.classes,n=e.menus,i=e.routes,r=e.className,a=e.style,o=e.isFirstItemLogo,s=Object(N.e)(),c=Object.keys(n).map((function(e,t){return ie(e,!0===o&&0===t?"logo":"",n[e])})),d=Y(s,i);return Object(I.jsx)(Z.a,Object.assign({mode:"horizontal",className:t.leftNavBar+(void 0!==r?" "+r:""),style:a,onClick:function(e){i[e.key].path({},{}).open()},selectedKeys:void 0!==d?[d]:void 0},{children:c}),void 0)})));function ie(e,t,n){var i,r;if("string"===typeof n)i=n;else if(H.a.isValidElement(n))i=n;else{var a=n;i=a.children,r=ee(a,["children"])}return Object(I.jsx)(Z.a.Item,Object.assign({className:t},r,{children:i}),e)}var re=n(498),ae=n.n(re),oe=n(14);function se(e){var t=e.enUSLocale,n=e.routes,i=Object(I.jsx)(N.b,Object.assign({history:M},{children:Object(I.jsx)("div",Object.assign({className:"app-body"},{children:Object(I.jsxs)(N.c,{children:[Object.entries(n).map((function(e){var t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(I.jsx)(N.a,Object.assign({},i.routeDef),n)})),Object(I.jsx)(N.a,{component:$},void 0)]},void 0)}),void 0)}),void 0);return!0===t?Object(I.jsx)(oe.b,Object.assign({locale:ae.a},{children:i}),void 0):i}var ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,892)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))},de=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PLATFORM,"native"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PLATFORM?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_SERVER:""),ue=function e(t,n,i){Object(d.a)(this,e),this.id=void 0,this.name=void 0,this.description=void 0,this.id=t,this.name=n,this.description=i,Object(f.o)(this,{id:f.p,name:f.p,description:f.p})},le=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){return Object(d.a)(this,n),t.call(this,"".concat(de,"/api/project"),void 0,!1)}return Object(u.a)(n,[{key:"deserialize",value:function(e){return new ue(e.id,e.name,e.description)}},{key:"serializeUpdateDraft",value:function(e){return{id:e.name,name:e.name,description:e.description}}},{key:"serializeCreateDraft",value:function(e){return{name:e.name,description:e.description}}}]),n}(m),he=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this,"".concat(de,"/api/tablerow"),void 0,!1)).tableIndex=new k("table","index"),e.findByTable=function(t,n,i){var r=e.tableIndex.index.get(t);if(void 0===r)return[];for(var a=[],o=0;o<i;o++){var s=r.get(o+n);if(void 0===s)break;a.push(e.records.get(s))}return a},e}return Object(u.a)(n,[{key:"index",value:function(e){this.tableIndex.add(e)}},{key:"deserialize",value:function(e){return Object.values(e.links).forEach((function(e){e.forEach((function(e){null!==e.entity&&(e.entityId=e.entity),e.candidate_entities.forEach((function(e){e.entityId=e.entity,delete e.entity})),e.candidateEntities=e.candidate_entities,delete e.entity_id,delete e.candidate_entities}))})),e}}]),n}(j),fe=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this,"".concat(de,"/api/table"),void 0,!1)).projectIndex=new w("project"),e.findByProject=function(t,n,i){return Array.from(e.projectIndex.index.get(t)||[]).map((function(t){return e.records.get(t)}))},e}return Object(u.a)(n,[{key:"deserialize",value:function(e){return e.contextPage=e.context_page,null!==e.contextPage&&void 0!==e.contextPage&&null!==e.contextPage.entity&&(e.contextPage.entityId=e.contextPage.entity,delete e.contextPage.entity),e.contextValues=e.context_values,e.contextTree=e.context_tree,delete e.context_tree,delete e.context_values,delete e.context_page,e}},{key:"index",value:function(e){this.projectIndex.add(e)}}]),n}(j),pe=n(49),be=function e(t){var n=this;Object(d.a)(this,e),this.counter={},this.id2num={},this.label=function(e){return"".concat(e.label," ").concat(n.id2num[e.id])},this.nextLabel=function(e,t){return"".concat(t," ").concat(n.counter[e]||1)},this.unlabel=function(e){return e.substring(0,e.lastIndexOf(" "))},this.add=function(e){void 0===n.counter[e.uri]&&(n.counter[e.uri]=1),n.id2num[e.id]=n.counter[e.uri],n.counter[e.uri]+=1};var i,r=Object(c.a)(t||[]);try{for(r.s();!(i=r.n()).done;){var a=i.value;"class_node"===a.nodetype&&(void 0===this.counter[a.uri]&&(this.counter[a.uri]=1),this.id2num[a.id]=this.counter[a.uri],this.counter[a.uri]+=1)}}catch(o){r.e(o)}finally{r.f()}},ve=function(){function e(t,n,i){var r=this;Object(d.a)(this,e),this.id=void 0,this.version=void 0,this.nodes=void 0,this.edges=void 0,this.stale=void 0,this.nodeId2Index={},this.column2nodeIndex={},this.uriCount=void 0,this.onSave=function(){r.stale=!1},this.node=function(e){return r.nodes[r.nodeId2Index[e]]},this.hasNode=function(e){return void 0!==r.nodeId2Index[e]},this.nodesByURI=function(e){return r.nodes.filter((function(t){return"class_node"===t.nodetype&&t.uri===e}))},this.nodeByColumnIndex=function(e){return r.nodes[r.column2nodeIndex[e]]},this.edge=function(e,t){return r.edges.filter((function(n){return n.source===e&&n.target===t}))[0]},this.hasEdge=function(e,t){return r.edges.filter((function(n){return n.source===e&&n.target===t})).length>0},this.incomingEdges=function(e){return r.edges.filter((function(t){return t.target===e}))},this.outgoingEdges=function(e){return r.edges.filter((function(t){return t.source===e}))},this.nextNodeId=function(){for(var e=0;e<100*r.nodes.length;e++){var t="c-".concat(e);if(void 0===r.nodeId2Index[t])return t}throw new Error("Cannot find new id for a node")},this.findPathMax2hops=function(e,t){var n,i=[],a=r.outgoingEdges(e),o=Object(c.a)(a);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(s.target!==t){var d,u=Object(c.a)(r.outgoingEdges(s.target));try{for(u.s();!(d=u.n()).done;){var l=d.value;l.target===t&&i.push([s,l])}}catch(h){u.e(h)}finally{u.f()}}else i.push([s,void 0])}}catch(h){o.e(h)}finally{o.f()}return i},this.getClassIdOfColumnIndex=function(e){var t,n=r.incomingEdges(r.nodeByColumnIndex(e).id),i=Object(c.a)(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;if("http://www.w3.org/2000/01/rdf-schema#label"===a.uri){if(n.length>1)throw new Error("Invalid semantic model. An entity column has two incoming edges");return a.source}}}catch(o){i.e(o)}finally{i.f()}},this.getOutgoingProperties=function(e){var t,n=[],i=Object(c.a)(r.outgoingEdges(e));try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.node(a.target);if("class_node"===o.nodetype&&"http://wikiba.se/ontology#Statement"===o.uri){var s,d=Object(c.a)(r.outgoingEdges(a.target));try{for(d.s();!(s=d.n()).done;){var u=s.value;n.push([a,u])}}catch(l){d.e(l)}finally{d.f()}}else n.push([a,void 0])}}catch(l){i.e(l)}finally{i.f()}return n},this._removeNode=function(e){if(void 0!==r.nodeId2Index[e]&&void 0!==r.nodes[r.nodeId2Index[e]]){var t=r.nodeId2Index[e],n=r.nodes[t];if(!("data_node"===n.nodetype||"literal_node"===n.nodetype&&n.isInContext)){r.nodes[t]=void 0;var i,a=r.edges.filter((function(t){return t.source===e||t.target===e})),o=Object(c.a)(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;r._removeEdge(s.source,s.target)}}catch(d){o.e(d)}finally{o.f()}}}},this._removeEdge=function(e,t){for(var n=void 0,i=0,a=0,o=0;o<r.edges.length;o++){var s=r.edges[o];s.source===e&&s.target===t&&(n=o),s.source!==e&&s.target!==e||(i+=1),s.source!==t&&s.target!==t||(a+=1)}void 0!==n&&(r.edges.splice(n,1),1===i&&r._removeNode(e),1===a&&r._removeNode(t))},this.buildIndex=function(){r.nodeId2Index={},r.column2nodeIndex={};for(var e=0;e<r.nodes.length;e++){var t=r.nodes[e];r.nodeId2Index[t.id]=e,"data_node"===t.nodetype&&null!==t.columnIndex&&(r.column2nodeIndex[t.columnIndex]=e)}},this.id=t,this.version=0,this.nodes=n,this.edges=i,this.stale=!1,this.buildIndex(),this.uriCount=new be(this.nodes),Object(f.o)(this,{version:f.p,nodes:f.p,edges:f.p,stale:f.p,nodeId2Index:f.p,column2nodeIndex:f.p,uriCount:f.p,addColumnRelationship:f.f,upsertColumnType:f.f,upsertRelationship:f.f,addClassNode:f.f,addLiteralNode:f.f,removeNode:f.f,updateClassNode:f.f,updateDataNode:f.f,updateLiteralNode:f.f,addEdge:f.f,removeEdge:f.f,updateEdge:f.f})}return Object(u.a)(e,[{key:"toJS",value:function(){return{nodes:Object(f.r)(this.nodes),edges:Object(f.r)(this.edges),nodeId2Index:Object(f.r)(this.nodeId2Index)}}},{key:"addColumnRelationship",value:function(e,t,n){var i=this.nodeByColumnIndex(e),r=this.nodeByColumnIndex(t),a=this.incomingEdges(i.id);if(0===a.length)throw new Error("Cannot add link from a data node to another node");if(1!==a.length)throw new Error("The source column connects to multiple class nodes! Don't know the exact class node to choose");var o=this.incomingEdges(r.id);if(o.length>1)throw new Error("The target column connects to multiple class nodes! Don't know the exact class node to choose");var s=a[0].source,c=0===o.length?r.id:o[0].source;this.addEdge(Object(pe.a)(Object(pe.a)({},n),{},{source:s,target:c}))}},{key:"upsertColumnType",value:function(e,t){var n=this.nodeByColumnIndex(e),i=this.incomingEdges(n.id);if(i.length>1)throw new Error("The column connects to multiple class nodes! Don't know the exact class node to choose");if(0===i.length){var r=this.nextNodeId();this.addClassNode(Object(pe.a)(Object(pe.a)({},t),{},{id:r})),this.addEdge({source:r,target:n.id,uri:"http://www.w3.org/2000/01/rdf-schema#label",label:"rdfs:label",approximation:!1})}else{var a=i[0];this.updateClassNode(a.source,t),"http://www.w3.org/2000/01/rdf-schema#label"!==a.uri&&this.updateEdge(a.source,a.target,{uri:"http://www.w3.org/2000/01/rdf-schema#label",label:"rdfs:label",approximation:a.approximation})}}},{key:"upsertRelationship",value:function(e,t,n,i){var r=this.findPathMax2hops(e,t);if(0!==r.length){if(r.length>1)throw new Error("There are more one path between two nodes. Don't know which path to update it");var o=Object(a.a)(r[0],2),s=o[0],c=o[1];this.updateEdge(s.source,s.target,{uri:n.uri,label:n.label,approximation:!1}),void 0!==c&&this.updateEdge(c.source,c.target,{uri:i.uri,label:i.label,approximation:!1})}else if(n.uri===i.uri)this.addEdge({source:e,target:t,uri:n.uri,label:n.label,approximation:!1});else{var d=this.nextNodeId();this.addClassNode({id:d,uri:"http://wikiba.se/ontology#Statement",label:"wikibase:Statement",approximation:!1,nodetype:"class_node"}),this.addEdge({source:e,target:d,uri:n.uri,label:n.label,approximation:!1}),this.addEdge({source:d,target:t,uri:i.uri,label:i.label,approximation:!1})}}},{key:"addClassNode",value:function(e){if(void 0!==this.nodeId2Index[e.id])throw new Error("Duplicated id");this.nodeId2Index[e.id]=this.nodes.length,this.nodes.push(e),this.uriCount.add(e),this.version+=1,this.stale=!0}},{key:"addLiteralNode",value:function(e){if(void 0!==this.nodeId2Index[e.id])throw new Error("Duplicated id");this.nodeId2Index[e.id]=this.nodes.length,this.nodes.push(e),this.version+=1,this.stale=!0}},{key:"removeNode",value:function(e){this._removeNode(e),this.nodes=this.nodes.filter((function(e){return void 0!==e})),this.buildIndex(),this.version+=1,this.stale=!0,this.uriCount=new be(this.nodes)}},{key:"updateClassNode",value:function(e,t){var n=this.nodeId2Index[e],i=this.nodes[n];if("class_node"!==i.nodetype)throw new Error("Invalid node type. Expected class node but get ".concat(i.nodetype));Object.assign(i,t),this.version+=1,this.stale=!0,void 0!==t.uri&&(this.uriCount=new be(this.nodes))}},{key:"updateLiteralNode",value:function(e,t){var n=this.nodeId2Index[e],i=this.nodes[n];if("literal_node"!==i.nodetype)throw new Error("Invalid node type. Expected literal node but get ".concat(i.nodetype));Object.assign(i,t),this.version+=1,this.stale=!0}},{key:"updateDataNode",value:function(e,t){var n=this.nodeId2Index[e],i=this.nodes[n];if("data_node"!==i.nodetype)throw new Error("Invalid node type. Expected data node but get ".concat(i.nodetype));Object.assign(i,t),this.version+=1,this.stale=!0}},{key:"addEdge",value:function(e){if(this.edges.filter((function(t){return t.source===e.source&&t.target===e.target})).length>0)throw new Error("Cannot have more than one edge between two classes");this.edges.push(e),this.version+=1,this.stale=!0}},{key:"removeEdge",value:function(e,t){var n=this.nodes.length;this._removeEdge(e,t),this.nodes=this.nodes.filter((function(e){return void 0!==e})),this.nodes.length!==n&&(this.buildIndex(),this.uriCount=new be(this.nodes)),this.version+=1,this.stale=!0}},{key:"updateEdge",value:function(e,t,n){for(var i=0;i<this.edges.length;i++){var r=this.edges[i];r.source===e&&r.target===t&&(this.edges[i]=Object(pe.a)(Object(pe.a)({},this.edges[i]),n))}this.version=(this.version||0)+1,this.stale=!0}}]),e}(),je=function(){function e(t,n,i,r,a,o){Object(d.a)(this,e),this.id=void 0,this.description=void 0,this.version=void 0,this.graph=void 0,this.table=void 0,this.project=void 0,this.id=t,this.description=n,this.version=i,this.graph=r,this.table=a,this.project=o}return Object(u.a)(e,[{key:"isDraft",get:function(){return!1}},{key:"markSaved",value:function(){this.graph.onSave()}},{key:"toModel",value:function(){return this}}]),e}(),ge=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this,"".concat(de,"/api/semanticmodel"),void 0,!1)).tableIndex=new w("table"),e}return Object(u.a)(n,[{key:"findByTable",value:function(e){var t=this;return Array.from(this.tableIndex.index.get(e)||[]).map((function(e){return t.records.get(e)}))}},{key:"hasByTable",value:function(e){return this.tableIndex.index.has(e)}},{key:"deserialize",value:function(e){var t,n,i=(t=e.name,n=e.table,"".concat(n,":").concat(t)),r=e.data.nodes.map((function(e){var t=e.type;return delete e.type,e.nodetype=t,"data_node"===t?(e.columnIndex=e.column_index,delete e.column_index):"literal_node"===t&&(e.isInContext=e.is_in_context,delete e.is_in_context),e})),a=new ve(i,r,e.data.edges);return new je(i,e.description,e.version,a,e.table,e.project)}},{key:"serializeUpdateDraft",value:function(e){throw new Error("Method not implemented.")}},{key:"serializeCreateDraft",value:function(e){throw new Error("Method not implemented.")}},{key:"index",value:function(e){this.tableIndex.add(e)}}]),n}(m),Oe=function e(t,n,i,r,a){Object(d.a)(this,e),this.id=void 0,this.label=void 0,this.aliases=void 0,this.description=void 0,this.properties=void 0,this.id=t,this.label=n,this.aliases=i,this.description=r,this.properties=a,Object(f.o)(this,{id:f.p,label:f.p,aliases:f.p,description:f.p,properties:f.p})};Oe.id2uri=function(e){switch(e[0]){case"Q":return"https://www.wikidata.org/wiki/".concat(e);case"P":return"https://www.wikidata.org/wiki/Property:".concat(e);case"L":return"https://www.wikidata.org/wiki/Lexeme:".concat(e);default:return e}};var ye=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this,"".concat(de,"/api/entities"),void 0,!1)).fetchByIdQueue=void 0,e.fetchByIdQueue=new Map,e}return Object(u.a)(n,[{key:"serializeFetchById",value:function(e){var t=this;return new Promise((function(n,i){if(!t.fetchByIdQueue.has(e))return t.fetchByIdQueue.set(e,[]),t.fetchById(e).catch((function(n){var i,r=Object(c.a)(t.fetchByIdQueue.get(e)||[]);try{for(r.s();!(i=r.n()).done;){(0,i.value)(void 0,n)}}catch(a){r.e(a)}finally{r.f()}throw t.fetchByIdQueue.delete(e),n})).then((function(n){var i,r=Object(c.a)(t.fetchByIdQueue.get(e)||[]);try{for(r.s();!(i=r.n()).done;){(0,i.value)(n)}}catch(a){r.e(a)}finally{r.f()}return t.fetchByIdQueue.delete(e),n}));t.fetchByIdQueue.get(e).push((function(e,t){void 0!==t?i(t):n(e)}))}))}},{key:"deserialize",value:function(e){for(var t=0,n=Object.values(e.properties);t<n.length;t++){var i,r=n[t],a=Object(c.a)(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.qualifiersOrder=o.qualifiers_order,delete o.qualifiers_order}}catch(s){a.e(s)}finally{a.f()}}return e}}]),n}(j),xe={projectStore:new le,tableStore:new fe,tableRowStore:new he,semanticModelStore:new ge,entityStore:new ye};window._stores=xe;var me=Object(F.createContext)(xe);function we(){return H.a.useContext(me)}var ke=n(181),Ie=n(110),Se=n(513),Ee=n(886),Le=n(327),Ce=n(173),_e=Object(Ce.a)((function(){var e=we().projectStore;return Object(F.useEffect)((function(){e.fetch({limit:100,offset:0})}),[e]),Object(I.jsx)(H.a.Fragment,{children:Object(I.jsx)(ke.a,{gutter:16,children:Object(I.jsxs)(Ie.a,{className:"gutter-row",span:24,children:[Object(I.jsx)(Se.a.Title,{level:3,children:"Projects"}),Object(I.jsx)(Ee.b,{size:"small",bordered:!0,itemLayout:"horizontal",dataSource:e.list,renderItem:function(e,t){return Object(I.jsx)(Ee.b.Item,{children:Object(I.jsx)(Ee.b.Item.Meta,{avatar:Object(I.jsx)(Le.a,{shape:"square",size:"large",style:{marginTop:4,backgroundColor:["#f56a00","#7265e6","#1890ff","#00a2ae"][e.name.charCodeAt(0)%4]},children:e.name[0].toUpperCase()}),title:Object(I.jsx)(J,{path:qt.project,urlArgs:{projectId:e.id},queryArgs:{},children:e.name}),description:e.description})})}})]})})})})),Te=n(156),Ne=n(227),De=n(317),Pe=n.n(De),Re=Object(S.a)({table:{"& div.ant-table-container":{border:"1px solid #bbb",borderRadius:4,borderLeft:"1px solid #bbb !important"},"& div.ant-card-body":{paddingLeft:0,paddingRight:0},"& th":{fontWeight:600}}})(Object(Ce.a)((function(e){var t=e.classes,n=qt.project.useURLParams().projectId,i=we(),r=i.projectStore,a=i.tableStore;Object(F.useEffect)((function(){r.fetchById(n)}),[r,n]);var o=r.get(n);if(void 0===o)return Object(I.jsx)(L,{});if(null===o)return Object(I.jsx)($,{});var c=[{dataIndex:"id",title:"id"},{dataIndex:"name",title:"name",renderText:function(e,t){return Object(I.jsx)(J,{path:qt.table,urlArgs:{tableId:t.id},queryArgs:{query:a.encodeWhereQuery({project:n})},children:t.name})}},{dataIndex:"description",title:"description"}];return Object(I.jsxs)(H.a.Fragment,{children:[Object(I.jsxs)(Se.a.Title,{level:3,children:["Project: ",Pe.a.upperFirst(o.name)]}),Object(I.jsx)(Ne.a,{className:t.table,defaultSize:"small",bordered:!0,request:function(){var e=Object(Te.a)(s.a.mark((function e(t,i,r){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetch({limit:t.pageSize,offset:(t.current-1)*t.pageSize,conditions:{project:n}});case 2:return o=e.sent,e.abrupt("return",{data:o.records.map(Ae),success:!0,total:o.total});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),options:{search:!0},headerTitle:Object(I.jsx)(Se.a.Title,{level:4,children:"Tables"}),search:!1,pagination:{pageSize:10,pageSizeOptions:["10","20","50","100","200","500","1000"]},rowKey:"id",columns:c})]})})));function Ae(e){return{id:e.id,name:e.name,description:e.description}}var Be=n(884),Fe=n(253),He=n(885),ze=n(232);function Me(e){return void 0===e.doesNotExist}var Ue=["entity","nolink"],qe=function(e){var t=e.entity,n=e.nolink,i=void 0!==n&&n,r=Object(ze.a)(e,Ue);return Me(t)?i?Object(I.jsxs)("span",Object(pe.a)(Object(pe.a)({},r),{},{children:[t.label.en," (",t.id,")"]})):Object(I.jsxs)(X,Object(pe.a)(Object(pe.a)({href:Oe.id2uri(t.id),openInNewPage:!0},r),{},{children:[t.label.en," (",t.id,")"]})):t.doesNotExist?Object(I.jsx)("span",Object(pe.a)(Object(pe.a)({},r),{},{children:Object(I.jsxs)("i",{children:["Entity ",t.id," doesn't exist"]})})):i?Object(I.jsxs)("span",Object(pe.a)(Object(pe.a)({},r),{},{children:["(",t.id,")"]})):Object(I.jsxs)(X,Object(pe.a)(Object(pe.a)({href:Oe.id2uri(t.id),openInNewPage:!0},r),{},{children:["(",t.id,")"]}))},We=n(170),Ke=Object(S.a)({})((function(e){var t=e.value;return"entityid"===t.type?Object(I.jsx)(Ye,{entityId:t.value,render:function(e){return Object(I.jsx)(qe,{entity:e})}}):"object"===typeof t.value?Object(I.jsx)("span",{children:JSON.stringify(t.value)}):Object(I.jsx)("span",{children:t.value})})),Qe=Object(S.a)({qualifiers:{marginLeft:8}})((function(e){var t,n=e.stmt,i=e.classes,r=[],a=Object(c.a)(n.qualifiersOrder);try{for(a.s();!(t=a.n()).done;){var o=t.value;r.push(Object(I.jsxs)(ke.a,{gutter:8,children:[Object(I.jsx)(Ie.a,{span:6,children:o}),Object(I.jsx)(Ie.a,{span:18,children:n.qualifiers[o].map((function(e,t){return Object(I.jsx)("div",{children:Object(I.jsx)(Ke,{value:e})},t)}))})]},o))}}catch(s){a.e(s)}finally{a.f()}return Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{children:Object(I.jsx)(Ke,{value:n.value})}),Object(I.jsx)("div",{className:i.qualifiers,children:r})]})})),Ve=Object(S.a)({})((function(e){var t=e.entity,n=e.visibleProperties;e.classes;void 0===n&&(n=Object.keys(t.properties));var i,r=[],a=Object(c.a)(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=t.properties[o]||[];r.push(Object(I.jsxs)(ke.a,{gutter:8,children:[Object(I.jsx)(Ie.a,{span:6,children:Object(I.jsx)(Se.a.Text,{strong:!0,children:o})}),Object(I.jsx)(Ie.a,{span:18,children:s.map((function(e,t){return Object(I.jsx)(Qe,{stmt:e},t)}))})]},o))}}catch(d){a.e(d)}finally{a.f()}return Object(I.jsx)("div",{children:r})})),Je=["entity","children","classes"],Xe=Object(S.a)({root:{"& > h2, p, span":{margin:0},minWidth:360}})((function(e){var t,n=e.entity,i=e.children,r=e.classes,a=Object(ze.a)(e,Je);return t=Me(n)?Object(I.jsxs)("div",Object(pe.a)(Object(pe.a)({},a),{},{className:"".concat(r.root," ").concat(a.className),children:[Object(I.jsx)("h2",{children:Object(I.jsxs)(X,{href:Oe.id2uri(n.id),openInNewPage:!0,children:[" ",n.label.en]})}),Object(I.jsx)("p",{children:Object(I.jsxs)("i",{children:["(",n.id,")"]})}),Object(I.jsx)(Se.a.Text,{type:"secondary",children:n.aliases.en.join(" | ")}),Object(I.jsx)("p",{children:n.description.en}),Object(I.jsx)("hr",{}),Object(I.jsx)(Ve,{entity:n,visibleProperties:["P31"]})]})):n.doesNotExist?Object(I.jsx)("span",{children:Object(I.jsxs)("i",{children:["Entity ",n.id," doesn't exist"]})}):Object(I.jsx)(L,{}),Object(I.jsx)(We.a,{content:t,children:i})})),Ye=(Object(S.a)({root:{"& > h2, p, span":{margin:0},minWidth:360}})((function(e){var t=e.entity;return Object(I.jsxs)("div",{children:[Object(I.jsx)("h2",{children:Object(I.jsxs)(X,{href:Oe.id2uri(t.id),children:[" ",t.label.en]})}),Object(I.jsx)("p",{children:Object(I.jsxs)("i",{children:["(",t.id,")"]})}),Object(I.jsx)(Se.a.Text,{type:"secondary",children:t.aliases.en.join(" | ")}),Object(I.jsx)("p",{children:t.description.en}),Object(I.jsx)("hr",{}),Object(I.jsx)(Ve,{entity:t})]})})),Object(Ce.a)((function(e){var t=e.entityId,n=e.render,i=we().entityStore;Object(F.useEffect)((function(){i.serializeFetchById(t)}),[i,t]);var r=i.get(t);return n(void 0===r||null===r?{id:t,doesNotExist:null===r}:r)}))),Ge=n(83),$e=n(255),Ze=["value","fractionDigits"],et=function(e){var t=e.value,n=e.fractionDigits,i=Object(ze.a)(e,Ze);return Object(I.jsx)("span",Object(pe.a)(Object(pe.a)({title:t.toString()},i),{},{children:t.toFixed(n)}))},tt=n(505),nt=Object(S.a)({checkboxIcon:{padding:1,border:"1px solid",borderRadius:2}})((function(e){var t=e.icon,n=e.classes,i=e.selected,r=e.onChange,o=e.colorSelected,s=void 0===o?Ge.a[5]:o,c=e.colorUnselected,d=void 0===c?Ge.e[5]:c,u=Object(F.useState)(!1),l=Object(a.a)(u,2),h=l[0],f=l[1],p=void 0===i?h:i;return Object(I.jsx)(tt.a,{icon:t,color:p?s:d,className:n.checkboxIcon,onClick:function(){if(void 0!==i&&void 0!==r)return r(!i);f(!h)}})})),it={correctCandidateEntity:{color:Ge.a[5]},candidateEntity:{color:Ge.e[5],"&:hover":{color:"".concat(Ge.e[5]," !important")}},candidateEntitySeeMore:{color:Ge.e[5],cursor:"pointer"}},rt=Object(S.a)(it)((function(e){var t=e.record,n=e.index,i=e.classes,r=e.topK,o=void 0===r?3:r,d=Object(F.useState)(!1),u=Object(a.a)(d,2),l=u[0],h=u[1],f=t.links[n]||[],p=[];if(f.length>0){var b,v=Object(c.a)(f[0].candidateEntities.slice(0,o));try{var j=function(){var e=b.value,t=e.entityId===f[0].entityId?i.correctCandidateEntity:i.candidateEntity;p.push(Object(I.jsx)("div",{children:Object(I.jsxs)(_.b,{size:4,children:[Object(I.jsx)(nt,{icon:$e.a}),Object(I.jsx)(nt,{icon:$e.b}),Object(I.jsx)(Ye,{entityId:e.entityId,render:function(e){return Object(I.jsx)(Xe,{entity:e,children:Object(I.jsx)(qe,{nolink:!0,entity:e,className:t})})}}),Object(I.jsxs)("span",{className:t,children:["(",Object(I.jsx)(et,{value:e.probability,fractionDigits:3}),")"]})]})},e.entityId))};for(v.s();!(b=v.n()).done;)j()}catch(x){v.e(x)}finally{v.f()}var g=f[0].candidateEntities.findIndex((function(e){return e.entityId===f[0].entityId}));if(-1!==g&&g>=o){var O=f[0].candidateEntities[g];p.push(Object(I.jsx)("div",{children:Object(I.jsxs)(_.b,{size:4,children:[Object(I.jsx)(nt,{icon:$e.a}),Object(I.jsx)(nt,{icon:$e.b}),Object(I.jsx)(Ye,{entityId:O.entityId,render:function(e){return Object(I.jsxs)("span",{className:i.correctCandidateEntity,children:["(",g,")\xa0",Object(I.jsx)(Xe,{entity:e,children:Object(I.jsx)(qe,{nolink:!0,entity:e})})]})}}),Object(I.jsxs)("span",{className:i.correctCandidateEntity,children:["(",Object(I.jsx)(et,{value:O.probability,fractionDigits:3}),")"]})]})},O.entityId))}f[0].candidateEntities.length>o&&p.push(Object(I.jsx)("div",{children:Object(I.jsx)(Se.a.Text,{className:i.candidateEntitySeeMore,onClick:function(){return h(!l)},children:"See more"})},"see-more"))}var y=[{dataIndex:"id",title:"Entity",render:function(e){return Object(I.jsx)(Ye,{entityId:e,render:function(e){return Object(I.jsx)(Xe,{entity:e,children:Object(I.jsx)(qe,{nolink:!0,entity:e})})}})}},{dataIndex:"score",title:"Score",render:function(e){return Object(I.jsx)(et,{value:e,fractionDigits:5})}},{title:"action",render:function(){return Object(I.jsx)(_.b,{size:4,children:Object(I.jsx)(T.a,{children:"Select"})})}}];return Object(I.jsxs)(H.a.Fragment,{children:[p,Object(I.jsx)(B.a,{title:"Candidate Entities",visible:l,style:{top:20},bodyStyle:{padding:0},width:"60%",onOk:function(){return h(!1)},onCancel:function(){return h(!1)},children:Object(I.jsx)(Ne.a,{defaultSize:"small",bordered:!0,search:!1,pagination:{pageSize:20,pageSizeOptions:["20","50","100","200","500","1000"]},rowKey:"id",columns:y,request:function(){var e=Object(Te.a)(s.a.mark((function e(t,n,i){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({total:f.length>0?f[0].candidateEntities.length:0,success:!0,data:0===f.length?[]:f[0].candidateEntities.slice((t.current-1)*t.pageSize,t.current*t.pageSize).map((function(e,t){return{id:e.entityId,score:e.probability}}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}()})})]})})),at={link:{textDecoration:"underline"},noEntityLink:{color:Ge.e[5]}},ot=Object(S.a)(at)((function(e){var t=e.cell,n=e.record,i=e.index,r=e.classes,a=e.topK,o=void 0===a?3:a,s=n.links[i]||[],c=s.flatMap((function(e,n){var i=0===n?t.substring(0,e.start):t.substring(s[n-1].end,e.start),a=t.substring(e.start,e.end),o=Object(I.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",dangerouslySetInnerHTML:{__html:""===a.trim()?"&blank;":a},className:r.link+(void 0===e.entityId?" "+r.noEntityLink:""),style:null===e.entityId?{color:"#aaa"}:{}},n);return void 0===e.entityId?[i,o]:[i,Object(I.jsx)(Ye,{entityId:e.entityId,render:function(e){return Object(I.jsx)(Xe,{entity:e,children:o})}},n)]}));return 0===s.length?c.push(t):c.push(t.substring(s[s.length-1].end)),Object(I.jsxs)("div",{children:[c,Object(I.jsx)(rt,{record:n,index:i,topK:o})]})})),st={table:{width:"100%","& div.ant-table-container":{border:"1px solid #bbb",borderRadius:4,borderLeft:"1px solid #bbb !important"},"& div.ant-card-body":{paddingLeft:0,paddingRight:0},"& th":{fontWeight:600},"& .ant-table-cell":{verticalAlign:"top"}}},ct=Object(S.a)(st)((function(e){var t=e.table,n=e.query,i=e.classes,r=e.toolBarRender,a=t.columns.map((function(e,t){return{dataIndex:["row",t,"value"],title:e,render:function(e,n){return Object(I.jsx)(ot,{cell:e,record:n,index:t})}}}));return Object(I.jsxs)(H.a.Fragment,{children:[Object(I.jsx)(Ne.a,{className:i.table,defaultSize:"small",bordered:!0,request:function(){var e=Object(Te.a)(s.a.mark((function e(i,r,a){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(i.pageSize,(i.current-1)*i.pageSize);case 2:return o=e.sent,e.abrupt("return",{data:o,success:!0,total:t.size});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),search:!1,pagination:{pageSize:5,pageSizeOptions:["5","10","20","50","100","200","500","1000"]},headerTitle:void 0!==t.context.webpage?Object(I.jsx)(X,{href:t.context.webpage,openInNewPage:!0,children:t.name}):t.name,toolBarRender:r,rowKey:"index",columns:a}),Object(I.jsx)(dt,{table:t})]})})),dt=function(e){var t=e.table,n=[["Description",t.description]];void 0!==t.context.webpage?n.push(["From website",Object(I.jsx)(X,{href:t.context.webpage,openInNewPage:!0,children:t.context.title})]):n.push(["From website","N/A"]),n.push(["Associated Entity",void 0!==t.context.entityId?Object(I.jsx)(Ye,{entityId:t.context.entityId,render:function(e){return Object(I.jsx)(qe,{entity:e})}}):"N/A"]);var i=(t.context.contentHierarchy||[]).map((function(e,t){return Object(I.jsxs)("div",{children:[Object(I.jsxs)("b",{children:["#".repeat(e.level)," ",e.heading]}),Object(I.jsx)("p",{children:e.contentBefore}),Object(I.jsx)("p",{children:e.contentAfter})]},t)}));return n.push(["Content Hierarchy",i.length>0?i:"N/A"]),Object(I.jsx)(He.b,{title:"Table Info",size:"small",children:n.map((function(e){var t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(I.jsx)(He.b.Item,{label:n,children:i},n)}))})},ut=n(888),lt=n(889),ht=n(176),ft=n(511),pt=n.n(ft),bt=n(512),vt=n.n(bt),jt=n(60),gt=n(142),Ot=n(95),yt=n(180);function xt(e,t,n,i){var r=i.xoffset,a=i.yoffset,o=i.cfg,s=i.stroke;r=void 0===r?0:r,a=void 0===a?0:a,void 0!==s&&n.forEach((function(n){var i=n.text,c=n.x,d=n.y;e.addShape("text",{attrs:Object(pe.a)(Object(pe.a)({text:i,x:c+r,y:d+a,fontFamily:t.fontFamily},o),{},{fill:s.color,stroke:s.color,lineWidth:s.width}),name:"wrapped-text",draggable:!0})})),n.forEach((function(n){var i=n.text,s=n.x,c=n.y;e.addShape("text",{attrs:Object(pe.a)({text:i,fill:"black",x:s+r,y:c+a,fontFamily:t.fontFamily},o),name:"wrapped-text",draggable:!0})}))}var mt=n(509),wt=n.n(mt),kt=n(510),It=n.n(kt),St=function(e,t){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=i.join(":");return void 0===t[a]&&(t[a]=e.apply(void 0,i)),t[a]}},Et=function e(t){var n=this;Object(d.a)(this,e),this.paragraph=void 0,this.getDesiredLineLength=void 0,this.cacheLineLengths={},this.cacheLineDemerits={},this.cacheParagraphDemerits={},this.cacheParagraphBreakpoints={},this.optimize=function(){return n.optimizeParagraph(0,n.paragraph.length-1,0)},this.optimizeParagraph=St((function(e,t,i){var r=n.computeLineAdjustment(e,t,i);if(void 0!==r&&r>=0)return{breakpoints:[],demerits:n.computeLineDemerits(e,t,i)};for(var a={caret:-1,demerits:1/0,breakpoints:[]},o=t-1;o>e;o--)if("box"!==n.paragraph[o].type){var s=n.optimizeParagraph(e,o,i),c=n.optimizeParagraph(o+1,t,i+(s.breakpoints.length>0?s.breakpoints.length+1:0));s.demerits+c.demerits<a.demerits&&(a.caret=o,a.demerits=s.demerits+c.demerits,a.breakpoints=s.breakpoints.slice(),a.breakpoints.push(o),a.breakpoints=a.breakpoints.concat(c.breakpoints))}return{breakpoints:a.breakpoints,demerits:a.demerits}}),this.cacheParagraphBreakpoints),this.computeLineLength=St((function(e,t){for(var i=0,r=e;r<t;r++)"penalty"!==n.paragraph[r].type&&(i+=n.paragraph[r].width);return"penalty"===n.paragraph[t].type&&(i+=n.paragraph[t].width),i}),this.cacheLineLengths),this.computeLineElastic=function(e,t){for(var i=0,r=0,a=e;a<=t;a++){var o=n.paragraph[a];"glue"===o.type&&(i+=o.stretch,r+=o.shrink)}return{stretchability:i,shrinkability:r}},this.computeLineAdjustment=function(e,t,i){var r=n.computeLineLength(e,t),a=n.getDesiredLineLength(i);if(r===a)return 0;var o=n.computeLineElastic(e,t);if(r<a){if(o.stretchability<0)return;return 0===o.stretchability?(a-r)/.1:(a-r)/o.stretchability}return o.shrinkability<=0?void 0:(a-r)/o.shrinkability},this.computeLineBadness=function(e,t,i){var r=n.computeLineAdjustment(e,t,i);return void 0===r||r<-1?-1/0:Math.pow(r,3)},this.computeLineDemerits=St((function(e,t,i){var r=n.paragraph[t],a="penalty"===r.type?r.cost:0,o=n.computeLineBadness(e,t,i);return a>=0?Math.pow(1+o+a,2)+0:a===-1/0?Math.pow(1+o,2)+0:Math.pow(1+o,2)-Math.pow(a,2)+0}),this.cacheLineDemerits),this.computeParagraphDemerits=function(e,t,i,r){for(var a=e,o=0,s=0;s<i.length;s++)o+=n.computeLineDemerits(a,i[s],r+s),a=i[s]+1;return o+=n.computeLineDemerits(a,t,r+(i.length>0?i.length+1:0))},this.paragraph=t.units.map((function(e){return(e=Object.assign({},e)).width=e.width/16,"glue"===e.type&&(e.stretch=e.stretch/16,e.shrink=e.shrink/16),e})),this.getDesiredLineLength=function(e){return t.getLineLength(e)/16}},Lt=function(){function e(t,n){var i=this;Object(d.a)(this,e),this.spaceWidth=void 0,this.units=void 0,this.lineLengths=void 0,this.getLineLength=void 0,this.groupByLine=function(e){var t=[],n=0;(e=e.slice()).push(i.units.length-1);var r,a=Object(c.a)(e);try{for(a.s();!(r=a.n()).done;){var o,s=r.value,d=i.units.slice(n,s),u=[],l=Object(c.a)(d);try{for(l.s();!(o=l.n()).done;){var h=o.value;"penalty"!==h.type&&("box"===h.type&&u.length>0&&"box"===u[u.length-1].type?(u[u.length-1].text+=h.text,u[u.length-1].width+=h.width):u.push(Object.assign({},h)))}}catch(f){l.e(f)}finally{l.f()}"penalty"===i.units[s].type&&i.units[s].text.length>0&&u.push(i.units[s]),n=s+1,t.push(u)}}catch(f){a.e(f)}finally{a.f()}return t},this.layout=function(e,t){var n=t.lineHeight,r=t.cssLineHeight,a=t.fontSize,o=t.align,s=(t.verticalAlign,t.autoLength),d=[],u=e.map((function(e){return e.reduce((function(e,t){return e+t.width}),0)})),l=e.map((function(e,t){return i.getLineLength(t)}));if(s)for(var h=Math.max.apply(Math,Object(Ot.a)(u)),f=0;f<l.length;f++)l[f]>h&&(l[f]=h);for(var p=0;p<e.length;p++){var b=e[p],v=u[p],j=l[p],g=b.filter((function(e){return"glue"===e.type})).length,O=v<j&&"justify"!==o?i.spaceWidth:Math.abs(j-v)/g+i.spaceWidth,y=(p+1)*n-a*(r-1)/2,x=0;if("center"===o?x+=(j-v)/2:"right"===o&&(x+=j-v),O===i.spaceWidth){var m=Object.assign({x:x,y:y,renderedWidth:v,lineNumber:p},b[0]);m.text=b.map((function(e){return e.text})).join(""),d.push(m)}else{var w,k=Object(c.a)(b);try{for(k.s();!(w=k.n()).done;){var I=w.value,S="glue"===I.type?O:I.width,E=Object.assign({x:x,y:y,renderedWidth:S,lineNumber:p},I);x+=S,d.push(E)}}catch(L){k.e(L)}finally{k.f()}}}return{units:d,lineLengths:u}},this.units=t,this.lineLengths=n,Array.isArray(n)?this.getLineLength=function(e){return e<n.length?n[e]:n[n.length-1]}:this.getLineLength=function(e){return n},this.spaceWidth=0;var r,a=Object(c.a)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;if("glue"===o.type){this.spaceWidth=o.width;break}}}catch(s){a.e(s)}finally{a.f()}}return Object(u.a)(e,null,[{key:"getUnitsFromText",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,a=[],o=e.split(/(\s+)/).filter((function(e){return e.length>0}));if(void 0!==i&&i.length>0){var s=new RegExp(".*?[".concat(i.join(""),"]|.+"),"g");o=o.flatMap((function(e){return e.match(s)}))}var c=t(" "),d=t("-"),u=function(e){return/\s/.test(e.charAt(0))},l=c/2,h=c/3;return o.forEach((function(e){if(u(e)){var i={type:"glue",width:c,shrink:h,stretch:l,text:e};a.push(i)}else if(a.length>0&&"box"===a[a.length-1].type&&a.push({type:"penalty",width:0,cost:1,flagged:!1,text:""}),n){var o=n(e);o.forEach((function(e,n){var i={type:"box",width:t(e),text:e};if(a.push(i),n<o.length-1){var s={type:"penalty",text:"-",width:d,cost:r,flagged:!0};a.push(s)}}))}else{var s={type:"box",width:t(e),text:e};a.push(s)}})),a.push({type:"glue",width:0,stretch:1e4,shrink:0,text:""}),a}}]),e}(),Ct=function e(t,n){var i=this;Object(d.a)(this,e),this.measureCtx=void 0,this.circleLayout=void 0,this.hypher=void 0,this.font=void 0,this.fontFamily=void 0,this.fontSize=void 0,this.cssLineHeight=1.428,this.lineHeight=void 0,this.spaceWidth=void 0,this.separable=["{","}",":",",","'",'"',".","/"],this.wrapText=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"justify",r=new Lt(Lt.getUnitsFromText(e,i.measureText,i.hyphenate,i.separable),t),a=new Et(r).optimize().breakpoints,o=r.layout(r.groupByLine(a),{align:n,cssLineHeight:i.cssLineHeight,fontSize:i.fontSize,lineHeight:i.lineHeight,verticalAlign:"middle",autoLength:!0}),s=o.units,c=o.lineLengths,d=Math.max.apply(Math,Object(Ot.a)(c)),u=(a.length+1)*i.lineHeight;return{units:s,width:d,height:u}},this.wrapTextCircle=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=i.circleLayout.findRadius(i.measureText(e),n,r)+12,o=i.circleLayout.getLayout(a),s=o.lines,d=i.wrapText(e,s.slice(0,3),"center"),u=d.units,l=d.width,h=Math.max.apply(Math,Object(Ot.a)(u.map((function(e){return e.lineNumber}))))+1,f=-(a=l/2),p=-(h%2===1?(h-1)/2:h/2)*i.lineHeight-i.lineHeight/2,b=Object(c.a)(u);try{for(b.s();!(t=b.n()).done;){var v=t.value;v.x+=f,v.y+=p}}catch(j){b.e(j)}finally{b.f()}return{units:u,radius:a}},this.hyphenate=function(e){return e.length>4?i.hypher.hyphenate(e):[e]},this.getApproximateWidth=function(e){return e*i.measureText("abcij ")},this.measureText=function(e){return i.measureCtx.measureText(e).width};var r=document.createElement("canvas");this.measureCtx=r.getContext("2d"),this.spaceWidth=this.measureText(" "),this.font=t.font||"".concat(t.fontSize,"px ").concat(t.fontFamily),this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.measureCtx.font=this.font,this.hypher=new It.a(wt.a),void 0!==n&&(void 0!==n.lineHeight&&(this.cssLineHeight=n.lineHeight),void 0!==n.separable&&(this.separable=n.separable)),this.lineHeight=this.fontSize*this.cssLineHeight,this.circleLayout=new _t(this)};Ct.getCssFont=function(e){var t=getComputedStyle(e),n=t.fontStyle,i=t.fontVariant,r=t.fontWeight,a=t.fontSize,o=t.fontFamily;return{font:"".concat(n," ").concat(i," ").concat(r," ").concat(a," ").concat(o),fontSize:parseFloat(a),fontFamily:o}};var _t=function e(t){var n=this;Object(d.a)(this,e),this.lineBreak=void 0,this.lineHeight=void 0,this.radius2layout=void 0,this.findRadius=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=0,a=t,o=void 0,s=0;s<t;s++){if(a-r===1){o=a;break}var c=Math.ceil((r+a)/2),d=n.getLayout(c).totalLength;if(d<e)r=c;else{if(!(d-e>i)){o=c;break}a=c}}if(void 0===o)throw new Error("The text of ".concat(e," is too long to render in a circle that has the maximum radius: ").concat(t," - ").concat(n.getLayout(t).totalLength));return o},this.getLayout=function(e){if(void 0===n.radius2layout[e]){for(var t=n.computeHalfNumberOfLines(e),i=[],r=[],a=t;a>0;a--)i.push(n.computeLineLength(a,e)),r.push(e-n.lineHeight*(a+.5));i.push(n.computeCentralLineLength(e)),r.push(e-n.lineHeight/2);for(var o=t-1;o>=0;o--)i.push(i[o]),r.push(e+n.lineHeight*(o-.5));n.radius2layout[e]={lines:i,linesY:r,centralLine:i[t],totalLength:i.reduce((function(e,t){return e+t}))}}return n.radius2layout[e]},this.computeHalfNumberOfLines=function(e){return Math.floor((e-n.lineHeight/2)/n.lineHeight)},this.computeLineLength=function(e,t){return 2*Math.sqrt(Math.pow(t,2)-Math.pow(n.lineHeight*e,2))},this.computeCentralLineLength=function(e){return 2*Math.sqrt(Math.pow(e,2)-Math.pow(n.lineHeight/2,2))},this.lineBreak=t,this.lineHeight=t.lineHeight,this.radius2layout={}},Tt=function(){function e(t,n){var i=this;Object(d.a)(this,e),this.version=void 0,this.container=void 0,this.graph=void 0,this.data=void 0,this.props=void 0,this.wordwrap=void 0,this.fitCenter=function(){i.graph.fitCenter()},this.setDataAndRender=function(e,t){i.version>0&&i.graph.clear(),i.data=e,i.graph.data({nodes:e.nodes,edges:e.edges}),i.graph.render(),i.version+=1,void 0!==t&&t()},this.updateLayout=function(e){i.graph.updateLayout(e),i.graph.layout()},this.updateContainerSize=function(e){var t=e.center,n=e.height,r=i.graph.get("group");r.resetMatrix();var a=r.getCanvasBBox();if(0!==a.width&&0!==a.height){var o,s=i.container.clientWidth;switch(!0===t?i.graph.moveTo(s/2-a.width/2,10):i.graph.moveTo(i.props.leftOffset,10),n){case"fit-graph":o=a.height+20;break;case"fit-remaining-window":var c=i.container.getBoundingClientRect().top,d=window.scrollY;o=document.documentElement.clientHeight-(c+d)-10}i.graph.changeSize(s,o)}return a},this.untilLayoutStable=function(e,t,n,r,a,o,s){if(e<=0)return n.apply(void 0,Object(Ot.a)(r)),void(void 0!==a&&a());var c=i.graph.get("group").getCanvasBBox();if(o=o||10,void 0!==s){if(Math.abs(s.width-c.width)<o&&Math.abs(s.height-c.height)<o)return void setTimeout((function(){var s=i.graph.get("group").getCanvasBBox();Math.abs(c.width-s.width)>=o||Math.abs(c.height-s.height)>=o?i.untilLayoutStable(e-1,t,n,r,a,o,s):(n.apply(void 0,Object(Ot.a)(r)),void 0!==a&&a())}),t);setTimeout((function(){i.untilLayoutStable(e-1,t,n,r,a,o,c)}),t)}else setTimeout((function(){i.untilLayoutStable(e,t,n,r,a,o,c)}),t)},this.version=0,this.props=n,this.container=t,this.data={nodes:[],edges:[]};this.wordwrap=new Ct({fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",fontSize:12}),function(e){var t=e.getApproximateWidth(4);yt.a.registerNode("rect-wrap",{draw:function(n,i){var r,a=n.style.paddingWidth||0,o=n.style.paddingHeight||0,s=e.wrapText(n.label,n.size||t,"center"),c=s.units,d=s.width,u=s.height,l=i.addShape("rect",{attrs:Object(pe.a)({x:n.x,y:n.y,width:d+2*a,height:u+2*o},n.style),name:"rect-soft-wrap-shape"});return xt(i,e,c,{xoffset:a,yoffset:o,cfg:null===n||void 0===n||null===(r=n.labelCfg)||void 0===r?void 0:r.style}),l}},"single-node")}(this.wordwrap),function(e){var t=e.getApproximateWidth(4);yt.a.registerNode("circle-wrap",{draw:function(n,i){n.style.padding;var r,a,o=(null===(r=n.labelCfg)||void 0===r?void 0:r.offset)||0,s=e.wrapText(n.label,t,"center"),c=s.units,d=s.width,u=i.addShape("circle",{attrs:Object(pe.a)({x:n.x,y:n.y,r:10},n.style),name:"circle-soft-wrap-shape"});return xt(i,e,c,{xoffset:-d/2,yoffset:10+o,cfg:null===n||void 0===n||null===(a=n.labelCfg)||void 0===a?void 0:a.style,stroke:{color:"white",width:4}}),u}},"single-node")}(this.wordwrap),this.graph=new yt.a.Graph({container:t,width:t.scrollWidth,height:n.initHeight,layout:n.layout||{type:"force",preventOverlap:!0,linkDistance:50,nodeSpacing:50},defaultEdge:{type:"quadratic",style:{stroke:"black",endArrow:{fill:"black",path:yt.a.Arrow.triangle(6,8)}},labelCfg:{style:{fill:"black",background:{fill:"#ffffff",stroke:"#9EC9FF",padding:[2,2,2,2],radius:2}}}},modes:{default:["drag-canvas","drag-node"],edit:["click-select"]},nodeStateStyles:{hover:{fill:"lightsteelblue"}}}),void 0!==n.onNodeClick&&this.graph.on("node:click",(function(e){n.onNodeClick(e.item._cfg.model.id)})),void 0!==n.onEdgeClick&&this.graph.on("edge:click",(function(e){n.onEdgeClick(e.item._cfg.model)}))}return Object(u.a)(e,null,[{key:"transformData",value:function(e,t){var n,i=e.map((function(e,t){var n;n=e.label.trim().length>0&&("rect"===e.shape||"circle"===e.shape)?e.shape+"-wrap":e.shape;var i={id:e.id,label:e.label,type:n,style:Object(pe.a)(Object(pe.a)({},e.style),{},{radius:4,paddingHeight:2,paddingWidth:4}),labelCfg:{style:e.labelStyle}};return"rect"===e.shape&&(i.style.radius=4),i})),r=t.map((function(e){return{id:"".concat(e.source,"-").concat(e.target,"-").concat(e.id),source:e.source,target:e.target,label:e.label}})),a=new Set,o=!1,s=Object(c.a)(t);try{for(s.s();!(n=s.n()).done;){var d=n.value,u="".concat(d.source,"-").concat(d.target);if(a.has(u)){o=!0;break}a.add(u)}}catch(l){s.e(l)}finally{s.f()}return o&&yt.a.Util.processParallelEdges(r),{nodes:i,edges:r}}}]),e}(),Nt={hide:{display:"none"},graph:{position:"relative",width:"100%"},toolbar:{position:"absolute",top:8,left:8,"& button.text":{borderRadius:4,paddingLeft:8,paddingRight:8},"& button.icon":{borderRadius:4,padding:4,"& svg":{fontSize:22}}},container:{border:"1px solid #bbb",borderRadius:4,width:"100%","& canvas":{display:"block"}}},Dt={Force:{type:"force",preventOverlap:!0,linkDistance:50,nodeSpacing:50},Dagre:{type:"dagre",rankdir:"TB",nodesep:70,ranksep:30}},Pt=Object(S.a)(Nt)(Object(F.forwardRef)((function(e,t){var n=e.id,i=e.version,r=e.nodes,a=e.edges,o=e.classes,s=e.props,c=e.className,d=e.renderingAdjustedHeight,u=void 0===d?"fit-graph":d,l=e.toolbar,h=void 0!==l&&l,f=Object(F.useRef)(null),p=Object(F.useRef)(void 0);Object(F.useImperativeHandle)(t,(function(){return{graph:function(){return p.current}}})),Object(F.useEffect)((function(){if(null!==f.current){void 0===p.current&&(p.current=new Tt(f.current,s||{initHeight:500,leftOffset:0}));var e=p.current;e.setDataAndRender(Tt.transformData(r,a),(function(){window.g=e,e.untilLayoutStable(20,50,e.updateContainerSize,[{center:!0,height:u}],(function(){}))}))}}),[n,i,r,a,s,u]);var b=!1===h?null:Object(I.jsx)(Rt,{autoHide:"auto-hide"===h,graph:p});return Object(I.jsxs)("div",{className:c,children:[Object(I.jsx)("div",{className:o.hide,children:i}),Object(I.jsxs)("div",{className:o.graph,children:[b,Object(I.jsx)("div",{ref:f,className:o.container})]})]})}))),Rt=Object(S.a)(Nt)((function(e){var t=e.autoHide,n=void 0!==t&&t,i=e.graph,r=e.classes,o=Object(F.useState)(!1),s=Object(a.a)(o,2),c=s[0],d=s[1],u=Object(F.useState)("Force"),l=Object(a.a)(u,2),h=l[0],f=l[1],p=function(){n&&d(!0)},b=function(){n&&d(!1)};if(n&&!c)return Object(I.jsx)("div",{className:r.toolbar,onMouseEnter:p,onMouseLeave:b,children:Object(I.jsx)(T.a,{className:"icon",children:Object(I.jsx)(pt.a,{})})});var v=function(e){var t;f(e),null===(t=i.current)||void 0===t||t.updateLayout(Dt[e])};return Object(I.jsx)("div",{className:r.toolbar,onMouseEnter:p,onMouseLeave:b,children:Object(I.jsxs)(_.b,{size:4,children:[Object(I.jsx)(jt.a,{title:"Center the graph",children:Object(I.jsx)(T.a,{className:"icon",onClick:function(){var e;null===(e=i.current)||void 0===e||e.graph.fitCenter()},children:Object(I.jsx)(vt.a,{})})}),Object(I.jsx)(jt.a,{title:"Make the graph full screen",children:Object(I.jsx)(T.a,{className:"icon",children:Object(I.jsx)(ut.a,{})})}),Object(I.jsx)(jt.a,{title:"Change graph layout",children:Object(I.jsx)(gt.a,{overlay:Object(I.jsx)(Z.a,{onClick:function(e){v(e.key)},children:Object.keys(Dt).map((function(e){return Object(I.jsx)(Z.a.Item,{children:e},e)}))}),children:Object(I.jsxs)(T.a,{className:"text",icon:Object(I.jsx)(lt.a,{}),onClick:function(){"Force"===h&&v("Dagre"),"Dagre"===h&&v("Force")},children:[h," ",Object(I.jsx)(ht.a,{})]})})})]})})})),At=Object(S.a)({hide:{display:"none"},graphContainer:{marginTop:8}})((function(e){var t=e.sm,n=e.classes,i=Object(F.useRef)(void 0),r=Object(F.useMemo)((function(){return[t.graph.nodes.map((function(e){var t,n;switch(e.nodetype){case"class_node":t="circle",n={fill:Ge.d[2],stroke:Ge.d[8]};break;case"data_node":t="rect",n={fill:Ge.c[3],stroke:Ge.c[8]};break;case"literal_node":t="entity-id"===e.datatype?"circle":"rect",n=e.isInContext?{fill:"#C6E5FF",stroke:"#5B8FF9"}:{fill:Ge.g[2],stroke:"#c41d7f"};break;default:throw new Error("Unreachable!")}return{id:e.id,label:e.label,style:n,shape:t}})),t.graph.edges.map((function(e){return{id:"".concat(e.source,"-").concat(e.target,"-").concat(e.uri),source:e.source,target:e.target,label:e.label}}))]}),[t.id,t.version]),o=Object(a.a)(r,2),s=o[0],c=o[1],d=function(){if(void 0!==i.current){var e=i.current.graph();void 0!==e&&e.updateContainerSize({center:!0,height:"fit-graph"})}};return Object(Fe.a)("c",d,[t.id,void 0!==i]),Object(I.jsxs)("div",{children:[Object(I.jsxs)(_.b,{children:[Object(I.jsx)(T.a,{size:"small",onClick:d,children:"Center graph (C)"}),Object(I.jsx)(T.a,{size:"small",children:"Add node"}),Object(I.jsx)(T.a,{size:"small",children:"Add edge"})]}),Object(I.jsx)(Pt,{ref:i,className:n.graphContainer,id:t.id,version:t.version,nodes:s,edges:c,toolbar:!1,renderingAdjustedHeight:"fit-graph",props:{initHeight:300,leftOffset:0,layout:{type:"dagre",rankdir:"TB",nodesep:70,ranksep:30},onNodeClick:function(e){console.log("click node",e)},onEdgeClick:function(e){console.log("click edge",e)}}})]})})),Bt=Object(S.a)({table:{marginTop:8,"& div.ant-table-container":{border:"1px solid #bbb",borderRadius:4,borderLeft:"1px solid #bbb !important"}},container:{marginLeft:24,marginRight:24}})(Object(Ce.a)((function(e){var t=e.classes,n=we(),i=n.projectStore,r=n.tableStore,o=n.tableRowStore,c=n.semanticModelStore,d=qt.table.useURLParams().tableId,u=function(e,t){var n=50,i=qt.table.useQueryParams(),r=null===i?"":i.query,o=Object(F.useMemo)((function(){return""!==r?e.decodeWhereQuery(r):{}}),[e,r]),c=Object(F.useState)({tableId:-1,tableIndex:-1,query:"",records:[],leftOffset:0,total:0,hasPrev:!1,hasNext:!1,allLeft:!1,allRight:!1,version:0}),d=Object(a.a)(c,2),u=d[0],l=d[1];Object(F.useEffect)((function(){var i=function(){var i=Object(Te.a)(s.a.mark((function i(){var c,d,h,f,p,b,v,j,g;return s.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c=Pe.a.sortedIndex(u.records,t),!(u.query!==r||u.records[c]!==t)){i.next=13;break}return i.next=5,Promise.all([e.query({limit:n,offset:0,fields:["id"],conditions:Object(pe.a)(Object(pe.a)({},o),{},{id:{op:"gte",value:t}})}),e.query({limit:n,offset:0,fields:["id"],conditions:Object(pe.a)(Object(pe.a)({},o),{},{id:{op:"lt",value:t}})})]);case 5:h=i.sent,f=Object(a.a)(h,2),p=f[0],b=f[1],v=b.records.map((function(e){return e.id})).concat(p.records.map((function(e){return e.id}))),d={tableIndex:b.records.length,records:v,total:b.total+p.total,leftOffset:b.total-b.records.length,allLeft:b.total<=n,allRight:p.total<=n,hasPrev:b.records.length>0,hasNext:p.records.length>1},i.next=28;break;case 13:if(0!==c||u.allLeft){i.next=20;break}return i.next=16,e.query({limit:n,offset:0,fields:["id"],conditions:Object(pe.a)(Object(pe.a)({},o),{},{id:{op:"lt",value:t}})});case 16:j=i.sent,d={tableIndex:j.records.length,leftOffset:j.total-j.records.length,records:j.records.map((function(e){return e.id})).concat(u.records),allLeft:j.total<=n,hasPrev:j.records.length>0},i.next=28;break;case 20:if(c!==u.records.length-1||u.allRight){i.next=27;break}return i.next=23,e.query({limit:n,offset:0,fields:["id"],conditions:Object(pe.a)(Object(pe.a)({},o),{},{id:{op:"gt",value:t}})});case 23:g=i.sent,d={tableIndex:c,records:u.records.concat(g.records.map((function(e){return e.id}))),allRight:g.total<=n,hasNext:g.records.length>0},i.next=28;break;case 27:d={tableIndex:c,hasNext:c<u.records.length-1,hasPrev:c>0};case 28:l(Object(pe.a)(Object(pe.a)(Object(pe.a)({},u),d),{},{version:u.version+1,query:r,tableId:t}));case 29:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}();i()}),[t,r]);var h=function(e){if(t===u.tableId){var n=u.records[u.tableIndex+e];void 0!==n&&qt.table.path({tableId:n},{query:r}).open()}};return{toPreviousTable:function(){h(-1)},toNextTable:function(){h(1)},navState:u}}(r,d),l=u.navState,h=u.toNextTable,f=u.toPreviousTable;Object(F.useEffect)((function(){r.fetchById(d).then((function(e){void 0!==e&&i.fetchById(e.project)})),c.hasByTable(d)||c.fetch({limit:1e3,offset:0,conditions:{table:d}})}),[r,i,c,d]),Object(Fe.a)("b",f,[l.version]),Object(Fe.a)("n",h,[l.version]);var p=r.get(d),b=Object(F.useMemo)((function(){var e,t,n,i=r.get(d);if(void 0!==i&&null!==i)return{name:i.name,description:i.description,columns:i.columns,size:i.size,context:{webpage:null===(e=i.contextPage)||void 0===e?void 0:e.url,title:null===(t=i.contextPage)||void 0===t?void 0:t.title,entityId:null===(n=i.contextPage)||void 0===n?void 0:n.entityId,contentHierarchy:i.contextTree}}}),[d,void 0!==p]);if(null===p)return Object(I.jsx)($,{});if(void 0===p)return Object(I.jsx)(L,{});var v=null;if(c.hasByTable(d)){var j=c.findByTable(d);v=Object(I.jsx)(At,{sm:j[0]})}else v=Object(I.jsx)(L,{bordered:!0});var g=function(){var e=Object(Te.a)(s.a.mark((function e(t,n){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.fetch({limit:t,offset:n,conditions:{table:p.id}});case 2:return i=e.sent,e.abrupt("return",i.records.map((function(e){return{index:e.index,row:e.row.map((function(e){return{value:e}})),links:e.links}})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(I.jsxs)(H.a.Fragment,{children:[Object(I.jsx)(Ft,{project:i.get(p.project),table:p,btns:[Object(I.jsx)(T.a,{onClick:f,disabled:!l.hasPrev,children:"Previous Table (B)"},"prev"),Object(I.jsx)(T.a,{onClick:h,disabled:!l.hasNext,children:"Next Table (N)"},"next")],extraSubTitle:Object(I.jsxs)("span",{className:"ml-2",children:["Position:"," ",Object(I.jsxs)("b",{children:[" ",l.leftOffset+l.tableIndex+1,"/",l.total]})]})}),Object(I.jsx)("div",{className:t.container,children:Object(I.jsxs)(_.b,{direction:"vertical",size:8,children:[v,Object(I.jsx)(ct,{toolBarRender:!1,table:b,query:g},d)]})})]})})));var Ft=function(e){var t=e.project||new ue(0,"","");return Object(I.jsx)(Be.a,{onBack:function(){return M.push(qt.project.getURL({projectId:e.table.project}))},title:Object(I.jsxs)(_.b,{children:[Object(I.jsx)("span",{style:{fontWeight:500},children:"Table "}),Object(I.jsx)("span",{style:{color:"#237804",textDecoration:"underline"},children:e.table.name})]}),subTitle:Object(I.jsxs)(_.b,{children:[Object(I.jsxs)("span",{children:["(Project ",Object(I.jsx)("b",{children:t.name}),")"]}),e.extraSubTitle]}),extra:e.btns})},Ht=n.p+"static/media/logo.e35779db.png",zt=n(890),Mt=n(891),Ut=n(887),qt={project:new W({urlSchema:{projectId:"number"},component:Re,pathDef:"/projects/:projectId"}),table:new U({urlSchema:{tableId:"number"},querySchema:{query:"string"},component:Bt,pathDef:"/tables/:tableId"}),settings:new q({component:function(){return Object(I.jsx)(ke.a,{gutter:16,children:Object(I.jsx)(Ie.a,{className:"gutter-row",span:24})})},pathDef:"/settings",exact:!0}),upload:new q({component:_e,pathDef:"/upload",exact:!0}),projects:new q({component:_e,pathDef:"/projects",exact:!0}),home:new q({component:_e,pathDef:"/",exact:!0})};window._routes=qt,function(e,t,n){if(void 0===n&&(n=new Set),Array.isArray(n)?n=new Set(n):n instanceof Set||(n=new Set(Object.keys(n))),"function"===typeof t)for(var i=0,r=Object.entries(e);i<r.length;i++){var o=Object(a.a)(r[i],2),s=o[0],c=o[1];n.has(s)||(c.routeDef.component=t(c.component,e))}else for(var d=0,u=Object.entries(e);d<u.length;d++){var l=Object(a.a)(u[d],2),h=l[0],f=l[1];n.has(h)||void 0===t[h]||(f.routeDef.component=t[h](f.component,e))}}(qt,(function(e){return function(t){var n=H.a.createElement(e,t);return Object(I.jsxs)(_.b,{direction:"vertical",style:{width:"100%"},children:[Object(I.jsx)(ne,{menus:{home:Object(I.jsx)("img",{src:Ht,alt:"logo"}),projects:{icon:Object(I.jsx)(zt.a,{}),children:"Projects"},upload:{icon:Object(I.jsx)(Mt.a,{}),children:"Upload"},settings:{icon:Object(I.jsx)(Ut.a,{}),children:"Settings"}},routes:qt,isFirstItemLogo:!0}),Object(I.jsx)("div",{className:"wide-container",children:n})]})}}),["table"]),r.a.render(Object(I.jsx)(me.Provider,{value:xe,children:Object(I.jsx)(se,{enUSLocale:!0,routes:qt})}),document.getElementById("root")),ce()}},[[862,1,2]]]);
//# sourceMappingURL=main.746fd2f4.chunk.js.map